'use strict';
const _0x23a2a9 = _0x55ff;
function _0x4642() {
    const _0x24d9dc = [
        '88278DkkStW',
        '321039DfeXTa',
        '16737zSdWHe',
        'tokenAPI',
        'stream',
        'length',
        '24NrxLyw',
        'data',
        'finish',
        'then',
        '762870vTEUUN',
        'wvuxh',
        '1722325BWqcWX',
        '../../util',
        'ZxUrC',
        '../../erro',
        'next',
        'url',
        'default',
        'done',
        'wmGAb',
        'axios',
        'getTime',
        'defineProp',
        'IA:\x20',
        'LOAD',
        'path',
        'createWrit',
        'zNAKt',
        'split',
        'video',
        'filename',
        'image',
        'QIlmq',
        '__awaiter',
        'public',
        'API_URL_36',
        'D360-API-K',
        'qximk',
        '750KWmzsg',
        'uyicO',
        '__importDe',
        'ucUUV',
        'rs/AppErro',
        'headers',
        'hmjVO',
        'mime_type',
        'GET',
        'voice',
        'env',
        'VZCqp',
        '5TNboqN',
        'apply',
        '282clOUFs',
        'join',
        'YtBRr',
        'nxmdA',
        'responseTy',
        'WNLOAD_MED',
        'jvYJG',
        'erty',
        'WjGCT',
        'audio',
        '257916PYaaIV',
        'iwCFX',
        'atXaZ',
        'KMDeg',
        'error',
        's/logger',
        '/v1/media/',
        'pipe',
        '__esModule',
        'zwViw',
        '360_NOT_DO',
        'wFnry',
        'ERROR\x20DONW',
        'bwjJG',
        'fault',
        'logger',
        'HyozX',
        'method',
        'document',
        'sGAxK',
        '3lCDPdQ',
        'eStream',
        'value',
        'throw'
    ];
    _0x4642 = function () {
        return _0x24d9dc;
    };
    return _0x4642();
}
(function (_0x59a554, _0x202907) {
    const _0x4ea208 = _0x55ff, _0x2fb859 = _0x59a554();
    while (!![]) {
        try {
            const _0x367ae7 = -parseInt(_0x4ea208(0x1e7)) / (-0x1 * -0x2329 + -0x3bf * -0x1 + -0x26e7 * 0x1) * (parseInt(_0x4ea208(0x1f5)) / (-0xd9 * 0x2 + 0xbc * -0x7 + 0x6d8)) + parseInt(_0x4ea208(0x213)) / (0x1 * -0x259a + 0x309 + -0x2294 * -0x1) * (-parseInt(_0x4ea208(0x1ff)) / (-0x254f + 0xd1f * -0x1 + 0x3272)) + -parseInt(_0x4ea208(0x1f3)) / (-0x89 * 0x26 + -0x60d * -0x2 + 0x1 * 0x841) * (-parseInt(_0x4ea208(0x217)) / (0x1340 + 0x1b38 + -0x2e72)) + parseInt(_0x4ea208(0x219)) / (-0x3 * 0x5c7 + -0x1c31 * 0x1 + -0xd * -0x381) * (-parseInt(_0x4ea208(0x21d)) / (0x609 + 0x12cb + -0x18cc)) + parseInt(_0x4ea208(0x218)) / (0x152 * 0x15 + 0x1442 + -0x2ff3) + parseInt(_0x4ea208(0x221)) / (-0x1315 + 0x5b * -0x39 + 0x2762) + parseInt(_0x4ea208(0x223)) / (-0x2 * 0xd7c + -0x6e6 + 0x21e9);
            if (_0x367ae7 === _0x202907)
                break;
            else
                _0x2fb859['push'](_0x2fb859['shift']());
        } catch (_0x83279b) {
            _0x2fb859['push'](_0x2fb859['shift']());
        }
    }
}(_0x4642, 0x19391 * 0x1 + -0x554f * -0x2 + -0xa0bb));
var __awaiter = this && this[_0x23a2a9(0x1e2)] || function (_0x588cda, _0x560071, _0x3b163f, _0x55ae89) {
        const _0x1bbc57 = _0x23a2a9, _0x30fe4b = {
                'HyozX': function (_0x162b79, _0x1925aa) {
                    return _0x162b79(_0x1925aa);
                },
                'wvuxh': function (_0xb083b7, _0x157dc1) {
                    return _0xb083b7 instanceof _0x157dc1;
                },
                'iwCFX': function (_0x5b4a7e, _0x4afd4a) {
                    return _0x5b4a7e(_0x4afd4a);
                },
                'atXaZ': _0x1bbc57(0x216),
                'zNAKt': function (_0x4019b4, _0x2b338c) {
                    return _0x4019b4(_0x2b338c);
                }
            };
        function _0x6b9a75(_0x25ae74) {
            const _0xc5daee = _0x1bbc57;
            return _0x30fe4b[_0xc5daee(0x222)](_0x25ae74, _0x3b163f) ? _0x25ae74 : new _0x3b163f(function (_0x830b07) {
                const _0x440fbf = _0xc5daee;
                _0x30fe4b[_0x440fbf(0x20f)](_0x830b07, _0x25ae74);
            });
        }
        return new (_0x3b163f || (_0x3b163f = Promise))(function (_0x41b050, _0x840ae2) {
            const _0x483261 = _0x1bbc57, _0x1acf9e = {
                    'jvYJG': function (_0x1d3200, _0x3d0aa3) {
                        const _0x12b6fb = _0x55ff;
                        return _0x30fe4b[_0x12b6fb(0x20f)](_0x1d3200, _0x3d0aa3);
                    },
                    'wmGAb': _0x30fe4b[_0x483261(0x201)],
                    'ucUUV': function (_0xe5ceba, _0x25318a) {
                        const _0x50a8fd = _0x483261;
                        return _0x30fe4b[_0x50a8fd(0x200)](_0xe5ceba, _0x25318a);
                    }
                };
            function _0x281fd0(_0x466e57) {
                const _0x405355 = _0x483261;
                try {
                    _0x30fe4b[_0x405355(0x200)](_0x1803b7, _0x55ae89[_0x405355(0x1d0)](_0x466e57));
                } catch (_0x5d8d04) {
                    _0x30fe4b[_0x405355(0x20f)](_0x840ae2, _0x5d8d04);
                }
            }
            function _0x407376(_0x3ac25d) {
                const _0x388dba = _0x483261;
                try {
                    _0x1acf9e[_0x388dba(0x1fb)](_0x1803b7, _0x55ae89[_0x1acf9e[_0x388dba(0x1d4)]](_0x3ac25d));
                } catch (_0x113e6e) {
                    _0x1acf9e[_0x388dba(0x1fb)](_0x840ae2, _0x113e6e);
                }
            }
            function _0x1803b7(_0x70c700) {
                const _0x146623 = _0x483261;
                _0x70c700[_0x146623(0x1d3)] ? _0x1acf9e[_0x146623(0x1fb)](_0x41b050, _0x70c700[_0x146623(0x215)]) : _0x1acf9e[_0x146623(0x1ea)](_0x6b9a75, _0x70c700[_0x146623(0x215)])[_0x146623(0x220)](_0x281fd0, _0x407376);
            }
            _0x30fe4b[_0x483261(0x1dc)](_0x1803b7, (_0x55ae89 = _0x55ae89[_0x483261(0x1f4)](_0x588cda, _0x560071 || []))[_0x483261(0x1d0)]());
        });
    }, __importDefault = this && this[_0x23a2a9(0x1e9) + _0x23a2a9(0x20d)] || function (_0x51408d) {
        const _0x9cd8f4 = _0x23a2a9;
        return _0x51408d && _0x51408d[_0x9cd8f4(0x207)] ? _0x51408d : { 'default': _0x51408d };
    };
function _0x55ff(_0x33aa09, _0x4395a2) {
    const _0x3472c3 = _0x4642();
    return _0x55ff = function (_0x4604f5, _0x4a710a) {
        _0x4604f5 = _0x4604f5 - (0x769 * -0x1 + -0xb59 * 0x3 + 0x2b44);
        let _0x52853d = _0x3472c3[_0x4604f5];
        return _0x52853d;
    }, _0x55ff(_0x33aa09, _0x4395a2);
}
const _0x28cce4 = {};
_0x28cce4[_0x23a2a9(0x215)] = !![], Object[_0x23a2a9(0x1d7) + _0x23a2a9(0x1fc)](exports, _0x23a2a9(0x207), _0x28cce4);
const axios_1 = __importDefault(require(_0x23a2a9(0x1d5))), fs_1 = require('fs'), path_1 = require(_0x23a2a9(0x1da)), AppError_1 = __importDefault(require(_0x23a2a9(0x226) + _0x23a2a9(0x1eb) + 'r')), logger_1 = require(_0x23a2a9(0x224) + _0x23a2a9(0x204)), downloadFile = (_0x3b2240, _0x4cfde7, _0x1d2609) => __awaiter(void (-0x1 * -0xe17 + 0x7f6 * 0x4 + -0x1 * 0x2def), void (0x2313 * -0x1 + 0x943 + 0x19d0), void (0x1 * -0x21b3 + 0x1f * -0xd3 + -0x768 * -0x8), function* () {
        const _0x5150f7 = _0x23a2a9, _0x133d9c = {
                'wFnry': function (_0x26b056, _0x53b42c) {
                    return _0x26b056(_0x53b42c);
                },
                'KMDeg': _0x5150f7(0x20b) + _0x5150f7(0x1d9),
                'VZCqp': _0x5150f7(0x21f),
                'nxmdA': _0x5150f7(0x203),
                'zwViw': _0x5150f7(0x1e3),
                'bwjJG': _0x5150f7(0x1ef),
                'WjGCT': _0x5150f7(0x21b)
            }, _0xda3f74 = process[_0x5150f7(0x1f1)][_0x5150f7(0x1e4) + '0'] + _0x5150f7(0x205) + _0x4cfde7, _0x235349 = (-0x1 * -0xba1 + 0xf80 * 0x1 + -0x1b21, path_1[_0x5150f7(0x1f6)])(__dirname, '..', '..', _0x133d9c[_0x5150f7(0x208)], _0x1d2609), _0x42e76c = {};
        _0x42e76c[_0x5150f7(0x1e5) + 'EY'] = _0x3b2240;
        const _0x57d593 = {};
        _0x57d593[_0x5150f7(0x1d1)] = _0xda3f74, _0x57d593[_0x5150f7(0x210)] = _0x133d9c[_0x5150f7(0x20c)], _0x57d593[_0x5150f7(0x1f9) + 'pe'] = _0x133d9c[_0x5150f7(0x1fd)], _0x57d593[_0x5150f7(0x1ec)] = _0x42e76c;
        const _0x5c09af = yield (0x316 + 0x30 * 0x6a + -0x16f6, axios_1[_0x5150f7(0x1d2)])(_0x57d593);
        yield new Promise((_0x4e3814, _0xe048fa) => {
            const _0x2bab45 = _0x5150f7, _0x2f933e = {
                    'uyicO': function (_0x5ce081, _0x2d2f0e) {
                        const _0x435aa8 = _0x55ff;
                        return _0x133d9c[_0x435aa8(0x20a)](_0x5ce081, _0x2d2f0e);
                    },
                    'qximk': _0x133d9c[_0x2bab45(0x202)],
                    'ZxUrC': function (_0x3c4728, _0x209ae0) {
                        const _0x2651a3 = _0x2bab45;
                        return _0x133d9c[_0x2651a3(0x20a)](_0x3c4728, _0x209ae0);
                    }
                };
            _0x5c09af[_0x2bab45(0x21e)][_0x2bab45(0x206)]((-0x1 * 0x1f23 + 0x2323 + -0x400, fs_1[_0x2bab45(0x1db) + _0x2bab45(0x214)])(_0x235349))['on'](_0x133d9c[_0x2bab45(0x1f2)], () => __awaiter(void (0x133a + -0x47 + 0x651 * -0x3), void (-0x1981 + 0x2161 * -0x1 + -0x3ae2 * -0x1), void (0x6b * -0x1d + -0x1c89 * -0x1 + -0x106a), function* () {
                const _0x53228c = _0x2bab45;
                return _0x2f933e[_0x53228c(0x1e8)](_0x4e3814, !![]);
            }))['on'](_0x133d9c[_0x2bab45(0x1f8)], _0x51191e => {
                const _0x249a7d = _0x2bab45;
                console[_0x249a7d(0x203)](_0x2f933e[_0x249a7d(0x1e6)], _0x51191e), _0x2f933e[_0x249a7d(0x225)](_0xe048fa, new Error(_0x51191e));
            });
        });
    }), GetMediaWaba360 = ({
        channel: _0x1ddaf1,
        msg: _0x3b2407,
        ticket: _0x58b6b6
    }) => __awaiter(void (-0x13ce + -0x45 * -0x53 + -0x291), void (-0x2581 * -0x1 + 0x7 * -0x515 + 0x1ee * -0x1), void (0x4f1 + -0x255d * -0x1 + 0x2 * -0x1527), function* () {
        const _0x16c396 = _0x23a2a9, _0x47a2f1 = {
                'YtBRr': function (_0x43a683, _0x1d7716) {
                    return _0x43a683 === _0x1d7716;
                },
                'sGAxK': function (_0x42f793, _0x525d97) {
                    return _0x42f793 > _0x525d97;
                },
                'QIlmq': function (_0xb666ef, _0x552899) {
                    return _0xb666ef === _0x552899;
                },
                'hmjVO': function (_0x2d1903, _0x7a0520, _0x5b6d95, _0x1a0fc6) {
                    return _0x2d1903(_0x7a0520, _0x5b6d95, _0x1a0fc6);
                }
            };
        try {
            let _0x55352a = '', _0x7ea46b, _0x18983b;
            (_0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, null) || _0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, void (0x36 * 0x17 + 0x1 * 0x205c + -0x2536)) ? void (0x11f2 + 0x14ec + -0x26de) : _0x3b2407[_0x16c396(0x211)]) && (_0x55352a = _0x3b2407[_0x16c396(0x211)]['id'] || '', _0x7ea46b = _0x3b2407[_0x16c396(0x211)][_0x16c396(0x1df)], _0x18983b = _0x3b2407[_0x16c396(0x211)][_0x16c396(0x1ee)]);
            (_0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, null) || _0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, void (-0x1 * -0x248c + 0x120b + 0x5 * -0xaeb)) ? void (0xb7 * -0x15 + -0x22d4 + 0x109d * 0x3) : _0x3b2407[_0x16c396(0x1e0)]) && (_0x55352a = _0x3b2407[_0x16c396(0x1e0)]['id'] || '', _0x18983b = _0x3b2407[_0x16c396(0x1e0)][_0x16c396(0x1ee)]);
            (_0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, null) || _0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, void (0x1a * 0x17b + 0x7a2 + -0x2e20)) ? void (-0x692 * 0x2 + -0x105a + -0x32 * -0x97) : _0x3b2407[_0x16c396(0x1de)]) && (_0x55352a = _0x3b2407[_0x16c396(0x1de)]['id'] || '', _0x18983b = _0x3b2407[_0x16c396(0x1de)][_0x16c396(0x1ee)]);
            if (_0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, null) || _0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, void (-0x1 * -0x22d0 + -0x3 * 0xc5 + -0x9d * 0x35)) ? void (0x1c3a + 0x231b + 0x1f * -0x20b) : _0x3b2407[_0x16c396(0x1f0)]) {
                _0x55352a = _0x3b2407[_0x16c396(0x1f0)]['id'] || '';
                const _0xf35877 = _0x3b2407[_0x16c396(0x1f0)][_0x16c396(0x1ee)] || '', _0x1bb585 = _0xf35877[_0x16c396(0x1dd)](';');
                _0x18983b = _0x47a2f1[_0x16c396(0x212)](_0x1bb585[_0x16c396(0x21c)], -0x8ef * 0x2 + -0x115 * -0x5 + -0x13f * -0xa) ? _0x1bb585[0x2110 + -0x118d + -0xf83 * 0x1] : _0x3b2407[_0x16c396(0x1f0)][_0x16c396(0x1ee)];
            }
            (_0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, null) || _0x47a2f1[_0x16c396(0x1f7)](_0x3b2407, void (0x3a * -0x2b + 0x1852 + -0xe94)) ? void (0x2409 + -0x197e + -0xa8b) : _0x3b2407[_0x16c396(0x1fe)]) && (_0x55352a = _0x3b2407[_0x16c396(0x1fe)]['id'] || '', _0x18983b = _0x3b2407[_0x16c396(0x1fe)][_0x16c396(0x1ee)]);
            const _0x8fc37d = _0x47a2f1[_0x16c396(0x1f7)](_0x18983b, null) || _0x47a2f1[_0x16c396(0x1e1)](_0x18983b, void (-0x6 * 0xd3 + -0x157 * -0x4 + -0x6a)) ? void (0x5 * -0x529 + 0xdee + 0xbdf) : _0x18983b[_0x16c396(0x1dd)]('/')[0x1942 + 0x100 * -0xf + -0xa41][_0x16c396(0x1dd)](';')[-0x206b + -0x120f + 0x327a], _0x43aeaa = new Date()[_0x16c396(0x1d6)](), _0x4ff7de = _0x7ea46b ? _0x7ea46b + '_' + _0x58b6b6['id'] + '_' + _0x55352a + '_' + _0x43aeaa + '.' + _0x8fc37d : _0x58b6b6['id'] + '_' + _0x55352a + '_' + _0x43aeaa + '.' + _0x8fc37d;
            return yield _0x47a2f1[_0x16c396(0x1ed)](downloadFile, _0x1ddaf1[_0x16c396(0x21a)], _0x55352a, _0x4ff7de), _0x4ff7de;
        } catch (_0x1e127f) {
            logger_1[_0x16c396(0x20e)][_0x16c396(0x203)](_0x1e127f);
            throw new AppError_1[(_0x16c396(0x1d2))](_0x16c396(0x209) + _0x16c396(0x1fa) + _0x16c396(0x1d8) + _0x1e127f);
        }
    });
exports[_0x23a2a9(0x1d2)] = GetMediaWaba360;