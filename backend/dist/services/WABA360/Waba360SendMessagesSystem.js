'use strict';
const _0x4cc2fc = _0x1c96;
function _0x32ba() {
    const _0x1fa646 = [
        'BSlcM',
        'apply',
        '2442429rTkPnh',
        'throw',
        '360',
        'then',
        'FZkcd',
        'assign',
        'applicatio',
        'ybYIg',
        'value',
        'individual',
        'YDbez',
        'timestamp',
        'qYHVH',
        'document',
        'ers/SetTic',
        'vcYaM',
        'video',
        'jLaOE',
        'age',
        'dobOa',
        'BwqCk',
        '1MzLmxZ',
        'evuCP',
        '964206fxWEFq',
        'JfoCH',
        'XmkkA',
        'findAll',
        'message',
        '__awaiter',
        'ITtpr',
        'done',
        'mediaUrl',
        'KKDiG',
        '70XchzHl',
        'vPKcy',
        'ack',
        'defineProp',
        'Gerld',
        'ers/socket',
        'audio',
        'rmEep',
        'status',
        'where',
        'messageId',
        'FKjbx',
        'sended',
        'voice',
        'includes',
        'ketMessage',
        '10MZCWDZ',
        'mediaName',
        'erty',
        'Zjlcq',
        'IULGE',
        'default',
        'chat',
        '442146GQpukE',
        'text',
        'body',
        'rUWHp',
        'waba',
        'tokenAPI',
        '1494568zhTMqK',
        'pending',
        'Niztm',
        'wabaMediaI',
        'ticket',
        '5625524PDLGoj',
        'quotedMsg',
        'Emit',
        'ls/Message',
        './SentMess',
        '../../help',
        'image',
        '__importDe',
        'next',
        'TOzHJ',
        'contact',
        'TMykQ',
        '9276WbErDR',
        'mediaType',
        'caption',
        'whatsapp',
        '__esModule',
        'apiKey',
        'createdAt',
        'NCYfB',
        'wrTwr',
        'lte',
        'tenantId',
        'fault',
        'type',
        'dataValues',
        '../../mode',
        'ls/Whatsap',
        'ls/Ticket',
        'TGJJV',
        'eiolj',
        'chat:ack',
        'sAsRead',
        'tyzRZ',
        'McYiH',
        'SFFUa',
        '18773370BTuLsj',
        'nDbYr',
        'ypBKv',
        'OTPuc',
        'messages',
        'ASC',
        'number',
        'fPjab',
        'sequelize',
        'update',
        '1355WqiuuP',
        'CbRdC',
        'PyJdR'
    ];
    _0x32ba = function () {
        return _0x1fa646;
    };
    return _0x32ba();
}
(function (_0x566fc9, _0x2a951b) {
    const _0x29eea0 = _0x1c96, _0x4bdddc = _0x566fc9();
    while (!![]) {
        try {
            const _0xc505f3 = parseInt(_0x29eea0(0x114)) / (-0xf8 + 0x270 * 0xd + -0x1eb7) * (parseInt(_0x29eea0(0xc1)) / (0x1c3b + 0x1 * 0x7a5 + 0x2 * -0x11ef)) + -parseInt(_0x29eea0(0x116)) / (0x189 + 0x59 * 0x59 + 0x1 * -0x2077) + parseInt(_0x29eea0(0xcc)) / (0x4e9 * 0x3 + 0x7fb * 0x1 + 0x5 * -0x48a) + -parseInt(_0x29eea0(0xfa)) / (0x1fca + -0x1dcb + -0x1fa) * (parseInt(_0x29eea0(0xd8)) / (-0x110b * -0x1 + 0xd10 + -0x11 * 0x1c5)) + parseInt(_0x29eea0(0x120)) / (-0x1f3c + -0x176d + -0x28 * -0x15e) * (-parseInt(_0x29eea0(0xc7)) / (-0xa67 + 0x8b * 0x5 + 0x7b8)) + -parseInt(_0x29eea0(0xff)) / (-0x1c1 * -0x10 + -0x2141 + 0xdf * 0x6) * (-parseInt(_0x29eea0(0xba)) / (0x124f * 0x2 + 0x1 * 0xdf6 + -0x2 * 0x1945)) + parseInt(_0x29eea0(0xf0)) / (-0x1cc7 * 0x1 + 0x2 * 0x338 + 0x1662);
            if (_0xc505f3 === _0x2a951b)
                break;
            else
                _0x4bdddc['push'](_0x4bdddc['shift']());
        } catch (_0x59f55f) {
            _0x4bdddc['push'](_0x4bdddc['shift']());
        }
    }
}(_0x32ba, -0x1161 * -0x178 + 0x1641ee + 0x745 * -0x47b));
var __awaiter = this && this[_0x4cc2fc(0x11b)] || function (_0x5db2dd, _0x39a4d4, _0x5d017f, _0x35afea) {
        const _0x6206c2 = _0x4cc2fc, _0x1fb98a = {
                'FZkcd': function (_0x23f76f, _0x33150f) {
                    return _0x23f76f(_0x33150f);
                },
                'TMykQ': function (_0xef91f7, _0x38d2bf) {
                    return _0xef91f7 instanceof _0x38d2bf;
                },
                'Zjlcq': function (_0x3704d5, _0x5d4021) {
                    return _0x3704d5(_0x5d4021);
                },
                'tyzRZ': function (_0x410588, _0x595e87) {
                    return _0x410588(_0x595e87);
                },
                'KKDiG': _0x6206c2(0x100)
            };
        function _0x1f60a7(_0x510975) {
            const _0x4e23f6 = _0x6206c2;
            return _0x1fb98a[_0x4e23f6(0xd7)](_0x510975, _0x5d017f) ? _0x510975 : new _0x5d017f(function (_0x29fe24) {
                const _0x452779 = _0x4e23f6;
                _0x1fb98a[_0x452779(0x103)](_0x29fe24, _0x510975);
            });
        }
        return new (_0x5d017f || (_0x5d017f = Promise))(function (_0x4a4b38, _0x1daf41) {
            const _0x32ec90 = _0x6206c2, _0x1d8f3f = {
                    'IULGE': function (_0x600191, _0x3b3c8c) {
                        const _0x19cead = _0x1c96;
                        return _0x1fb98a[_0x19cead(0xbd)](_0x600191, _0x3b3c8c);
                    },
                    'ypBKv': _0x1fb98a[_0x32ec90(0x11f)]
                };
            function _0x124098(_0x3db461) {
                const _0xc2899b = _0x32ec90;
                try {
                    _0x1fb98a[_0xc2899b(0x103)](_0x5f1ea0, _0x35afea[_0xc2899b(0xd4)](_0x3db461));
                } catch (_0x379679) {
                    _0x1fb98a[_0xc2899b(0x103)](_0x1daf41, _0x379679);
                }
            }
            function _0x1b5402(_0x1ed795) {
                const _0x2f0442 = _0x32ec90;
                try {
                    _0x1d8f3f[_0x2f0442(0xbe)](_0x5f1ea0, _0x35afea[_0x1d8f3f[_0x2f0442(0xf2)]](_0x1ed795));
                } catch (_0x385671) {
                    _0x1d8f3f[_0x2f0442(0xbe)](_0x1daf41, _0x385671);
                }
            }
            function _0x5f1ea0(_0x196315) {
                const _0x44bc4f = _0x32ec90;
                _0x196315[_0x44bc4f(0x11d)] ? _0x1fb98a[_0x44bc4f(0xbd)](_0x4a4b38, _0x196315[_0x44bc4f(0x107)]) : _0x1fb98a[_0x44bc4f(0xed)](_0x1f60a7, _0x196315[_0x44bc4f(0x107)])[_0x44bc4f(0x102)](_0x124098, _0x1b5402);
            }
            _0x1fb98a[_0x32ec90(0xed)](_0x5f1ea0, (_0x35afea = _0x35afea[_0x32ec90(0xfe)](_0x5db2dd, _0x39a4d4 || []))[_0x32ec90(0xd4)]());
        });
    }, __importDefault = this && this[_0x4cc2fc(0xd3) + _0x4cc2fc(0xe3)] || function (_0x319355) {
        const _0xd45757 = _0x4cc2fc;
        return _0x319355 && _0x319355[_0xd45757(0xdc)] ? _0x319355 : { 'default': _0x319355 };
    };
const _0x3b5dbf = {};
_0x3b5dbf[_0x4cc2fc(0x107)] = !![], Object[_0x4cc2fc(0xad) + _0x4cc2fc(0xbc)](exports, _0x4cc2fc(0xdc), _0x3b5dbf);
const sequelize_1 = require(_0x4cc2fc(0xf8)), SetTicketMessagesAsRead_1 = __importDefault(require(_0x4cc2fc(0xd1) + _0x4cc2fc(0x10d) + _0x4cc2fc(0xb9) + _0x4cc2fc(0xec))), socketEmit_1 = __importDefault(require(_0x4cc2fc(0xd1) + _0x4cc2fc(0xaf) + _0x4cc2fc(0xce))), Message_1 = __importDefault(require(_0x4cc2fc(0xe6) + _0x4cc2fc(0xcf))), Ticket_1 = __importDefault(require(_0x4cc2fc(0xe6) + _0x4cc2fc(0xe8))), Whatsapp_1 = __importDefault(require(_0x4cc2fc(0xe6) + _0x4cc2fc(0xe7) + 'p')), SentMessage_1 = __importDefault(require(_0x4cc2fc(0xd0) + _0x4cc2fc(0x111))), buildWabaMessage360 = (_0x2de47d, _0x94d1ea) => __awaiter(void (0x4a5 + 0x112b + 0x8 * -0x2ba), void (-0xa * -0xa3 + -0x1 * 0x1541 + 0xee3), void (0x265a + 0x1846 + -0x2 * 0x1f50), function* () {
        const _0x1eb747 = _0x4cc2fc, _0xcb4a9f = {
                'FKjbx': function (_0x547137, _0x365bbb) {
                    return _0x547137(_0x365bbb);
                },
                'McYiH': _0x1eb747(0x108),
                'fPjab': _0x1eb747(0xc2),
                'nDbYr': function (_0x4e5c39, _0x3cf4e5) {
                    return _0x4e5c39 === _0x3cf4e5;
                },
                'wrTwr': _0x1eb747(0x105) + 'n',
                'Gerld': function (_0x2380ad, _0x158b83) {
                    return _0x2380ad === _0x158b83;
                },
                'Niztm': _0x1eb747(0x10c),
                'jLaOE': _0x1eb747(0xd2),
                'vcYaM': function (_0x7b9867, _0x2eed02) {
                    return _0x7b9867 === _0x2eed02;
                },
                'YDbez': _0x1eb747(0x10f),
                'OTPuc': _0x1eb747(0xb0),
                'CbRdC': function (_0x16af02, _0x144605) {
                    return _0x16af02 === _0x144605;
                },
                'BSlcM': _0x1eb747(0xb7),
                'rmEep': function (_0xb47095, _0x391545) {
                    return _0xb47095 === _0x391545;
                },
                'SFFUa': _0x1eb747(0xc0),
                'vPKcy': function (_0x1bc158, _0x26da7c) {
                    return _0x1bc158 === _0x26da7c;
                }
            };
        let _0x15b3e9 = {
            'timestamp': _0xcb4a9f[_0x1eb747(0xb5)](String, _0x2de47d[_0x1eb747(0x10a)]),
            'recipient_type': _0xcb4a9f[_0x1eb747(0xee)],
            'to': _0x94d1ea,
            'type': _0xcb4a9f[_0x1eb747(0xf7)]
        };
        if (_0xcb4a9f[_0x1eb747(0xf1)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xe0)]) || _0xcb4a9f[_0x1eb747(0xae)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xc9)])) {
            const _0x1d4237 = {};
            _0x1d4237['id'] = _0x2de47d[_0x1eb747(0xca) + 'd'], _0x1d4237[_0x1eb747(0xda)] = _0x2de47d[_0x1eb747(0xc3)] || _0x2de47d[_0x1eb747(0xbb)] || '' || '';
            const _0x1e389e = {};
            _0x1e389e[_0x1eb747(0xe4)] = _0xcb4a9f[_0x1eb747(0xc9)], _0x1e389e[_0x1eb747(0x10c)] = _0x1d4237, _0x15b3e9 = Object[_0x1eb747(0x104)](Object[_0x1eb747(0x104)]({}, _0x15b3e9), _0x1e389e);
        }
        if (_0xcb4a9f[_0x1eb747(0xf1)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0x110)])) {
            const _0x6c9d9c = {};
            _0x6c9d9c['id'] = _0x2de47d[_0x1eb747(0xca) + 'd'], _0x6c9d9c[_0x1eb747(0xda)] = _0x2de47d[_0x1eb747(0xc3)] || _0x2de47d[_0x1eb747(0xbb)] || '';
            const _0x56374e = {};
            _0x56374e[_0x1eb747(0xe4)] = _0xcb4a9f[_0x1eb747(0x110)], _0x56374e[_0x1eb747(0xd2)] = _0x6c9d9c, _0x15b3e9 = Object[_0x1eb747(0x104)](Object[_0x1eb747(0x104)]({}, _0x15b3e9), _0x56374e);
        }
        if (_0xcb4a9f[_0x1eb747(0x10e)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0x109)])) {
            const _0x4da0b8 = {};
            _0x4da0b8['id'] = _0x2de47d[_0x1eb747(0xca) + 'd'], _0x4da0b8[_0x1eb747(0xda)] = _0x2de47d[_0x1eb747(0xc3)] || _0x2de47d[_0x1eb747(0xbb)] || '';
            const _0x52f842 = {};
            _0x52f842[_0x1eb747(0xe4)] = _0xcb4a9f[_0x1eb747(0x109)], _0x52f842[_0x1eb747(0x10f)] = _0x4da0b8, _0x15b3e9 = Object[_0x1eb747(0x104)](Object[_0x1eb747(0x104)]({}, _0x15b3e9), _0x52f842);
        }
        if (_0xcb4a9f[_0x1eb747(0x10e)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xf3)]) || _0xcb4a9f[_0x1eb747(0xfb)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xfd)])) {
            const _0x65a80b = {};
            _0x65a80b['id'] = _0x2de47d[_0x1eb747(0xca) + 'd'], _0x65a80b[_0x1eb747(0xda)] = _0x2de47d[_0x1eb747(0xc3)] || _0x2de47d[_0x1eb747(0xbb)] || '';
            const _0x494326 = {};
            _0x494326[_0x1eb747(0xe4)] = _0xcb4a9f[_0x1eb747(0xf3)], _0x494326[_0x1eb747(0xb0)] = _0x65a80b, _0x15b3e9 = Object[_0x1eb747(0x104)](Object[_0x1eb747(0x104)]({}, _0x15b3e9), _0x494326);
        }
        if (_0xcb4a9f[_0x1eb747(0xb1)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xef)]) || _0xcb4a9f[_0x1eb747(0x121)](_0x2de47d[_0x1eb747(0xd9)], _0xcb4a9f[_0x1eb747(0xf7)])) {
            const _0x5968d4 = {};
            _0x5968d4[_0x1eb747(0xc3)] = _0x2de47d[_0x1eb747(0xc3)];
            const _0x276752 = {};
            _0x276752[_0x1eb747(0xc2)] = _0x5968d4, _0x15b3e9 = Object[_0x1eb747(0x104)](Object[_0x1eb747(0x104)]({}, _0x15b3e9), _0x276752);
        }
        return _0x15b3e9;
    }), _0x14b8a9 = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': _0x14b8a9,
        'status': _0x4cc2fc(0xc8),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][_0x4cc2fc(0xe1)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = _0x41bf20 => __awaiter(void (-0x1 * 0x191b + -0xcf * -0x1f + 0x2 * 0x5), void (0xc41 * 0x2 + -0xda6 * 0x1 + -0xadc), void (-0x2149 + -0x744 * 0x1 + 0x288d), function* () {
        const _0x57ee28 = _0x4cc2fc, _0x33ec79 = {
                'TOzHJ': _0x57ee28(0xd6),
                'qYHVH': _0x57ee28(0xcb),
                'ITtpr': _0x57ee28(0xc5),
                'BwqCk': _0x57ee28(0xdb),
                'eiolj': _0x57ee28(0x101),
                'PyJdR': _0x57ee28(0xcd),
                'NCYfB': _0x57ee28(0xde),
                'dobOa': _0x57ee28(0xf5),
                'ybYIg': function (_0x1e79b4, _0x44d843) {
                    return _0x1e79b4(_0x44d843);
                },
                'JfoCH': _0x57ee28(0xc2),
                'XmkkA': _0x57ee28(0xc0),
                'evuCP': function (_0x12c7ea, _0xff78ad, _0x1c145f) {
                    return _0x12c7ea(_0xff78ad, _0x1c145f);
                },
                'rUWHp': _0x57ee28(0xb6),
                'TGJJV': _0x57ee28(0xeb)
            }, _0x573165 = yield Message_1[_0x57ee28(0xbf)][_0x57ee28(0x119)]({
                'where': where,
                'include': [
                    _0x33ec79[_0x57ee28(0xd5)],
                    {
                        'model': Ticket_1[_0x57ee28(0xbf)],
                        'as': _0x33ec79[_0x57ee28(0x10b)],
                        'where': {
                            'tenantId': _0x41bf20[_0x57ee28(0xe2)],
                            'channel': _0x33ec79[_0x57ee28(0x11c)]
                        },
                        'include': [
                            _0x33ec79[_0x57ee28(0xd5)],
                            {
                                'model': Whatsapp_1[_0x57ee28(0xbf)],
                                'as': _0x33ec79[_0x57ee28(0x113)],
                                'where': {
                                    'id': _0x41bf20['id'],
                                    'type': _0x33ec79[_0x57ee28(0x11c)],
                                    'wabaBSP': _0x33ec79[_0x57ee28(0xea)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[_0x57ee28(0xbf)],
                        'as': _0x33ec79[_0x57ee28(0xfc)],
                        'include': [_0x33ec79[_0x57ee28(0xd5)]]
                    }
                ],
                'order': [[
                        _0x33ec79[_0x57ee28(0xdf)],
                        _0x33ec79[_0x57ee28(0x112)]
                    ]]
            });
        for (const _0x143332 of _0x573165) {
            const {ticket: _0x3a8b84} = _0x143332, _0x267906 = _0x33ec79[_0x57ee28(0x106)](String, _0x3a8b84[_0x57ee28(0xd6)][_0x57ee28(0xf6)]);
            if (![
                    _0x33ec79[_0x57ee28(0x117)],
                    _0x33ec79[_0x57ee28(0x118)]
                ][_0x57ee28(0xb8)](_0x143332[_0x57ee28(0xd9)]) && _0x143332[_0x57ee28(0x11e)] && !_0x143332[_0x57ee28(0xca) + 'd']) {
            }
            const _0x36b6c4 = yield _0x33ec79[_0x57ee28(0x115)](buildWabaMessage360, _0x143332, _0x267906), _0xa57faa = {};
            _0xa57faa[_0x57ee28(0x11a)] = _0x36b6c4, _0xa57faa[_0x57ee28(0xdd)] = _0x41bf20[_0x57ee28(0xc6)];
            const _0x707993 = yield (-0x1ec9 + 0x1 * 0x240e + -0x1 * 0x545, SentMessage_1[_0x57ee28(0xbf)])(_0xa57faa), _0x5726a4 = {};
            _0x5726a4[_0x57ee28(0xb4)] = _0x707993[_0x57ee28(0xf4)][0x10e4 + -0x163e + 0x55a]['id'], _0x5726a4[_0x57ee28(0xb2)] = _0x33ec79[_0x57ee28(0xc4)], _0x5726a4[_0x57ee28(0x122)] = 0x2;
            const _0x2a8d3f = Object[_0x57ee28(0x104)](Object[_0x57ee28(0x104)]({}, _0x143332), _0x5726a4), _0x34ba5d = {};
            _0x34ba5d['id'] = _0x143332['id'];
            const _0x388c23 = {};
            _0x388c23[_0x57ee28(0xb3)] = _0x34ba5d, yield Message_1[_0x57ee28(0xbf)][_0x57ee28(0xf9)](Object[_0x57ee28(0x104)]({}, _0x2a8d3f), _0x388c23), (-0xa * 0x26 + -0xf09 * -0x1 + -0xd8d, socketEmit_1[_0x57ee28(0xbf)])({
                'tenantId': _0x3a8b84[_0x57ee28(0xe2)],
                'type': _0x33ec79[_0x57ee28(0xe9)],
                'payload': Object[_0x57ee28(0x104)](Object[_0x57ee28(0x104)]({}, _0x2a8d3f[_0x57ee28(0xe5)]), {
                    'mediaUrl': _0x143332[_0x57ee28(0x11e)],
                    'messageId': _0x2a8d3f[_0x57ee28(0xb4)],
                    'status': _0x33ec79[_0x57ee28(0xc4)],
                    'ack': 0x2
                })
            }), yield (0x120d * -0x1 + -0xe14 + 0x2021, SetTicketMessagesAsRead_1[_0x57ee28(0xbf)])(_0x3a8b84);
        }
    });
function _0x1c96(_0x483be0, _0x27539f) {
    const _0x370296 = _0x32ba();
    return _0x1c96 = function (_0x4e9ed0, _0x3ab9a6) {
        _0x4e9ed0 = _0x4e9ed0 - (-0x59 * 0x6b + 0x785 + 0x1 * 0x1e5b);
        let _0x1c3a8b = _0x370296[_0x4e9ed0];
        return _0x1c3a8b;
    }, _0x1c96(_0x483be0, _0x27539f);
}
exports[_0x4cc2fc(0xbf)] = Waba360SendMessagesSystem;