'use strict';
const _0x27e809 = _0x1216;
(function (_0xcde8a7, _0xe9baef) {
    const _0x12bac7 = _0x1216, _0x543ea7 = _0xcde8a7();
    while (!![]) {
        try {
            const _0x4afaa7 = -parseInt(_0x12bac7(0x139)) / (0x126a + -0x1266 + -0x1 * 0x3) + -parseInt(_0x12bac7(0x129)) / (-0xcbd + -0x1d57 + -0x1 * -0x2a16) + parseInt(_0x12bac7(0x17e)) / (0x18de + -0x5ed + -0x12ee) + parseInt(_0x12bac7(0x163)) / (-0x534 * 0x3 + 0x327 + 0xc79) * (parseInt(_0x12bac7(0x159)) / (-0x2 * -0xd19 + 0x80e + -0x223b)) + parseInt(_0x12bac7(0x173)) / (-0x433 + -0x595 * -0x3 + 0xc86 * -0x1) + parseInt(_0x12bac7(0x133)) / (0x217e + -0xc1 * 0x7 + 0x4 * -0x70c) + -parseInt(_0x12bac7(0x15d)) / (-0x1a0c + 0xb * 0x287 + -0x1b9) * (parseInt(_0x12bac7(0x10d)) / (-0x26de + -0xd9 * 0x17 + 0x3a66));
            if (_0x4afaa7 === _0xe9baef)
                break;
            else
                _0x543ea7['push'](_0x543ea7['shift']());
        } catch (_0x4eac09) {
            _0x543ea7['push'](_0x543ea7['shift']());
        }
    }
}(_0x3ab2, 0x55e6b + -0xac * -0x654 + -0x4bd82));
var __awaiter = this && this[_0x27e809(0x110)] || function (_0xa55bc8, _0x1700fa, _0x14fd1d, _0x297356) {
        const _0x432a3e = _0x27e809, _0x5887d5 = {
                'sWWtv': function (_0x14c787, _0x28d786) {
                    return _0x14c787(_0x28d786);
                },
                'AKrcJ': function (_0x521fee, _0x5fae4b) {
                    return _0x521fee instanceof _0x5fae4b;
                },
                'OnArJ': function (_0x310e1f, _0x132406) {
                    return _0x310e1f(_0x132406);
                },
                'bSPWM': _0x432a3e(0x114),
                'VcjeA': function (_0x4e06f0, _0x55412d) {
                    return _0x4e06f0(_0x55412d);
                },
                'Wzfuh': function (_0x3d1b9c, _0x1dcb0d) {
                    return _0x3d1b9c(_0x1dcb0d);
                }
            };
        function _0x4d89d9(_0x516ef8) {
            const _0x4cf094 = _0x432a3e, _0x2db8ec = {
                    'aWMVq': function (_0x53aa3f, _0x4da5ac) {
                        const _0x31267b = _0x1216;
                        return _0x5887d5[_0x31267b(0x19b)](_0x53aa3f, _0x4da5ac);
                    }
                };
            return _0x5887d5[_0x4cf094(0x1a3)](_0x516ef8, _0x14fd1d) ? _0x516ef8 : new _0x14fd1d(function (_0x37d402) {
                const _0x566394 = _0x4cf094;
                _0x2db8ec[_0x566394(0xfe)](_0x37d402, _0x516ef8);
            });
        }
        return new (_0x14fd1d || (_0x14fd1d = Promise))(function (_0x3d5065, _0x10ff5b) {
            const _0x2dd5f8 = _0x432a3e;
            function _0x1ad6d2(_0x1146b1) {
                const _0x510860 = _0x1216;
                try {
                    _0x5887d5[_0x510860(0x19b)](_0xa4b83c, _0x297356[_0x510860(0x11f)](_0x1146b1));
                } catch (_0x42c207) {
                    _0x5887d5[_0x510860(0x118)](_0x10ff5b, _0x42c207);
                }
            }
            function _0x42a6b2(_0x25d10c) {
                const _0x4f896e = _0x1216;
                try {
                    _0x5887d5[_0x4f896e(0x19b)](_0xa4b83c, _0x297356[_0x5887d5[_0x4f896e(0x164)]](_0x25d10c));
                } catch (_0x2186b7) {
                    _0x5887d5[_0x4f896e(0x106)](_0x10ff5b, _0x2186b7);
                }
            }
            function _0xa4b83c(_0x2f69d4) {
                const _0x595568 = _0x1216;
                _0x2f69d4[_0x595568(0x102)] ? _0x5887d5[_0x595568(0x106)](_0x3d5065, _0x2f69d4[_0x595568(0x184)]) : _0x5887d5[_0x595568(0x19b)](_0x4d89d9, _0x2f69d4[_0x595568(0x184)])[_0x595568(0x15b)](_0x1ad6d2, _0x42a6b2);
            }
            _0x5887d5[_0x2dd5f8(0x168)](_0xa4b83c, (_0x297356 = _0x297356[_0x2dd5f8(0x13e)](_0xa55bc8, _0x1700fa || []))[_0x2dd5f8(0x11f)]());
        });
    }, __importDefault = this && this[_0x27e809(0xff) + _0x27e809(0x12e)] || function (_0x5574ba) {
        const _0x3f9559 = _0x27e809;
        return _0x5574ba && _0x5574ba[_0x3f9559(0x13c)] ? _0x5574ba : { 'default': _0x5574ba };
    };
const _0x3c2573 = {};
_0x3c2573[_0x27e809(0x184)] = !![], Object[_0x27e809(0x152) + _0x27e809(0x194)](exports, _0x27e809(0x13c), _0x3c2573);
function _0x1216(_0x2eb397, _0x5955c3) {
    const _0x2c8959 = _0x3ab2();
    return _0x1216 = function (_0xb57737, _0x2c43d3) {
        _0xb57737 = _0xb57737 - (-0x9d * 0x3d + 0x2518 + 0x148 * 0x1);
        let _0x19f8ae = _0x2c8959[_0xb57737];
        return _0x19f8ae;
    }, _0x1216(_0x2eb397, _0x5955c3);
}
function _0x3ab2() {
    const _0x2f4c80 = [
        'tKAJf',
        'tomnX',
        'aWMVq',
        '__importDe',
        'Emit',
        './CreateLo',
        'done',
        'AllTickets',
        'includes',
        'jtuOc',
        'VcjeA',
        'ketTypebot',
        'admin',
        'telegram',
        'DtFup',
        'profile',
        'sService',
        '117Qfsgnr',
        'instagram',
        'Value',
        '__awaiter',
        'bmToken',
        'order',
        'ls/Tenant',
        'throw',
        'key',
        'kcJTl',
        'owpTL',
        'OnArJ',
        'rcAoB',
        'channel',
        'OayTw',
        'etsToWalle',
        'findOne',
        'contactId',
        'next',
        'isCampaign',
        'typebotAll',
        'emuUF',
        'sjbPt',
        'body',
        'Tickets',
        'DESC',
        'whatsapp',
        'hGaFE',
        '85010xyMaCw',
        'where',
        'VYhSa',
        'vice',
        'enabled',
        'fault',
        'sKUHx',
        'gbprJ',
        'ls/User',
        'ticketId',
        '3083647sgjGSL',
        'ages',
        'name',
        'etService',
        'ers/Update',
        'updatedAt',
        '45067RHfocg',
        'getTime',
        'ls/Campaig',
        '__esModule',
        'DirectTick',
        'apply',
        'logFlowSta',
        'ytyUd',
        'hatBotFlow',
        'FnaNF',
        'endanceAt',
        'message_id',
        'getWallets',
        'tenantId',
        'ls/Message',
        'UmqZC',
        'Welcome',
        'waba',
        'default',
        'pending',
        'ls/Contact',
        './ShowTick',
        'forceAdmin',
        'yDSir',
        'dialogflow',
        'defineProp',
        '../../mode',
        'closed',
        'EgAZE',
        'chatFlowId',
        'user',
        'pdQZb',
        '2889685fxirUD',
        'create',
        'then',
        '../Setting',
        '605792BdprnX',
        'ls/Ticket',
        'ls/Setting',
        'QFpHJ',
        'tus',
        'nContacts',
        '4YTguwx',
        'bSPWM',
        'CJlkj',
        'MOBJu',
        'Mxeov',
        'Wzfuh',
        'hnlCd',
        'fromMe',
        'payload',
        'dwHuL',
        'THvBm',
        'model',
        'find',
        'update',
        'FpAft',
        'isFarewell',
        '1437900AVJJzK',
        'ticket',
        'VHLaI',
        'status',
        'tags',
        'item_id',
        'Rwmkt',
        'sequelize',
        'uhmLY',
        'open',
        'chatgptAll',
        '401127MHRWGI',
        'startedAtt',
        'setDataVal',
        'ers/CheckC',
        'xlLMF',
        'istSetting',
        'value',
        'Services/L',
        'contact',
        'messenger',
        'xUoJv',
        'wallets',
        'Message',
        'ticket:upd',
        'newDefault',
        'NOBec',
        'wDqUS',
        'isGroup',
        'type',
        'CegTX',
        'HoATk',
        'gTicketSer',
        'erty',
        'ketChatGpt',
        'include',
        'vcOnB',
        'yoZbv',
        'DefaultDia',
        'userId',
        'sWWtv',
        'tokenAPI',
        '../../help',
        'DefaultTic',
        'ers/socket',
        'nplIl',
        'Status',
        'unreadMess',
        'AKrcJ',
        'associatio',
        'ihQHe',
        'whatsappId',
        'isCreated',
        'lastMessag',
        'ate',
        'attributes',
        'UTCPn',
        'extraInfo',
        'TwZJF',
        'ulrdz',
        'dOpWF'
    ];
    _0x3ab2 = function () {
        return _0x2f4c80;
    };
    return _0x3ab2();
}
const sequelize_1 = require(_0x27e809(0x17a)), Contact_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x14d))), Ticket_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x15e))), User_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x131))), ShowTicketService_1 = __importDefault(require(_0x27e809(0x14e) + _0x27e809(0x136))), CampaignContacts_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x13b) + _0x27e809(0x162))), socketEmit_1 = __importDefault(require(_0x27e809(0x19d) + _0x27e809(0x19f) + _0x27e809(0x100))), CheckChatBotFlowWelcome_1 = __importDefault(require(_0x27e809(0x19d) + _0x27e809(0x181) + _0x27e809(0x141) + _0x27e809(0x149))), CreateLogTicketService_1 = __importDefault(require(_0x27e809(0x101) + _0x27e809(0x193) + _0x27e809(0x12c))), Message_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x147))), ListSettingsService_1 = __importDefault(require(_0x27e809(0x15c) + _0x27e809(0x185) + _0x27e809(0x183) + _0x27e809(0x10c))), Setting_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x15f))), UpdateDefaultTicketChatGptStatus_1 = __importDefault(require(_0x27e809(0x19d) + _0x27e809(0x137) + _0x27e809(0x19e) + _0x27e809(0x195) + _0x27e809(0x1a1))), UpdateDefaultTicketTypebotStatus_1 = __importDefault(require(_0x27e809(0x19d) + _0x27e809(0x137) + _0x27e809(0x19e) + _0x27e809(0x107) + _0x27e809(0x1a1))), UpdateDefaultDialogFlowStatus_1 = __importDefault(require(_0x27e809(0x19d) + _0x27e809(0x137) + _0x27e809(0x199) + _0x27e809(0x13f) + _0x27e809(0x161))), Tenant_1 = __importDefault(require(_0x27e809(0x153) + _0x27e809(0x113))), FindOrCreateTicketService = ({
        contact: _0xd0192d,
        whatsappId: _0x3788cb,
        unreadMessages: _0x402ff3,
        tenantId: _0x3d362e,
        groupContact: _0x11d23b,
        msg: _0x27fbf2,
        isSync: _0x4067d1,
        channel: _0x15dbaf
    }) => __awaiter(void (0x19 * 0xe9 + 0x2 * 0xead + 0x1 * -0x341b), void (0x12b3 + 0x157 + 0xf * -0x156), void (-0x6df * -0x1 + 0x10 * -0x8e + 0x201), function* () {
        const _0x42bbfa = _0x27e809, _0x3d23a4 = {};
        _0x3d23a4[_0x42bbfa(0x182)] = function (_0x4fbe43, _0x158241) {
            return _0x4fbe43 === _0x158241;
        }, _0x3d23a4[_0x42bbfa(0x12b)] = function (_0x28e2d1, _0x10577f) {
            return _0x28e2d1 === _0x10577f;
        }, _0x3d23a4[_0x42bbfa(0x175)] = function (_0x32e820, _0x51d706) {
            return _0x32e820 === _0x51d706;
        }, _0x3d23a4[_0x42bbfa(0x1a5)] = _0x42bbfa(0x174), _0x3d23a4[_0x42bbfa(0x130)] = function (_0x5f2a30, _0xbe0fc8) {
            return _0x5f2a30 === _0xbe0fc8;
        }, _0x3d23a4[_0x42bbfa(0x10a)] = function (_0x2d4a39, _0x5d9669) {
            return _0x2d4a39 === _0x5d9669;
        }, _0x3d23a4[_0x42bbfa(0x169)] = _0x42bbfa(0x154), _0x3d23a4[_0x42bbfa(0x117)] = function (_0x148c8e, _0xab86de) {
            return _0x148c8e === _0xab86de;
        }, _0x3d23a4[_0x42bbfa(0x11b)] = _0x42bbfa(0x17c), _0x3d23a4[_0x42bbfa(0x150)] = _0x42bbfa(0x14c), _0x3d23a4[_0x42bbfa(0xfd)] = _0x42bbfa(0x186), _0x3d23a4[_0x42bbfa(0x171)] = _0x42bbfa(0xf8), _0x3d23a4[_0x42bbfa(0x179)] = _0x42bbfa(0x177), _0x3d23a4[_0x42bbfa(0x192)] = _0x42bbfa(0x189), _0x3d23a4[_0x42bbfa(0x140)] = _0x42bbfa(0x135), _0x3d23a4[_0x42bbfa(0x197)] = _0x42bbfa(0x157), _0x3d23a4[_0x42bbfa(0x160)] = _0x42bbfa(0x127), _0x3d23a4[_0x42bbfa(0x142)] = _0x42bbfa(0x19c), _0x3d23a4[_0x42bbfa(0xfb)] = _0x42bbfa(0x156), _0x3d23a4[_0x42bbfa(0x155)] = _0x42bbfa(0x176), _0x3d23a4[_0x42bbfa(0x116)] = _0x42bbfa(0x111), _0x3d23a4[_0x42bbfa(0x188)] = _0x42bbfa(0x109), _0x3d23a4[_0x42bbfa(0x191)] = _0x42bbfa(0x14a), _0x3d23a4[_0x42bbfa(0xf9)] = _0x42bbfa(0x10e), _0x3d23a4[_0x42bbfa(0xfa)] = _0x42bbfa(0x187), _0x3d23a4[_0x42bbfa(0x158)] = function (_0x4be0ea, _0x2291f0) {
            return _0x4be0ea > _0x2291f0;
        }, _0x3d23a4[_0x42bbfa(0x18e)] = _0x42bbfa(0x18b) + _0x42bbfa(0x1a9), _0x3d23a4[_0x42bbfa(0x148)] = _0x42bbfa(0x138), _0x3d23a4[_0x42bbfa(0x18d)] = _0x42bbfa(0x126), _0x3d23a4[_0x42bbfa(0x122)] = function (_0x16db2b, _0x1dce53) {
            return _0x16db2b === _0x1dce53;
        }, _0x3d23a4[_0x42bbfa(0xfc)] = function (_0x293d99, _0x1a6aa2) {
            return _0x293d99 === _0x1a6aa2;
        }, _0x3d23a4[_0x42bbfa(0x16c)] = function (_0x328d59, _0x3dbeb9) {
            return _0x328d59 === _0x3dbeb9;
        }, _0x3d23a4[_0x42bbfa(0x166)] = _0x42bbfa(0x12d), _0x3d23a4[_0x42bbfa(0x167)] = function (_0x1c4262, _0xe7292b) {
            return _0x1c4262 === _0xe7292b;
        }, _0x3d23a4[_0x42bbfa(0x12f)] = _0x42bbfa(0x15a), _0x3d23a4[_0x42bbfa(0x1a0)] = _0x42bbfa(0x17d) + _0x42bbfa(0x125), _0x3d23a4[_0x42bbfa(0xf7)] = _0x42bbfa(0x121) + _0x42bbfa(0x125), _0x3d23a4[_0x42bbfa(0x165)] = _0x42bbfa(0x151) + _0x42bbfa(0x103), _0x3d23a4[_0x42bbfa(0x105)] = function (_0x10a493, _0xcc09eb) {
            return _0x10a493 === _0xcc09eb;
        }, _0x3d23a4[_0x42bbfa(0x128)] = _0x42bbfa(0x1a7), _0x3d23a4[_0x42bbfa(0x123)] = function (_0x951226, _0x5285d2) {
            return _0x951226 === _0x5285d2;
        }, _0x3d23a4[_0x42bbfa(0x198)] = function (_0x381d72, _0x40d29a) {
            return _0x381d72 === _0x40d29a;
        }, _0x3d23a4[_0x42bbfa(0x17b)] = _0x42bbfa(0x108), _0x3d23a4[_0x42bbfa(0x16d)] = function (_0x58890a, _0x14a7b4) {
            return _0x58890a === _0x14a7b4;
        }, _0x3d23a4[_0x42bbfa(0x119)] = function (_0x564edd, _0x571e94) {
            return _0x564edd === _0x571e94;
        };
        const _0x55afa0 = _0x3d23a4;
        var _0x247b2d, _0xab7e53, _0x2fa5c7, _0x9ddb78, _0x9b5118, _0x38980c;
        if (_0x27fbf2 && _0x27fbf2[_0x42bbfa(0x16a)]) {
            const _0x175617 = yield CampaignContacts_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)]({
                'where': {
                    'contactId': _0xd0192d['id'],
                    'messageId': (_0x55afa0[_0x42bbfa(0x182)](_0x247b2d = _0x27fbf2['id'], null) || _0x55afa0[_0x42bbfa(0x12b)](_0x247b2d, void (0xb * -0xb1 + 0x2 * -0x10e7 + -0x2969 * -0x1)) ? void (-0x3 * 0x57 + 0x1 * 0x7e7 + -0x6e2) : _0x247b2d['id']) || _0x27fbf2[_0x42bbfa(0x144)] || _0x27fbf2[_0x42bbfa(0x178)]
                }
            });
            if (_0x55afa0[_0x42bbfa(0x175)](_0x175617, null) || _0x55afa0[_0x42bbfa(0x12b)](_0x175617, void (0x12d8 + 0x3 * -0x5a7 + 0x45 * -0x7)) ? void (0x8d8 * -0x1 + -0x2ab + 0xb83) : _0x175617['id']) {
                const _0x39a4f9 = {};
                return _0x39a4f9[_0x42bbfa(0x120) + _0x42bbfa(0x18a)] = !![], _0x39a4f9;
            }
        }
        if (_0x27fbf2 && _0x27fbf2[_0x42bbfa(0x16a)]) {
            const _0x1069c9 = yield Message_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)]({
                'where': { 'messageId': (_0x55afa0[_0x42bbfa(0x182)](_0xab7e53 = _0x27fbf2['id'], null) || _0x55afa0[_0x42bbfa(0x175)](_0xab7e53, void (-0x1667 + 0xb38 * 0x1 + 0xb2f)) ? void (0xe * -0x23c + -0x229b * -0x1 + 0x1 * -0x353) : _0xab7e53['id']) || _0x27fbf2[_0x42bbfa(0x144)] || _0x27fbf2[_0x42bbfa(0x178)] },
                'include': [_0x55afa0[_0x42bbfa(0x1a5)]]
            });
            if (_0x55afa0[_0x42bbfa(0x130)](_0x55afa0[_0x42bbfa(0x175)](_0x2fa5c7 = _0x55afa0[_0x42bbfa(0x10a)](_0x1069c9, null) || _0x55afa0[_0x42bbfa(0x182)](_0x1069c9, void (0x248b + -0x75 * -0x12 + -0x2cc5)) ? void (0xe95 * 0x1 + 0x19 * -0x16a + 0x14c5) : _0x1069c9[_0x42bbfa(0x174)], null) || _0x55afa0[_0x42bbfa(0x12b)](_0x2fa5c7, void (-0x1224 + -0xff9 + 0x221d)) ? void (-0x321 * -0x2 + 0x2b8 + -0x8fa) : _0x2fa5c7[_0x42bbfa(0x176)], _0x55afa0[_0x42bbfa(0x169)]) && _0x55afa0[_0x42bbfa(0x175)](_0x55afa0[_0x42bbfa(0x117)](_0x1069c9, null) || _0x55afa0[_0x42bbfa(0x130)](_0x1069c9, void (-0x1471 + -0x1eaa + -0x15 * -0x26f)) ? void (-0x2 * 0x3c1 + -0x132b * -0x2 + -0x1ed4) : _0x1069c9[_0x42bbfa(0x174)][_0x42bbfa(0x1a8) + 'e'], _0x27fbf2[_0x42bbfa(0x124)])) {
                const _0x5242b6 = _0x1069c9[_0x42bbfa(0x174)];
                return _0x5242b6[_0x42bbfa(0x172) + _0x42bbfa(0x18a)] = !![], _0x5242b6;
            }
        }
        const _0x471c19 = {
                [sequelize_1['Op']['or']]: [
                    _0x55afa0[_0x42bbfa(0x11b)],
                    _0x55afa0[_0x42bbfa(0x150)]
                ]
            }, _0x195dd5 = {};
        _0x195dd5[_0x42bbfa(0x176)] = _0x471c19, _0x195dd5[_0x42bbfa(0x146)] = _0x3d362e, _0x195dd5[_0x42bbfa(0x1a6)] = _0x3788cb, _0x195dd5[_0x42bbfa(0x11e)] = _0x11d23b ? _0x11d23b['id'] : _0xd0192d['id'];
        const _0x48f8d7 = {};
        _0x48f8d7[_0x42bbfa(0x16e)] = Contact_1[_0x42bbfa(0x14b)], _0x48f8d7['as'] = _0x55afa0[_0x42bbfa(0xfd)], _0x48f8d7[_0x42bbfa(0x196)] = [
            _0x55afa0[_0x42bbfa(0x171)],
            _0x55afa0[_0x42bbfa(0x179)],
            {
                'association': _0x55afa0[_0x42bbfa(0x192)],
                'attributes': [
                    'id',
                    _0x55afa0[_0x42bbfa(0x140)]
                ]
            }
        ];
        const _0x361de0 = {};
        _0x361de0[_0x42bbfa(0x16e)] = User_1[_0x42bbfa(0x14b)], _0x361de0['as'] = _0x55afa0[_0x42bbfa(0x197)], _0x361de0[_0x42bbfa(0x1aa)] = [
            'id',
            _0x55afa0[_0x42bbfa(0x140)]
        ];
        const _0x5a4db7 = {};
        _0x5a4db7[_0x42bbfa(0x1a4) + 'n'] = _0x55afa0[_0x42bbfa(0x160)], _0x5a4db7[_0x42bbfa(0x1aa)] = [
            'id',
            _0x55afa0[_0x42bbfa(0x140)],
            _0x55afa0[_0x42bbfa(0x142)],
            _0x55afa0[_0x42bbfa(0xfb)],
            _0x55afa0[_0x42bbfa(0x155)],
            _0x55afa0[_0x42bbfa(0x116)]
        ];
        const _0x20df88 = {};
        _0x20df88[_0x42bbfa(0x12a)] = _0x195dd5, _0x20df88[_0x42bbfa(0x196)] = [
            _0x48f8d7,
            _0x361de0,
            _0x5a4db7
        ];
        let _0x904fe = yield Ticket_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x20df88);
        if (_0x904fe) {
            _0x402ff3 = [
                _0x55afa0[_0x42bbfa(0x188)],
                _0x55afa0[_0x42bbfa(0x191)],
                _0x55afa0[_0x42bbfa(0xf9)],
                _0x55afa0[_0x42bbfa(0xfa)]
            ][_0x42bbfa(0x104)](_0x15dbaf) && _0x55afa0[_0x42bbfa(0x158)](_0x402ff3, -0x1ab1 + 0xcf2 + 0xdbf * 0x1) ? _0x402ff3 += _0x904fe[_0x42bbfa(0x1a2) + _0x42bbfa(0x134)] : _0x402ff3;
            const _0x5175b6 = {};
            _0x5175b6[_0x42bbfa(0x1a2) + _0x42bbfa(0x134)] = _0x402ff3, yield _0x904fe[_0x42bbfa(0x170)](_0x5175b6);
            const _0x2ec4de = {};
            return _0x2ec4de[_0x42bbfa(0x146)] = _0x3d362e, _0x2ec4de[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x2ec4de[_0x42bbfa(0x16b)] = _0x904fe, (-0xa * -0xda + -0xbd3 + 0x34f, socketEmit_1[_0x42bbfa(0x14b)])(_0x2ec4de), _0x904fe;
        }
        if (_0x11d23b) {
            const _0x3968da = {};
            _0x3968da[_0x42bbfa(0x11e)] = _0x11d23b['id'], _0x3968da[_0x42bbfa(0x146)] = _0x3d362e, _0x3968da[_0x42bbfa(0x1a6)] = _0x3788cb;
            const _0x49ce69 = {};
            _0x49ce69[_0x42bbfa(0x12a)] = _0x3968da, _0x49ce69[_0x42bbfa(0x112)] = [[
                    _0x55afa0[_0x42bbfa(0x148)],
                    _0x55afa0[_0x42bbfa(0x18d)]
                ]], _0x49ce69[_0x42bbfa(0x196)] = [
                {
                    'model': Contact_1[_0x42bbfa(0x14b)],
                    'as': _0x55afa0[_0x42bbfa(0xfd)],
                    'include': [
                        _0x55afa0[_0x42bbfa(0x171)],
                        _0x55afa0[_0x42bbfa(0x179)],
                        {
                            'association': _0x55afa0[_0x42bbfa(0x192)],
                            'attributes': [
                                'id',
                                _0x55afa0[_0x42bbfa(0x140)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[_0x42bbfa(0x14b)],
                    'as': _0x55afa0[_0x42bbfa(0x197)],
                    'attributes': [
                        'id',
                        _0x55afa0[_0x42bbfa(0x140)]
                    ]
                },
                {
                    'association': _0x55afa0[_0x42bbfa(0x160)],
                    'attributes': [
                        'id',
                        _0x55afa0[_0x42bbfa(0x140)],
                        _0x55afa0[_0x42bbfa(0x142)],
                        _0x55afa0[_0x42bbfa(0xfb)],
                        _0x55afa0[_0x42bbfa(0x155)],
                        _0x55afa0[_0x42bbfa(0x116)]
                    ]
                }
            ], _0x904fe = yield Ticket_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x49ce69);
            if (_0x904fe) {
                const _0x19dd05 = {};
                _0x19dd05[_0x42bbfa(0x176)] = _0x55afa0[_0x42bbfa(0x150)], _0x19dd05[_0x42bbfa(0x19a)] = null, _0x19dd05[_0x42bbfa(0x1a2) + _0x42bbfa(0x134)] = _0x402ff3, yield _0x904fe[_0x42bbfa(0x170)](_0x19dd05);
                const _0x273263 = {};
                return _0x273263[_0x42bbfa(0x146)] = _0x3d362e, _0x273263[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x273263[_0x42bbfa(0x16b)] = _0x904fe, (-0x1de3 + -0x1af9 * 0x1 + -0x12f4 * -0x3, socketEmit_1[_0x42bbfa(0x14b)])(_0x273263), _0x904fe;
            }
        } else {
            const _0x391dc3 = {
                    [sequelize_1['Op']['in']]: [
                        _0x55afa0[_0x42bbfa(0x11b)],
                        _0x55afa0[_0x42bbfa(0x150)]
                    ]
                }, _0x413e93 = {};
            _0x413e93[_0x42bbfa(0x176)] = _0x391dc3, _0x413e93[_0x42bbfa(0x146)] = _0x3d362e, _0x413e93[_0x42bbfa(0x1a6)] = _0x3788cb, _0x413e93[_0x42bbfa(0x11e)] = _0xd0192d['id'];
            const _0x47f84e = {};
            _0x47f84e[_0x42bbfa(0x12a)] = _0x413e93, _0x47f84e[_0x42bbfa(0x112)] = [[
                    _0x55afa0[_0x42bbfa(0x148)],
                    _0x55afa0[_0x42bbfa(0x18d)]
                ]], _0x47f84e[_0x42bbfa(0x196)] = [
                {
                    'model': Contact_1[_0x42bbfa(0x14b)],
                    'as': _0x55afa0[_0x42bbfa(0xfd)],
                    'include': [
                        _0x55afa0[_0x42bbfa(0x171)],
                        _0x55afa0[_0x42bbfa(0x179)],
                        {
                            'association': _0x55afa0[_0x42bbfa(0x192)],
                            'attributes': [
                                'id',
                                _0x55afa0[_0x42bbfa(0x140)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[_0x42bbfa(0x14b)],
                    'as': _0x55afa0[_0x42bbfa(0x197)],
                    'attributes': [
                        'id',
                        _0x55afa0[_0x42bbfa(0x140)]
                    ]
                },
                {
                    'association': _0x55afa0[_0x42bbfa(0x160)],
                    'attributes': [
                        'id',
                        _0x55afa0[_0x42bbfa(0x140)],
                        _0x55afa0[_0x42bbfa(0x142)],
                        _0x55afa0[_0x42bbfa(0xfb)],
                        _0x55afa0[_0x42bbfa(0x155)],
                        _0x55afa0[_0x42bbfa(0x116)]
                    ]
                }
            ], _0x904fe = yield Ticket_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x47f84e);
            if (_0x904fe) {
                const _0x47f0a8 = {};
                _0x47f0a8[_0x42bbfa(0x176)] = _0x55afa0[_0x42bbfa(0x150)], _0x47f0a8[_0x42bbfa(0x19a)] = null, _0x47f0a8[_0x42bbfa(0x1a2) + _0x42bbfa(0x134)] = _0x402ff3, yield _0x904fe[_0x42bbfa(0x170)](_0x47f0a8);
                const _0x46fdce = {};
                _0x46fdce[_0x42bbfa(0x146)] = _0x3d362e, _0x46fdce[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x46fdce[_0x42bbfa(0x16b)] = _0x904fe, (-0x206 + -0x196 * 0x11 + 0x1cfc, socketEmit_1[_0x42bbfa(0x14b)])(_0x46fdce);
                const _0x42c4be = {};
                _0x42c4be['id'] = _0x904fe['id'], _0x42c4be[_0x42bbfa(0x146)] = _0x3d362e;
                const _0x433228 = yield (0x2263 * 0x1 + -0x266 * -0x10 + -0x3 * 0x1841, ShowTicketService_1[_0x42bbfa(0x14b)])(_0x42c4be), _0x109483 = {};
                return _0x109483[_0x42bbfa(0x146)] = _0x3d362e, _0x109483[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x109483[_0x42bbfa(0x16b)] = _0x433228, (-0x5c7 + -0x1 * -0x1779 + 0xf * -0x12e, socketEmit_1[_0x42bbfa(0x14b)])(_0x109483), _0x904fe;
            }
        }
        const _0x8ef94d = _0x55afa0[_0x42bbfa(0x182)](_0x55afa0[_0x42bbfa(0x175)](_0x9b5118 = _0x55afa0[_0x42bbfa(0x122)](_0x9ddb78 = yield (0x26e5 + -0x1f33 + 0x7b2 * -0x1, ListSettingsService_1[_0x42bbfa(0x14b)])(_0x3d362e), null) || _0x55afa0[_0x42bbfa(0xfc)](_0x9ddb78, void (0x5 * 0x243 + -0xf4c + 0x3fd * 0x1)) ? void (0x7 * -0x2e3 + -0x174d + 0x2b82) : _0x9ddb78[_0x42bbfa(0x16f)](_0x5b299b => _0x5b299b[_0x42bbfa(0x115)] === _0x42bbfa(0x13d) + _0x42bbfa(0x11c) + 'ts'), null) || _0x55afa0[_0x42bbfa(0x16c)](_0x9b5118, void (-0x1e05 + 0x52 * 0x4a + -0x3 * -0x21b)) ? void (-0x1 * -0x1adf + 0x195e + -0x343d) : _0x9b5118[_0x42bbfa(0x184)], _0x55afa0[_0x42bbfa(0x166)]) || ![], _0x47442f = {};
        _0x47442f[_0x42bbfa(0x11e)] = _0x11d23b ? _0x11d23b['id'] : _0xd0192d['id'], _0x47442f[_0x42bbfa(0x176)] = _0x55afa0[_0x42bbfa(0x150)], _0x47442f[_0x42bbfa(0x18f)] = !!_0x11d23b, _0x47442f[_0x42bbfa(0x1a2) + _0x42bbfa(0x134)] = _0x402ff3, _0x47442f[_0x42bbfa(0x1a6)] = _0x3788cb, _0x47442f[_0x42bbfa(0x146)] = _0x3d362e, _0x47442f[_0x42bbfa(0x11a)] = _0x15dbaf;
        const _0x460bfa = _0x47442f;
        if (_0x8ef94d && _0xd0192d['id']) {
            const _0x3fbbad = _0xd0192d, _0x1cde66 = yield _0x3fbbad[_0x42bbfa(0x145)]();
            _0x1cde66 && (_0x55afa0[_0x42bbfa(0x167)](_0x38980c = _0x1cde66[-0x2628 + 0x1 * -0x1a76 + 0x409e], null) || _0x55afa0[_0x42bbfa(0x117)](_0x38980c, void (0x108 + -0x149 * 0x3 + 0x2d3)) ? void (0x1648 + -0x13 * 0x20b + 0x53 * 0x33) : _0x38980c['id']) && (_0x460bfa[_0x42bbfa(0x176)] = _0x55afa0[_0x42bbfa(0x11b)], _0x460bfa[_0x42bbfa(0x19a)] = _0x1cde66[0x5d5 * -0x6 + 0x13 * 0xf2 + 0x1108]['id'], _0x460bfa[_0x42bbfa(0x17f) + _0x42bbfa(0x143)] = new Date()[_0x42bbfa(0x13a)]());
        }
        const _0x48e6e9 = yield Ticket_1[_0x42bbfa(0x14b)][_0x42bbfa(0x15a)](_0x460bfa), _0x3a071d = {};
        _0x3a071d[_0x42bbfa(0x146)] = _0x48e6e9[_0x42bbfa(0x146)], _0x3a071d[_0x42bbfa(0x132)] = _0x48e6e9['id'], _0x3a071d[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x12f)], yield (-0x191b * 0x1 + -0x3a * -0x1d + 0x1289, CreateLogTicketService_1[_0x42bbfa(0x14b)])(_0x3a071d);
        const _0x23c80b = {};
        _0x23c80b[_0x42bbfa(0x115)] = _0x55afa0[_0x42bbfa(0x1a0)], _0x23c80b[_0x42bbfa(0x146)] = _0x3d362e;
        const _0x42cb74 = {};
        _0x42cb74[_0x42bbfa(0x12a)] = _0x23c80b;
        const _0x5aca04 = yield Setting_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x42cb74), _0x36c6c6 = {};
        _0x36c6c6[_0x42bbfa(0x115)] = _0x55afa0[_0x42bbfa(0xf7)], _0x36c6c6[_0x42bbfa(0x146)] = _0x3d362e;
        const _0x1b36f7 = {};
        _0x1b36f7[_0x42bbfa(0x12a)] = _0x36c6c6;
        const _0x5cfd74 = yield Setting_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x1b36f7), _0x446f09 = {};
        _0x446f09[_0x42bbfa(0x115)] = _0x55afa0[_0x42bbfa(0x165)], _0x446f09[_0x42bbfa(0x146)] = _0x3d362e;
        const _0x13c6a9 = {};
        _0x13c6a9[_0x42bbfa(0x12a)] = _0x446f09;
        const _0x23d094 = yield Setting_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x13c6a9);
        if (_0x5aca04) {
            const _0xddebfd = _0x55afa0[_0x42bbfa(0x105)](_0x5aca04[_0x42bbfa(0x184)], _0x55afa0[_0x42bbfa(0x166)]), _0x3249df = {};
            _0x3249df[_0x42bbfa(0x146)] = _0x3d362e, _0x3249df[_0x42bbfa(0x132)] = _0x48e6e9['id'], _0x3249df[_0x42bbfa(0x18c) + _0x42bbfa(0x10f)] = _0xddebfd, yield (0x2605 + 0x1 * -0x1e42 + -0x7c3, UpdateDefaultTicketChatGptStatus_1[_0x42bbfa(0x14b)])(_0x3249df);
        }
        if (_0x5cfd74) {
            const _0x40844e = _0x55afa0[_0x42bbfa(0x16c)](_0x5cfd74[_0x42bbfa(0x184)], _0x55afa0[_0x42bbfa(0x166)]), _0x40e492 = {};
            _0x40e492[_0x42bbfa(0x146)] = _0x3d362e, _0x40e492[_0x42bbfa(0x132)] = _0x48e6e9['id'], _0x40e492[_0x42bbfa(0x18c) + _0x42bbfa(0x10f)] = _0x40844e, yield (-0x1e56 + 0x10ef + -0xd67 * -0x1, UpdateDefaultTicketTypebotStatus_1[_0x42bbfa(0x14b)])(_0x40e492);
        }
        if (_0x23d094) {
            const _0x1c6f54 = _0x55afa0[_0x42bbfa(0x130)](_0x23d094[_0x42bbfa(0x184)], _0x55afa0[_0x42bbfa(0x166)]), _0x58cf48 = {};
            _0x58cf48[_0x42bbfa(0x146)] = _0x3d362e, _0x58cf48[_0x42bbfa(0x132)] = _0x48e6e9['id'], _0x58cf48[_0x42bbfa(0x18c) + _0x42bbfa(0x10f)] = _0x1c6f54, yield (0x3ef + -0x1b52 + -0x1763 * -0x1, UpdateDefaultDialogFlowStatus_1[_0x42bbfa(0x14b)])(_0x58cf48);
        }
        (_0x27fbf2 && !_0x27fbf2[_0x42bbfa(0x16a)] || !_0x48e6e9[_0x42bbfa(0x19a)] || _0x4067d1) && (yield (0x12ee + 0x717 + -0x1a05, CheckChatBotFlowWelcome_1[_0x42bbfa(0x14b)])(_0x48e6e9));
        const _0x3bcccf = {};
        _0x3bcccf['id'] = _0x48e6e9['id'], _0x3bcccf[_0x42bbfa(0x146)] = _0x3d362e, _0x904fe = yield (-0x1 * -0x1302 + -0xe65 + -0x49d * 0x1, ShowTicketService_1[_0x42bbfa(0x14b)])(_0x3bcccf), _0x904fe[_0x42bbfa(0x180) + 'ue'](_0x55afa0[_0x42bbfa(0x128)], !![]);
        const _0x159a70 = {};
        _0x159a70[_0x42bbfa(0x146)] = _0x3d362e, _0x159a70[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x159a70[_0x42bbfa(0x16b)] = _0x904fe, (0x3c0 * -0x8 + -0x184 * 0x13 + 0x3acc, socketEmit_1[_0x42bbfa(0x14b)])(_0x159a70);
        const _0x7bb946 = {};
        _0x7bb946['id'] = _0x3d362e;
        const _0x1e6957 = {};
        _0x1e6957[_0x42bbfa(0x12a)] = _0x7bb946;
        const _0x33d21f = yield Tenant_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x1e6957);
        if (_0x55afa0[_0x42bbfa(0x123)](_0x55afa0[_0x42bbfa(0x198)](_0x33d21f, null) || _0x55afa0[_0x42bbfa(0xfc)](_0x33d21f, void (0x25ed + 0x25ac + 0x1933 * -0x3)) ? void (0x6fb * 0x5 + 0x1caa * -0x1 + -0x63d * 0x1) : _0x33d21f[_0x42bbfa(0x14f)], _0x55afa0[_0x42bbfa(0x166)]) && _0x55afa0[_0x42bbfa(0x182)](_0x904fe[_0x42bbfa(0x176)], _0x55afa0[_0x42bbfa(0x150)]) && _0x55afa0[_0x42bbfa(0x12b)](_0x904fe[_0x42bbfa(0x19a)], null) && !_0x904fe[_0x42bbfa(0x156)] && !_0x11d23b) {
            const _0x57764b = {};
            _0x57764b[_0x42bbfa(0x146)] = _0x3d362e, _0x57764b[_0x42bbfa(0x10b)] = _0x55afa0[_0x42bbfa(0x17b)];
            const _0x7db831 = {};
            _0x7db831[_0x42bbfa(0x12a)] = _0x57764b;
            const _0x18bbdd = yield User_1[_0x42bbfa(0x14b)][_0x42bbfa(0x11d)](_0x7db831);
            yield _0x904fe[_0x42bbfa(0x170)]({
                'status': _0x55afa0[_0x42bbfa(0x150)],
                'userId': (_0x55afa0[_0x42bbfa(0x16d)](_0x18bbdd, null) || _0x55afa0[_0x42bbfa(0x119)](_0x18bbdd, void (0x22 * -0xf4 + 0x16f5 + 0x3b * 0x29)) ? void (-0x1c45 + 0x1bf1 + 0x54) : _0x18bbdd['id']) || null,
                'unreadMessages': _0x402ff3
            });
            const _0x4c39ab = {};
            _0x4c39ab[_0x42bbfa(0x146)] = _0x3d362e, _0x4c39ab[_0x42bbfa(0x190)] = _0x55afa0[_0x42bbfa(0x18e)], _0x4c39ab[_0x42bbfa(0x16b)] = _0x904fe, (0x777 + 0x31 + -0x188 * 0x5, socketEmit_1[_0x42bbfa(0x14b)])(_0x4c39ab);
        }
        return _0x904fe;
    });
exports[_0x27e809(0x14b)] = FindOrCreateTicketService;