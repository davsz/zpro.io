'use strict';
function _0x1565(_0x5bff9e, _0x156ead) {
    const _0x5668d4 = _0x266c();
    return _0x1565 = function (_0x2cbf74, _0x2ea9d2) {
        _0x2cbf74 = _0x2cbf74 - (-0xede + -0x29e + 0x126e);
        let _0x3e0cdd = _0x5668d4[_0x2cbf74];
        return _0x3e0cdd;
    }, _0x1565(_0x5bff9e, _0x156ead);
}
const _0xe493c4 = _0x1565;
function _0x266c() {
    const _0x1d4dad = [
        'ERR_CREATI',
        'key',
        '22xCvbin',
        'mgUhL',
        'throw',
        'xbSbY',
        'erty',
        '24134jKoDZZ',
        '../Contact',
        'NG_TICKET',
        'Tickets',
        '42qnNpOA',
        '6TTpPws',
        'logFlowSta',
        'vice',
        'gTicketSer',
        'hujRH',
        'rs/AppErro',
        'DefaultDia',
        'apply',
        'chatgptAll',
        'ers/CheckC',
        'tenantId',
        'ate',
        'ls/Setting',
        'fault',
        'status',
        'kQEMm',
        'ers/GetDef',
        '__esModule',
        'Emit',
        'vaWeX',
        'qRaEM',
        'ontactOpen',
        '../../erro',
        'payload',
        'Services/S',
        '1630ZqENPf',
        'isActiveDe',
        'MPYwE',
        'howContact',
        'ticket',
        'create',
        'bYXzR',
        'Service',
        'ticketId',
        '718164sajxgR',
        'ers/socket',
        'tus',
        'jdVDT',
        'Value',
        '31568544rJjpOY',
        'pending',
        'enabled',
        'Cdscc',
        'type',
        'SQHbq',
        'VrSuo',
        '../../help',
        'aultWhatsA',
        'ticket:upd',
        'ketChatGpt',
        '4427920RtNZrp',
        'mand',
        '8kMjTKp',
        './ShowTick',
        'Status',
        '1062690xCMlMD',
        '$create',
        'contactId',
        'isGroup',
        'DefaultTic',
        'hpMXR',
        'uMTDu',
        'KYnJy',
        'next',
        '__importDe',
        'where',
        '1242882WhGcQh',
        './CreateLo',
        'default',
        'fWlnY',
        'done',
        '19640tVhXIf',
        'newDefault',
        '__awaiter',
        'value',
        'ketTypebot',
        'AllTickets',
        'dialogflow',
        'open',
        'userId',
        'then',
        'AhrON',
        'findOne',
        'KRFSS',
        'HXtIb',
        'yJkQh',
        'channel',
        'defineProp',
        'ers/Update',
        '../../mode',
        'typebotAll',
        'etService'
    ];
    _0x266c = function () {
        return _0x1d4dad;
    };
    return _0x266c();
}
(function (_0xd9e3b7, _0x52f16d) {
    const _0xc7194b = _0x1565, _0x28de7f = _0xd9e3b7();
    while (!![]) {
        try {
            const _0x4f17d3 = parseInt(_0xc7194b(0x146)) / (-0xc5 * -0x2a + 0x3 * -0x3f5 + -0x1472 * 0x1) * (-parseInt(_0xc7194b(0x12f)) / (0x373 * -0x2 + 0x1c7d + -0x1595)) + parseInt(_0xc7194b(0x150)) / (0x25ef + 0x23c9 + -0x49b5) * (parseInt(_0xc7194b(0x10a)) / (-0xdad + -0x125 * -0x10 + -0x49f)) + -parseInt(_0xc7194b(0x11a)) / (0x1d0d + 0x15c3 + -0x1 * 0x32cb) + -parseInt(_0xc7194b(0x11f)) / (0x1 * -0x1ec7 + -0x294 + 0x2161) * (parseInt(_0xc7194b(0x14f)) / (-0xc * 0x194 + -0x2409 + 0x3700)) + parseInt(_0xc7194b(0x11c)) / (-0xc37 + -0x25fc + 0xb * 0x491) * (parseInt(_0xc7194b(0x12a)) / (-0x22d3 + -0x1 * 0x7c7 + 0x1 * 0x2aa3)) + parseInt(_0xc7194b(0x101)) / (0x2429 + -0xa3a + -0x19e5) * (-parseInt(_0xc7194b(0x14b)) / (-0x233 * 0x1 + -0x425 + 0x663)) + parseInt(_0xc7194b(0x10f)) / (0x130e + 0xb * 0x189 + -0x23e5);
            if (_0x4f17d3 === _0x52f16d)
                break;
            else
                _0x28de7f['push'](_0x28de7f['shift']());
        } catch (_0x4bcc46) {
            _0x28de7f['push'](_0x28de7f['shift']());
        }
    }
}(_0x266c, -0xfd092 + 0xacd7f + 0x7 * 0x20971));
var __awaiter = this && this[_0xe493c4(0x131)] || function (_0x409a10, _0x88f544, _0x53b5ba, _0x2831a8) {
        const _0x5b0eb2 = _0xe493c4, _0x3f4195 = {
                'vaWeX': function (_0x704f95, _0x510c1f) {
                    return _0x704f95(_0x510c1f);
                },
                'qRaEM': function (_0x20c959, _0x6c92aa) {
                    return _0x20c959 instanceof _0x6c92aa;
                },
                'KRFSS': _0x5b0eb2(0x148),
                'jdVDT': function (_0x5b5b32, _0x47afc9) {
                    return _0x5b5b32(_0x47afc9);
                }
            };
        function _0x505e99(_0x8886e8) {
            const _0x18af97 = _0x5b0eb2, _0x49700e = {
                    'uMTDu': function (_0x335109, _0x977363) {
                        const _0x4465cf = _0x1565;
                        return _0x3f4195[_0x4465cf(0xfb)](_0x335109, _0x977363);
                    }
                };
            return _0x3f4195[_0x18af97(0xfc)](_0x8886e8, _0x53b5ba) ? _0x8886e8 : new _0x53b5ba(function (_0xe77dd8) {
                const _0x41fa97 = _0x18af97;
                _0x49700e[_0x41fa97(0x125)](_0xe77dd8, _0x8886e8);
            });
        }
        return new (_0x53b5ba || (_0x53b5ba = Promise))(function (_0x1c56ec, _0x293cd2) {
            const _0x4c7953 = _0x5b0eb2, _0x5e333f = {
                    'fWlnY': function (_0x1be142, _0x4d3214) {
                        const _0x539d46 = _0x1565;
                        return _0x3f4195[_0x539d46(0xfb)](_0x1be142, _0x4d3214);
                    },
                    'AhrON': function (_0x525303, _0x41887f) {
                        const _0x3b6e7d = _0x1565;
                        return _0x3f4195[_0x3b6e7d(0xfb)](_0x525303, _0x41887f);
                    }
                };
            function _0x429bb5(_0x35b0cf) {
                const _0x2cf496 = _0x1565;
                try {
                    _0x3f4195[_0x2cf496(0xfb)](_0x1ec55e, _0x2831a8[_0x2cf496(0x127)](_0x35b0cf));
                } catch (_0x3421d8) {
                    _0x3f4195[_0x2cf496(0xfb)](_0x293cd2, _0x3421d8);
                }
            }
            function _0x16a6b7(_0x3fa095) {
                const _0x160dca = _0x1565;
                try {
                    _0x3f4195[_0x160dca(0xfb)](_0x1ec55e, _0x2831a8[_0x3f4195[_0x160dca(0x13b)]](_0x3fa095));
                } catch (_0x100bc7) {
                    _0x3f4195[_0x160dca(0xfb)](_0x293cd2, _0x100bc7);
                }
            }
            function _0x1ec55e(_0x5f1fb2) {
                const _0x40cd21 = _0x1565;
                _0x5f1fb2[_0x40cd21(0x12e)] ? _0x5e333f[_0x40cd21(0x12d)](_0x1c56ec, _0x5f1fb2[_0x40cd21(0x132)]) : _0x5e333f[_0x40cd21(0x139)](_0x505e99, _0x5f1fb2[_0x40cd21(0x132)])[_0x40cd21(0x138)](_0x429bb5, _0x16a6b7);
            }
            _0x3f4195[_0x4c7953(0x10d)](_0x1ec55e, (_0x2831a8 = _0x2831a8[_0x4c7953(0x157)](_0x409a10, _0x88f544 || []))[_0x4c7953(0x127)]());
        });
    }, __importDefault = this && this[_0xe493c4(0x128) + _0xe493c4(0xf5)] || function (_0x3e1c50) {
        const _0x25df21 = _0xe493c4;
        return _0x3e1c50 && _0x3e1c50[_0x25df21(0xf9)] ? _0x3e1c50 : { 'default': _0x3e1c50 };
    };
const _0x3a06eb = {};
_0x3a06eb[_0xe493c4(0x132)] = !![], Object[_0xe493c4(0x13f) + _0xe493c4(0x14a)](exports, _0xe493c4(0xf9), _0x3a06eb);
const AppError_1 = __importDefault(require(_0xe493c4(0xfe) + _0xe493c4(0x155) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0x159) + _0xe493c4(0xfd) + _0xe493c4(0x14e))), GetDefaultWhatsApp_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0xf8) + _0xe493c4(0x117) + 'pp')), socketEmit_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0x10b) + _0xe493c4(0xfa))), ShowContactService_1 = __importDefault(require(_0xe493c4(0x14c) + _0xe493c4(0x100) + _0xe493c4(0x104) + _0xe493c4(0x108))), CreateLogTicketService_1 = __importDefault(require(_0xe493c4(0x12b) + _0xe493c4(0x153) + _0xe493c4(0x152))), ShowTicketService_1 = __importDefault(require(_0xe493c4(0x11d) + _0xe493c4(0x143))), Setting_1 = __importDefault(require(_0xe493c4(0x141) + _0xe493c4(0xf4))), UpdateDefaultTicketChatGptStatus_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0x140) + _0xe493c4(0x123) + _0xe493c4(0x119) + _0xe493c4(0x11e))), UpdateDefaultTicketTypebotStatus_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0x140) + _0xe493c4(0x123) + _0xe493c4(0x133) + _0xe493c4(0x11e))), UpdateDefaultDialogFlowStatus_1 = __importDefault(require(_0xe493c4(0x116) + _0xe493c4(0x140) + _0xe493c4(0x156) + _0xe493c4(0x151) + _0xe493c4(0x10c))), CreateTicketService = ({
        contactId: _0x31620a,
        status: _0x251bd4,
        userId: _0x55e299,
        tenantId: _0x2c538b,
        channel: _0x2fc110,
        channelId: channelId = undefined
    }) => __awaiter(void (-0xb9e + -0xc9 * -0x1b + -0x995), void (0x24ee + -0x34c * -0x7 + -0x3c02), void (-0x5cf + 0x1e7a + 0x839 * -0x3), function* () {
        const _0x48cb37 = _0xe493c4, _0xeec749 = {};
        _0xeec749[_0x48cb37(0x126)] = function (_0x50d9be, _0x5aab92) {
            return _0x50d9be === _0x5aab92;
        }, _0xeec749[_0x48cb37(0x115)] = _0x48cb37(0x136), _0xeec749[_0x48cb37(0x13c)] = function (_0x1b29d0, _0x5a0dad) {
            return _0x1b29d0 === _0x5a0dad;
        }, _0xeec749[_0x48cb37(0x13d)] = _0x48cb37(0x110), _0xeec749[_0x48cb37(0x107)] = _0x48cb37(0x105), _0xeec749[_0x48cb37(0x149)] = _0x48cb37(0x144) + _0x48cb37(0x14d), _0xeec749[_0x48cb37(0x103)] = _0x48cb37(0x106), _0xeec749[_0x48cb37(0x114)] = _0x48cb37(0x158) + _0x48cb37(0x14e), _0xeec749[_0x48cb37(0xf7)] = _0x48cb37(0x142) + _0x48cb37(0x14e), _0xeec749[_0x48cb37(0x147)] = _0x48cb37(0x135) + _0x48cb37(0x134), _0xeec749[_0x48cb37(0x124)] = _0x48cb37(0x111), _0xeec749[_0x48cb37(0x154)] = function (_0x3fa539, _0x26ac29) {
            return _0x3fa539 === _0x26ac29;
        }, _0xeec749[_0x48cb37(0x112)] = _0x48cb37(0x118) + _0x48cb37(0xf3);
        const _0x3dfcc1 = _0xeec749, _0x4d324c = yield (-0x17e1 + 0x1881 + -0xa0, GetDefaultWhatsApp_1[_0x48cb37(0x12c)])(_0x2c538b, channelId);
        if (_0x3dfcc1[_0x48cb37(0x126)](_0x251bd4, _0x3dfcc1[_0x48cb37(0x115)]) || _0x3dfcc1[_0x48cb37(0x13c)](_0x251bd4, _0x3dfcc1[_0x48cb37(0x13d)]))
            yield (-0x1 * -0x797 + 0xedb + -0x1a * 0xdd, CheckContactOpenTickets_1[_0x48cb37(0x12c)])(_0x31620a, channelId);
        const _0x43a113 = {};
        _0x43a113['id'] = _0x31620a, _0x43a113[_0x48cb37(0xf2)] = _0x2c538b;
        const {isGroup: _0x3e9426} = yield (0x11e6 + -0x1e73 + 0xc8d, ShowContactService_1[_0x48cb37(0x12c)])(_0x43a113), _0x3d6041 = {};
        _0x3d6041[_0x48cb37(0x121)] = _0x31620a, _0x3d6041[_0x48cb37(0xf6)] = _0x251bd4, _0x3d6041[_0x48cb37(0x122)] = _0x3e9426, _0x3d6041[_0x48cb37(0x137)] = _0x55e299, _0x3d6041[_0x48cb37(0x102) + _0x48cb37(0x11b)] = !![], _0x3d6041[_0x48cb37(0x13e)] = _0x2fc110, _0x3d6041[_0x48cb37(0xf2)] = _0x2c538b;
        const {id: _0x206400} = yield _0x4d324c[_0x48cb37(0x120)](_0x3dfcc1[_0x48cb37(0x107)], _0x3d6041), _0x48e88f = {};
        _0x48e88f['id'] = _0x206400, _0x48e88f[_0x48cb37(0xf2)] = _0x2c538b;
        const _0x500faa = yield (0xc07 * 0x3 + 0x49b + -0x7 * 0x5d0, ShowTicketService_1[_0x48cb37(0x12c)])(_0x48e88f);
        if (!_0x500faa)
            throw new AppError_1[(_0x48cb37(0x12c))](_0x3dfcc1[_0x48cb37(0x149)]);
        const _0x38a525 = {};
        _0x38a525[_0x48cb37(0x137)] = _0x55e299, _0x38a525[_0x48cb37(0xf2)] = _0x500faa[_0x48cb37(0xf2)], _0x38a525[_0x48cb37(0x109)] = _0x500faa['id'], _0x38a525[_0x48cb37(0x113)] = _0x3dfcc1[_0x48cb37(0x103)], yield (0xa1 * 0x19 + 0x4f5 * -0x2 + -0x5cf, CreateLogTicketService_1[_0x48cb37(0x12c)])(_0x38a525);
        const _0x7c2740 = {};
        _0x7c2740[_0x48cb37(0x145)] = _0x3dfcc1[_0x48cb37(0x114)], _0x7c2740[_0x48cb37(0xf2)] = _0x2c538b;
        const _0xa3f6d3 = {};
        _0xa3f6d3[_0x48cb37(0x129)] = _0x7c2740;
        const _0x106b6f = yield Setting_1[_0x48cb37(0x12c)][_0x48cb37(0x13a)](_0xa3f6d3), _0x447339 = {};
        _0x447339[_0x48cb37(0x145)] = _0x3dfcc1[_0x48cb37(0xf7)], _0x447339[_0x48cb37(0xf2)] = _0x2c538b;
        const _0x163dcb = {};
        _0x163dcb[_0x48cb37(0x129)] = _0x447339;
        const _0x309486 = yield Setting_1[_0x48cb37(0x12c)][_0x48cb37(0x13a)](_0x163dcb), _0x9bb21c = {};
        _0x9bb21c[_0x48cb37(0x145)] = _0x3dfcc1[_0x48cb37(0x147)], _0x9bb21c[_0x48cb37(0xf2)] = _0x2c538b;
        const _0x23590e = {};
        _0x23590e[_0x48cb37(0x129)] = _0x9bb21c;
        const _0x47a673 = yield Setting_1[_0x48cb37(0x12c)][_0x48cb37(0x13a)](_0x23590e);
        if (_0x106b6f) {
            const _0xfe8915 = _0x3dfcc1[_0x48cb37(0x13c)](_0x106b6f[_0x48cb37(0x132)], _0x3dfcc1[_0x48cb37(0x124)]), _0x34d149 = {};
            _0x34d149[_0x48cb37(0xf2)] = _0x2c538b, _0x34d149[_0x48cb37(0x109)] = _0x500faa['id'], _0x34d149[_0x48cb37(0x130) + _0x48cb37(0x10e)] = _0xfe8915, yield (0x9df + -0x17f4 + 0x7 * 0x203, UpdateDefaultTicketChatGptStatus_1[_0x48cb37(0x12c)])(_0x34d149);
        }
        if (_0x309486) {
            const _0xbb808b = _0x3dfcc1[_0x48cb37(0x126)](_0x309486[_0x48cb37(0x132)], _0x3dfcc1[_0x48cb37(0x124)]), _0x2fdff4 = {};
            _0x2fdff4[_0x48cb37(0xf2)] = _0x2c538b, _0x2fdff4[_0x48cb37(0x109)] = _0x500faa['id'], _0x2fdff4[_0x48cb37(0x130) + _0x48cb37(0x10e)] = _0xbb808b, yield (0x23a2 + -0x1102 + -0x8 * 0x254, UpdateDefaultTicketTypebotStatus_1[_0x48cb37(0x12c)])(_0x2fdff4);
        }
        if (_0x47a673) {
            const _0x4d1172 = _0x3dfcc1[_0x48cb37(0x154)](_0x47a673[_0x48cb37(0x132)], _0x3dfcc1[_0x48cb37(0x124)]), _0x35ab44 = {};
            _0x35ab44[_0x48cb37(0xf2)] = _0x2c538b, _0x35ab44[_0x48cb37(0x109)] = _0x500faa['id'], _0x35ab44[_0x48cb37(0x130) + _0x48cb37(0x10e)] = _0x4d1172, yield (0x238e + 0x2317 + 0xe21 * -0x5, UpdateDefaultDialogFlowStatus_1[_0x48cb37(0x12c)])(_0x35ab44);
        }
        const _0x2ea531 = {};
        return _0x2ea531[_0x48cb37(0xf2)] = _0x2c538b, _0x2ea531[_0x48cb37(0x113)] = _0x3dfcc1[_0x48cb37(0x112)], _0x2ea531[_0x48cb37(0xff)] = _0x500faa, (0x1307 + -0xab4 + -0x853, socketEmit_1[_0x48cb37(0x12c)])(_0x2ea531), _0x500faa;
    });
exports[_0xe493c4(0x12c)] = CreateTicketService;