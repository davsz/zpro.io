'use strict';
const _0x19bf51 = _0x47a3;
(function (_0x38c39c, _0x5a772e) {
    const _0x370847 = _0x47a3, _0xeef782 = _0x38c39c();
    while (!![]) {
        try {
            const _0xd0dae9 = parseInt(_0x370847(0x1c4)) / (0x1de1 + -0x427 * 0x1 + 0x5 * -0x525) * (parseInt(_0x370847(0x1e0)) / (-0x127 * -0x13 + -0x49 * -0x83 + -0x3b3e)) + parseInt(_0x370847(0x1c1)) / (-0x4 * 0x8a1 + -0x33d * 0x9 + 0xa3 * 0x64) * (-parseInt(_0x370847(0x21b)) / (-0x1864 + 0x75 + 0x17f3)) + -parseInt(_0x370847(0x1f0)) / (-0x21f3 * 0x1 + 0xdd * 0x25 + 0x207) + parseInt(_0x370847(0x226)) / (-0x1af4 + 0x1e49 * -0x1 + 0x3943) + -parseInt(_0x370847(0x201)) / (0xda2 + 0x1 * 0x12fa + -0x1b7 * 0x13) + -parseInt(_0x370847(0x1e5)) / (0x1b74 + -0x14d + -0x1 * 0x1a1f) + -parseInt(_0x370847(0x1cb)) / (-0x66a + -0x26ca + 0x2d3d) * (-parseInt(_0x370847(0x1ef)) / (-0x1 * 0x108b + -0xe85 * 0x2 + -0x2d9f * -0x1));
            if (_0xd0dae9 === _0x5a772e)
                break;
            else
                _0xeef782['push'](_0xeef782['shift']());
        } catch (_0x2aa216) {
            _0xeef782['push'](_0xeef782['shift']());
        }
    }
}(_0x1ecf, 0x2 * -0x37588 + 0xd * 0x9961 + -0x41586 * -0x1));
var __awaiter = this && this[_0x19bf51(0x1cf)] || function (_0x311b37, _0x20d8a2, _0x233562, _0x448cc5) {
        const _0x1408ee = _0x19bf51, _0x4db7a4 = {
                'SbdtK': function (_0x9c0bc, _0x31ea9c) {
                    return _0x9c0bc(_0x31ea9c);
                },
                'wSnPR': function (_0x5a9632, _0xe3a129) {
                    return _0x5a9632 instanceof _0xe3a129;
                },
                'MWWDC': function (_0x510dfb, _0x35f89f) {
                    return _0x510dfb(_0x35f89f);
                },
                'gQkBm': _0x1408ee(0x209),
                'IHjUE': function (_0x39044d, _0x491f6c) {
                    return _0x39044d(_0x491f6c);
                },
                'qJtRS': function (_0x494ffb, _0xf05041) {
                    return _0x494ffb(_0xf05041);
                }
            };
        function _0x2fde70(_0x4d4785) {
            const _0x9937d3 = _0x1408ee, _0x139eab = {
                    'YnAfR': function (_0x3e80b0, _0x866467) {
                        const _0x357443 = _0x47a3;
                        return _0x4db7a4[_0x357443(0x21f)](_0x3e80b0, _0x866467);
                    }
                };
            return _0x4db7a4[_0x9937d3(0x228)](_0x4d4785, _0x233562) ? _0x4d4785 : new _0x233562(function (_0x1f0585) {
                const _0x20ea0e = _0x9937d3;
                _0x139eab[_0x20ea0e(0x1d7)](_0x1f0585, _0x4d4785);
            });
        }
        return new (_0x233562 || (_0x233562 = Promise))(function (_0x12c769, _0xe90ee) {
            const _0x18ee34 = _0x1408ee, _0x3f3500 = {
                    'jytjI': function (_0x52ea56, _0x559d89) {
                        const _0x2eaf4b = _0x47a3;
                        return _0x4db7a4[_0x2eaf4b(0x21f)](_0x52ea56, _0x559d89);
                    },
                    'dQfmB': function (_0x10ef8c, _0x26603d) {
                        const _0x112b35 = _0x47a3;
                        return _0x4db7a4[_0x112b35(0x1bf)](_0x10ef8c, _0x26603d);
                    },
                    'Yqywa': _0x4db7a4[_0x18ee34(0x1cc)],
                    'Tzavj': function (_0x5e8226, _0x52882e) {
                        const _0x3f830c = _0x18ee34;
                        return _0x4db7a4[_0x3f830c(0x1f5)](_0x5e8226, _0x52882e);
                    },
                    'QzqUe': function (_0x367e6d, _0x2eb504) {
                        const _0x36f8cb = _0x18ee34;
                        return _0x4db7a4[_0x36f8cb(0x1ec)](_0x367e6d, _0x2eb504);
                    }
                };
            function _0x5205e9(_0x56c757) {
                const _0x278e27 = _0x18ee34;
                try {
                    _0x3f3500[_0x278e27(0x1ce)](_0x3b23e4, _0x448cc5[_0x278e27(0x1ee)](_0x56c757));
                } catch (_0x146207) {
                    _0x3f3500[_0x278e27(0x1ce)](_0xe90ee, _0x146207);
                }
            }
            function _0x229c47(_0x386b68) {
                const _0x186d13 = _0x18ee34;
                try {
                    _0x3f3500[_0x186d13(0x1dc)](_0x3b23e4, _0x448cc5[_0x3f3500[_0x186d13(0x1d0)]](_0x386b68));
                } catch (_0x5ee5fc) {
                    _0x3f3500[_0x186d13(0x20d)](_0xe90ee, _0x5ee5fc);
                }
            }
            function _0x3b23e4(_0x11a828) {
                const _0x1c1b9b = _0x18ee34;
                _0x11a828[_0x1c1b9b(0x225)] ? _0x3f3500[_0x1c1b9b(0x1ce)](_0x12c769, _0x11a828[_0x1c1b9b(0x1c7)]) : _0x3f3500[_0x1c1b9b(0x1fb)](_0x2fde70, _0x11a828[_0x1c1b9b(0x1c7)])[_0x1c1b9b(0x203)](_0x5205e9, _0x229c47);
            }
            _0x4db7a4[_0x18ee34(0x1ec)](_0x3b23e4, (_0x448cc5 = _0x448cc5[_0x18ee34(0x1de)](_0x311b37, _0x20d8a2 || []))[_0x18ee34(0x1ee)]());
        });
    }, __importDefault = this && this[_0x19bf51(0x215) + _0x19bf51(0x212)] || function (_0x17b16b) {
        const _0x376bc8 = _0x19bf51;
        return _0x17b16b && _0x17b16b[_0x376bc8(0x1e4)] ? _0x17b16b : { 'default': _0x17b16b };
    };
const _0x3bdacd = {};
_0x3bdacd[_0x19bf51(0x1c7)] = !![], Object[_0x19bf51(0x1d5) + _0x19bf51(0x223)](exports, _0x19bf51(0x1e4), _0x3bdacd);
function _0x47a3(_0x4ab56f, _0x38c9ea) {
    const _0x24288c = _0x1ecf();
    return _0x47a3 = function (_0x1e4908, _0x24de45) {
        _0x1e4908 = _0x1e4908 - (-0xacf + -0x1 * 0xb0a + -0xbcc * -0x2);
        let _0x45c39d = _0x24288c[_0x1e4908];
        return _0x45c39d;
    }, _0x47a3(_0x4ab56f, _0x38c9ea);
}
const axios_1 = __importDefault(require(_0x19bf51(0x1f4))), Ticket_1 = __importDefault(require(_0x19bf51(0x200) + _0x19bf51(0x21a))), Message_1 = __importDefault(require(_0x19bf51(0x200) + _0x19bf51(0x210))), socketEmit_1 = __importDefault(require(_0x19bf51(0x206) + _0x19bf51(0x205) + _0x19bf51(0x1d8))), AppError_1 = __importDefault(require(_0x19bf51(0x1f8) + _0x19bf51(0x21c) + 'r')), logger_1 = require(_0x19bf51(0x1eb) + _0x19bf51(0x222));
function _0x1ecf() {
    const _0x5a36f3 = [
        'rs/AppErro',
        'link',
        'public/',
        'SbdtK',
        'epdAt',
        'Content-Ty',
        's/logger',
        'erty',
        'ate',
        'done',
        '447840LInUGr',
        'nTVPn',
        'wSnPR',
        'mQZbx',
        'https://gr',
        'ogaUy',
        'sendImage',
        'sended',
        'MWWDC',
        'messages',
        '1713LMaQFv',
        '.0/',
        'BzpNH',
        '126190MhRMrx',
        'WABA\x20send\x20',
        'PP_OFFLINE',
        'value',
        'logger',
        'bBajz',
        'n/json',
        '12893049DLvpYA',
        'gQkBm',
        'data',
        'jytjI',
        '__awaiter',
        'Yqywa',
        'headers',
        'applicatio',
        'CONNECTED',
        'ticket:upd',
        'defineProp',
        'SDrro',
        'YnAfR',
        'Emit',
        'EQyze',
        'default',
        'HEpel',
        'dQfmB',
        'ijokm',
        'apply',
        'type',
        '4rBHfLY',
        'whatsapp',
        'messageId',
        'image\x20erro',
        '__esModule',
        '3796168AcyLAt',
        'tenantId',
        'image',
        'fromMe',
        '/messages?',
        'split',
        '../../util',
        'qJtRS',
        'bmToken',
        'next',
        '10TLtINt',
        '1621110MjzeQH',
        'SkMdS',
        'grPbL',
        'findOne',
        'axios',
        'IHjUE',
        'en=',
        'payload',
        '../../erro',
        'aph.facebo',
        'access_tok',
        'QzqUe',
        'url',
        'status',
        'update',
        'body',
        '../../mode',
        '3561586MiuEen',
        'now',
        'then',
        'getTime',
        'ers/socket',
        '../../help',
        'product',
        'idFront',
        'throw',
        'warn',
        'method',
        'POST',
        'Tzavj',
        'TPpPo',
        'chat:ack',
        'ls/Message',
        'zBjIT',
        'fault',
        'CIaFz',
        'ERR_WHATSA',
        '__importDe',
        'where',
        'ok.com/v19',
        'contact',
        'messaging_',
        'ls/Ticket',
        '892UNHUhi'
    ];
    _0x1ecf = function () {
        return _0x5a36f3;
    };
    return _0x1ecf();
}
class SendImage {
    [_0x19bf51(0x22c)]({
        from: _0x25d4bd,
        phone_number_id: _0x277a4a,
        imageUrl: _0x36cd02,
        ticket: _0x50ee71,
        tenantId: _0x27f451,
        idFront: _0x331e23,
        whatsapp: _0x2b1287
    }) {
        const _0x224506 = _0x19bf51, _0x570618 = {
                'zBjIT': function (_0x2c9f21, _0x51bfb2) {
                    return _0x2c9f21 !== _0x51bfb2;
                },
                'TPpPo': _0x224506(0x1d3),
                'bBajz': _0x224506(0x214) + _0x224506(0x1c6),
                'nTVPn': function (_0x40cf75, _0x18ade7) {
                    return _0x40cf75 === _0x18ade7;
                },
                'mQZbx': function (_0x13f96b, _0x57958f) {
                    return _0x13f96b === _0x57958f;
                },
                'ogaUy': _0x224506(0x20c),
                'ijokm': _0x224506(0x1e1),
                'SDrro': _0x224506(0x1e7),
                'SkMdS': _0x224506(0x1d2) + _0x224506(0x1ca),
                'EQyze': _0x224506(0x21e),
                'HEpel': _0x224506(0x22d),
                'BzpNH': _0x224506(0x1d4) + _0x224506(0x224),
                'CIaFz': _0x224506(0x20f),
                'epdAt': _0x224506(0x1c5) + _0x224506(0x1e3) + 'r',
                'grPbL': function (_0x32a292, _0x449f89, _0x11c059, _0x168450, _0x29b34a) {
                    return _0x32a292(_0x449f89, _0x11c059, _0x168450, _0x29b34a);
                }
            };
        return _0x570618[_0x224506(0x1f2)](__awaiter, this, void (-0x3 * -0x3f1 + -0x2421 * -0x1 + -0x2ff4), void (0x23d4 * 0x1 + 0x558 + -0x292c), function* () {
            const _0x1b4766 = _0x224506;
            if (_0x570618[_0x1b4766(0x211)](_0x2b1287[_0x1b4766(0x1fd)], _0x570618[_0x1b4766(0x20e)]))
                throw new AppError_1[(_0x1b4766(0x1da))](_0x570618[_0x1b4766(0x1c9)], -0x14e8 + 0x1af * -0xd + -0x2f5 * -0xf);
            try {
                const _0x2fdc97 = _0x1b4766(0x22a) + _0x1b4766(0x1f9) + _0x1b4766(0x217) + _0x1b4766(0x1c2) + _0x277a4a + (_0x1b4766(0x1e9) + _0x1b4766(0x1fa) + _0x1b4766(0x1f6)) + (_0x570618[_0x1b4766(0x227)](_0x2b1287, null) || _0x570618[_0x1b4766(0x229)](_0x2b1287, void (0x36a + 0xa1 * 0x9 + -0x913)) ? void (-0x14 * -0x1b3 + -0x17 * -0x2f + -0x2635) : _0x2b1287[_0x1b4766(0x1ed)]), _0x439504 = {};
                _0x439504[_0x1b4766(0x21d)] = _0x36cd02;
                const _0x4097d5 = {};
                _0x4097d5[_0x1b4766(0x20b)] = _0x570618[_0x1b4766(0x22b)], _0x4097d5[_0x1b4766(0x1fc)] = _0x2fdc97, _0x4097d5[_0x1b4766(0x1cd)] = {}, _0x4097d5[_0x1b4766(0x1d1)] = {}, _0x4097d5[_0x1b4766(0x1cd)][_0x1b4766(0x219) + _0x1b4766(0x207)] = _0x570618[_0x1b4766(0x1dd)], _0x4097d5[_0x1b4766(0x1cd)]['to'] = _0x25d4bd, _0x4097d5[_0x1b4766(0x1cd)][_0x1b4766(0x1df)] = _0x570618[_0x1b4766(0x1d6)], _0x4097d5[_0x1b4766(0x1cd)][_0x1b4766(0x1e7)] = _0x439504, _0x4097d5[_0x1b4766(0x1d1)][_0x1b4766(0x221) + 'pe'] = _0x570618[_0x1b4766(0x1f1)];
                const _0xe8d42a = yield (-0x246d + 0xc6 + 0x23a7, axios_1[_0x1b4766(0x1da)])(_0x4097d5);
                let _0x4f3325 = Date[_0x1b4766(0x202)]();
                const _0x4cc083 = {
                        'messageId': _0xe8d42a[_0x1b4766(0x1cd)][_0x1b4766(0x1c0)][-0x23b1 * -0x1 + 0x128e + -0x363f * 0x1]['id'] || '',
                        'ticketId': _0x50ee71['id'],
                        'contactId': _0x50ee71[_0x1b4766(0x218)]['id'],
                        'body': _0x36cd02[_0x1b4766(0x1ea)](_0x570618[_0x1b4766(0x1d9)])[0x25 * -0xe4 + 0x4 * 0x504 + -0xce5 * -0x1] || '',
                        'fromMe': !![],
                        'mediaType': _0x570618[_0x1b4766(0x1d6)],
                        'read': !![],
                        'ack': 0x1,
                        'timestamp': _0x4f3325,
                        'status': _0x570618[_0x1b4766(0x1db)]
                    }, _0xdb74f2 = {};
                _0xdb74f2['id'] = _0x50ee71['id'];
                const _0x19cccc = {};
                _0x19cccc[_0x1b4766(0x216)] = _0xdb74f2;
                const _0x17bfa8 = yield Ticket_1[_0x1b4766(0x1da)][_0x1b4766(0x1f3)](_0x19cccc);
                if (!_0x17bfa8)
                    return;
                yield _0x17bfa8[_0x1b4766(0x1fe)]({
                    'lastMessage': _0x4cc083[_0x1b4766(0x1ff)],
                    'lastMessageAt': new Date()[_0x1b4766(0x204)](),
                    'answered': _0xe8d42a[_0x1b4766(0x1cd)][_0x1b4766(0x1e8)] || ![]
                });
                const _0x3c32e3 = {};
                _0x3c32e3[_0x1b4766(0x208)] = _0x331e23, _0x3c32e3[_0x1b4766(0x1e6)] = _0x27f451;
                const _0x2574e9 = {};
                _0x2574e9[_0x1b4766(0x216)] = _0x3c32e3;
                const _0x5e8638 = yield Message_1[_0x1b4766(0x1da)][_0x1b4766(0x1f3)](_0x2574e9);
                if (!_0x5e8638)
                    return;
                yield _0x5e8638[_0x1b4766(0x1fe)]({
                    'messageId': _0xe8d42a[_0x1b4766(0x1cd)][_0x1b4766(0x1c0)][0x22c0 + 0x1 * 0x127d + 0x4d * -0xb1]['id'],
                    'ack': 0x2,
                    'status': _0x570618[_0x1b4766(0x1db)],
                    'mediaUrl': _0x36cd02[_0x1b4766(0x1ea)](_0x570618[_0x1b4766(0x1d9)])[-0xb * -0xa7 + -0x1 * -0x1933 + -0x205f] || '',
                    'mediaType': _0x570618[_0x1b4766(0x1d6)],
                    'sendType': _0x570618[_0x1b4766(0x1d6)]
                });
                const _0x245824 = {};
                _0x245824[_0x1b4766(0x1e6)] = _0x27f451, _0x245824[_0x1b4766(0x1df)] = _0x570618[_0x1b4766(0x1c3)], _0x245824[_0x1b4766(0x1f7)] = _0x50ee71, (-0x1250 + -0x5 * -0x165 + -0xb57 * -0x1, socketEmit_1[_0x1b4766(0x1da)])(_0x245824);
                const _0x75cc5 = {};
                _0x75cc5[_0x1b4766(0x1e2)] = _0xe8d42a[_0x1b4766(0x1cd)][_0x1b4766(0x1c0)][-0x1b1f + 0x26ff + -0x28 * 0x4c]['id'], _0x75cc5[_0x1b4766(0x1e6)] = _0x27f451;
                const _0x476e97 = {};
                _0x476e97[_0x1b4766(0x216)] = _0x75cc5;
                const _0x37096e = yield Message_1[_0x1b4766(0x1da)][_0x1b4766(0x1f3)](_0x476e97);
                if (!_0x37096e)
                    return;
                const _0x26e528 = {};
                return _0x26e528[_0x1b4766(0x1e6)] = _0x27f451, _0x26e528[_0x1b4766(0x1df)] = _0x570618[_0x1b4766(0x213)], _0x26e528[_0x1b4766(0x1f7)] = _0x37096e, (-0xac + 0x1f51 * 0x1 + -0x1ea5, socketEmit_1[_0x1b4766(0x1da)])(_0x26e528), _0xe8d42a[_0x1b4766(0x1cd)];
            } catch (_0x30ab52) {
                logger_1[_0x1b4766(0x1c8)][_0x1b4766(0x20a)](_0x570618[_0x1b4766(0x220)]);
                throw _0x30ab52;
            }
        });
    }
}
exports[_0x19bf51(0x1da)] = SendImage;