'use strict';
const _0x5b365d = _0xeadc;
(function (_0x496c18, _0x47e862) {
    const _0x44fc8c = _0xeadc, _0x3503e8 = _0x496c18();
    while (!![]) {
        try {
            const _0x3693f0 = -parseInt(_0x44fc8c(0xfd)) / (0x1 * 0x329 + 0x19ff + -0x1d27) + parseInt(_0x44fc8c(0x117)) / (0x623 * -0x4 + 0x1 * 0x685 + 0x1209) * (parseInt(_0x44fc8c(0x118)) / (0x18 * -0x2a + -0x17fb + 0x1bee)) + -parseInt(_0x44fc8c(0x110)) / (0x2 * -0x714 + -0x2 * -0xe16 + -0x2 * 0x700) * (parseInt(_0x44fc8c(0x10a)) / (0x1606 + -0x29 * -0x11 + -0x4f2 * 0x5)) + parseInt(_0x44fc8c(0x109)) / (0xcc7 * -0x3 + -0x15 * -0x3 + -0x10f * -0x24) + parseInt(_0x44fc8c(0x11e)) / (0x1456 + 0x2 * -0xf01 + 0x9b3) + -parseInt(_0x44fc8c(0x100)) / (-0x17b7 + 0x3 * 0x2f + 0x1732) * (-parseInt(_0x44fc8c(0x125)) / (-0x47d * -0x3 + -0x59 * 0x53 + -0x1 * -0xf6d)) + parseInt(_0x44fc8c(0x124)) / (-0x1750 + 0x263f + -0xee5);
            if (_0x3693f0 === _0x47e862)
                break;
            else
                _0x3503e8['push'](_0x3503e8['shift']());
        } catch (_0xe4864e) {
            _0x3503e8['push'](_0x3503e8['shift']());
        }
    }
}(_0x479b, -0x1eea4 + -0x12aee + -0x7b9a5 * -0x1));
var __awaiter = this && this[_0x5b365d(0x104)] || function (_0x24a9de, _0x5c4efa, _0x320fcc, _0x45b2a7) {
        const _0x505cb4 = _0x5b365d, _0x37f8c8 = {
                'GNQUF': function (_0x4978d6, _0x41407f) {
                    return _0x4978d6(_0x41407f);
                },
                'wGfmi': function (_0x3a33df, _0x5b5d01) {
                    return _0x3a33df instanceof _0x5b5d01;
                },
                'ErLUd': function (_0x15d1c5, _0x339f8c) {
                    return _0x15d1c5(_0x339f8c);
                },
                'iAhKx': _0x505cb4(0xfa),
                'eEeGC': function (_0x271fa8, _0x4770c9) {
                    return _0x271fa8(_0x4770c9);
                },
                'jrqlW': function (_0x5ed830, _0x427347) {
                    return _0x5ed830(_0x427347);
                }
            };
        function _0x5dc8aa(_0x137907) {
            const _0x4d1b28 = _0x505cb4;
            return _0x37f8c8[_0x4d1b28(0x10c)](_0x137907, _0x320fcc) ? _0x137907 : new _0x320fcc(function (_0x42c6aa) {
                const _0x40588e = _0x4d1b28;
                _0x37f8c8[_0x40588e(0x113)](_0x42c6aa, _0x137907);
            });
        }
        return new (_0x320fcc || (_0x320fcc = Promise))(function (_0x1ec646, _0x465516) {
            const _0x5d29af = _0x505cb4, _0x4947d6 = {
                    'IYuYW': function (_0x440409, _0xede3ab) {
                        const _0x5cf34d = _0xeadc;
                        return _0x37f8c8[_0x5cf34d(0x113)](_0x440409, _0xede3ab);
                    },
                    'lqpyH': function (_0x3d25d8, _0x535d74) {
                        const _0x2a6e3d = _0xeadc;
                        return _0x37f8c8[_0x2a6e3d(0xee)](_0x3d25d8, _0x535d74);
                    },
                    'LOLZx': function (_0x3a9028, _0x21512b) {
                        const _0x386023 = _0xeadc;
                        return _0x37f8c8[_0x386023(0xee)](_0x3a9028, _0x21512b);
                    },
                    'fljjd': _0x37f8c8[_0x5d29af(0xf8)],
                    'NuLnh': function (_0x4816db, _0x22e942) {
                        const _0x548207 = _0x5d29af;
                        return _0x37f8c8[_0x548207(0xfb)](_0x4816db, _0x22e942);
                    },
                    'GTTnA': function (_0x4ea1de, _0x20d354) {
                        const _0x38545a = _0x5d29af;
                        return _0x37f8c8[_0x38545a(0x127)](_0x4ea1de, _0x20d354);
                    }
                };
            function _0x3d69c0(_0x77f949) {
                const _0x40b4d1 = _0x5d29af;
                try {
                    _0x4947d6[_0x40b4d1(0x103)](_0x5714b3, _0x45b2a7[_0x40b4d1(0x12a)](_0x77f949));
                } catch (_0x9c87a5) {
                    _0x4947d6[_0x40b4d1(0x121)](_0x465516, _0x9c87a5);
                }
            }
            function _0x71cd3c(_0x3496f3) {
                const _0x1bc8c0 = _0x5d29af;
                try {
                    _0x4947d6[_0x1bc8c0(0x111)](_0x5714b3, _0x45b2a7[_0x4947d6[_0x1bc8c0(0xf2)]](_0x3496f3));
                } catch (_0x28b5be) {
                    _0x4947d6[_0x1bc8c0(0x121)](_0x465516, _0x28b5be);
                }
            }
            function _0x5714b3(_0x503f91) {
                const _0x9bb028 = _0x5d29af;
                _0x503f91[_0x9bb028(0x11a)] ? _0x4947d6[_0x9bb028(0xf3)](_0x1ec646, _0x503f91[_0x9bb028(0x101)]) : _0x4947d6[_0x9bb028(0x115)](_0x5dc8aa, _0x503f91[_0x9bb028(0x101)])[_0x9bb028(0x11b)](_0x3d69c0, _0x71cd3c);
            }
            _0x37f8c8[_0x5d29af(0xfb)](_0x5714b3, (_0x45b2a7 = _0x45b2a7[_0x5d29af(0x10b)](_0x24a9de, _0x5c4efa || []))[_0x5d29af(0x12a)]());
        });
    }, __importDefault = this && this[_0x5b365d(0x114) + _0x5b365d(0xf0)] || function (_0x59534c) {
        const _0x2b8f71 = _0x5b365d;
        return _0x59534c && _0x59534c[_0x2b8f71(0xfc)] ? _0x59534c : { 'default': _0x59534c };
    };
const _0x11f3bd = {};
_0x11f3bd[_0x5b365d(0x101)] = !![], Object[_0x5b365d(0xef) + _0x5b365d(0xf1)](exports, _0x5b365d(0xfc), _0x11f3bd);
const sequelize_1 = require(_0x5b365d(0xf5)), socketEmit_1 = __importDefault(require(_0x5b365d(0xf4) + _0x5b365d(0x126) + _0x5b365d(0x119))), Contact_1 = __importDefault(require(_0x5b365d(0x108) + _0x5b365d(0x102))), Message_1 = __importDefault(require(_0x5b365d(0x108) + _0x5b365d(0x107))), Ticket_1 = __importDefault(require(_0x5b365d(0x108) + _0x5b365d(0x105))), MessengerMarkRead = (_0x4a0b02, _0x56495a) => __awaiter(void (0x2 * 0x957 + 0x187e + -0x266 * 0x12), void (0x139e + -0x555 + -0xe49), void (-0x2099 * -0x1 + -0x1d01 * 0x1 + -0x398), function* () {
        const _0x129a2e = _0x5b365d, _0x417289 = {};
        _0x417289[_0x129a2e(0x123)] = _0x129a2e(0xff), _0x417289[_0x129a2e(0x122)] = _0x129a2e(0x10d);
        const _0x416b7f = _0x417289, _0x2d72ca = yield Message_1[_0x129a2e(0x116)][_0x129a2e(0x11f)]({
                'where': {
                    'tenantId': _0x56495a,
                    'createdAt': { [sequelize_1['Op'][_0x129a2e(0xf9)]]: new Date(_0x4a0b02[_0x129a2e(0x11c)][_0x129a2e(0x112)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            -0x7 * 0x2d7 + -0x1e7 * 0x2 + 0x17b0,
                            0x231 * -0xb + 0x16 * 0x37 + 0x1363
                        ]
                    }
                },
                'include': [{
                        'model': Ticket_1[_0x129a2e(0x116)],
                        'where': { 'tenantId': _0x56495a },
                        'include': [{
                                'model': Contact_1[_0x129a2e(0x116)],
                                'where': {
                                    'tenantId': _0x56495a,
                                    'messengerId': _0x4a0b02[_0x129a2e(0x10e)]['id']
                                }
                            }]
                    }]
            });
        yield Promise[_0x129a2e(0x120)](_0x2d72ca[_0x129a2e(0x129)](_0x5935e5 => __awaiter(void (-0x191d + -0x27 * 0x49 + 0xc * 0x305), void (-0x2483 + 0x1a01 + 0xa82), void (-0x261 * 0x7 + -0x7a + -0x5 * -0x36d), function* () {
            const _0xed663a = _0x129a2e, _0x5f3263 = {};
            _0x5f3263[_0xed663a(0xfe)] = 0x3, yield _0x5935e5[_0xed663a(0xf7)](_0x5f3263), (-0x1 * -0x19fd + 0x8d * 0x35 + 0x2 * -0x1b97, socketEmit_1[_0xed663a(0x116)])({
                'tenantId': _0x56495a,
                'type': _0x416b7f[_0xed663a(0x123)],
                'payload': Object[_0xed663a(0x128)](Object[_0xed663a(0x128)]({}, _0x5935e5[_0xed663a(0xf6)]), {
                    'mediaUrl': _0x5935e5[_0xed663a(0x10f)],
                    'id': _0x5935e5['id'],
                    'timestamp': _0x5935e5[_0xed663a(0x11d)],
                    'messageId': _0x5935e5[_0xed663a(0x106)],
                    'status': _0x416b7f[_0xed663a(0x122)],
                    'ack': 0x3
                })
            });
        })));
    });
function _0x479b() {
    const _0x2b286a = [
        'NuLnh',
        '../../help',
        'sequelize',
        'dataValues',
        'update',
        'iAhKx',
        'lte',
        'throw',
        'eEeGC',
        '__esModule',
        '437259lVnKSU',
        'ack',
        'chat:ack',
        '16amBGnz',
        'value',
        'ls/Contact',
        'IYuYW',
        '__awaiter',
        'ls/Ticket',
        'messageId',
        'ls/Message',
        '../../mode',
        '1537182fqahMm',
        '1265475UjYDtj',
        'apply',
        'wGfmi',
        'sended',
        'sender',
        'mediaUrl',
        '8rSjZgV',
        'LOLZx',
        'watermark',
        'GNQUF',
        '__importDe',
        'GTTnA',
        'default',
        '2ohoUqS',
        '1479TmqUZT',
        'Emit',
        'done',
        'then',
        'read',
        'timestamp',
        '806379BRsqon',
        'findAll',
        'all',
        'lqpyH',
        'ruefT',
        'rYAHn',
        '5380330VRfPiY',
        '1514934BACIqu',
        'ers/socket',
        'jrqlW',
        'assign',
        'map',
        'next',
        'ErLUd',
        'defineProp',
        'fault',
        'erty',
        'fljjd'
    ];
    _0x479b = function () {
        return _0x2b286a;
    };
    return _0x479b();
}
function _0xeadc(_0x452bfb, _0x3439ef) {
    const _0x4397ef = _0x479b();
    return _0xeadc = function (_0x45f1d4, _0x3fdeee) {
        _0x45f1d4 = _0x45f1d4 - (-0x7d * -0x11 + 0x2 * 0x2ba + -0xcd3);
        let _0x489dcb = _0x4397ef[_0x45f1d4];
        return _0x489dcb;
    }, _0xeadc(_0x452bfb, _0x3439ef);
}
exports[_0x5b365d(0x116)] = MessengerMarkRead;