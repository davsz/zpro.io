'use strict';
const _0x434bb5 = _0x4648;
function _0x4905() {
    const _0x1bdaca = [
        'VerifyCont',
        'getContact',
        'apiConfig',
        'aLRog',
        'ers/GetTic',
        '../../mode',
        'findOne',
        'info',
        '3551102WGEGla',
        'apply',
        'fivcA',
        '__awaiter',
        'error',
        'ervices/Fi',
        'timestamp',
        '../TicketS',
        '4795443UHhuGP',
        'qdTAy',
        'ketWbotByI',
        'reverse',
        'mJrJp',
        'payload',
        'fetchMessa',
        '6423520LhiMAs',
        'throw',
        'ndOrCreate',
        'SdzYC',
        'qXzhF',
        'ls/Message',
        'log',
        'Sync\x20error',
        'Sync\x20messa',
        'messageId',
        'ice',
        'ge\x20ticket:',
        '14YvtytL',
        'MEZgN',
        'chat:updat',
        'BMBgU',
        '\x20HH:mm:ss',
        'NYXcv',
        'ltcRD',
        '2007720eoTZYQ',
        'xists',
        'hasMedia',
        '__esModule',
        'next',
        'GPDFZ',
        'isSync',
        'channel',
        's/logger',
        './helpers/',
        'syncTime',
        'lbLlD',
        'quotedMsg',
        'fault',
        '../../util',
        'fsESr',
        'then',
        'hwoTb',
        'act',
        'aMessage',
        'getChat',
        '__importDe',
        'logger',
        'VerifyMess',
        'done',
        '13648IRCxGE',
        'format',
        'contact',
        'XxfCC',
        'unreadMess',
        'erty',
        'RFsva',
        'JboLw',
        'unreadCoun',
        'update',
        'IGJdn',
        'ssnYy',
        'TicketServ',
        'whatsapp',
        'OZxoQ',
        '2682STWVKY',
        'limit',
        'default',
        'ers/socket',
        'ack',
        'OqqnP',
        'tenantId',
        'age',
        'ticket',
        'ges',
        'ZtrCD',
        'kLQnJ',
        'defineProp',
        '9283gksfhd',
        'VerifyMedi',
        'unix',
        '\x20already\x20e',
        'ages',
        'type',
        'whatsappId',
        'value',
        'America/Sa',
        'iYAgg',
        'where',
        'o_Paulo',
        'ezone',
        'ls/Ticket',
        'DD-MM-YYYY',
        '4457658peNBDK',
        'Emit',
        '../../help',
        'moment-tim',
        'ById'
    ];
    _0x4905 = function () {
        return _0x1bdaca;
    };
    return _0x4905();
}
(function (_0x213c59, _0x3242f5) {
    const _0x25a478 = _0x4648, _0x35fb16 = _0x213c59();
    while (!![]) {
        try {
            const _0x1148fb = parseInt(_0x25a478(0xab)) / (0x14b + 0xb2b + -0x3 * 0x427) + parseInt(_0x25a478(0xc7)) / (-0x45c + 0x1988 + -0x152a) + -parseInt(_0x25a478(0xcf)) / (-0x1 * -0x21c8 + -0xa4 * 0x37 + 0x1 * 0x177) + parseInt(_0x25a478(0xe9)) / (0x1325 + -0xcb9 + 0xa4 * -0xa) + parseInt(_0x25a478(0xd6)) / (-0x1 * -0x68e + 0xbdd + -0x1266) + parseInt(_0x25a478(0xba)) / (-0x2b3 * 0xa + -0x171f + 0xa07 * 0x5) * (-parseInt(_0x25a478(0xe2)) / (0x31 * 0x55 + 0x25c9 * -0x1 + 0x158b)) + -parseInt(_0x25a478(0x102)) / (0xf14 + 0x2022 + 0xfba * -0x3) * (-parseInt(_0x25a478(0x111)) / (-0x15f0 + -0x1d27 + -0x199 * -0x20));
            if (_0x1148fb === _0x3242f5)
                break;
            else
                _0x35fb16['push'](_0x35fb16['shift']());
        } catch (_0x1e8cf8) {
            _0x35fb16['push'](_0x35fb16['shift']());
        }
    }
}(_0x4905, 0x43157 + -0x44f6d + 0xf4eb7));
function _0x4648(_0x2091f7, _0x2a10db) {
    const _0x1575a4 = _0x4905();
    return _0x4648 = function (_0x42ae17, _0x176202) {
        _0x42ae17 = _0x42ae17 - (0x56 * -0x74 + 0xd * -0x291 + -0x48f4 * -0x1);
        let _0x3162c2 = _0x1575a4[_0x42ae17];
        return _0x3162c2;
    }, _0x4648(_0x2091f7, _0x2a10db);
}
var __awaiter = this && this[_0x434bb5(0xca)] || function (_0x2087e6, _0x4e6467, _0x105e90, _0x4687a7) {
        const _0x5750b8 = _0x434bb5, _0x5c00b8 = {
                'RFsva': function (_0x2b17ed, _0x2ec474) {
                    return _0x2b17ed(_0x2ec474);
                },
                'NYXcv': function (_0x59418d, _0x257fd4) {
                    return _0x59418d instanceof _0x257fd4;
                },
                'ZtrCD': function (_0x47bc32, _0x2cfc65) {
                    return _0x47bc32(_0x2cfc65);
                },
                'mJrJp': function (_0x3e4f22, _0x21f62c) {
                    return _0x3e4f22(_0x21f62c);
                },
                'OqqnP': function (_0x473263, _0x5a84fb) {
                    return _0x473263(_0x5a84fb);
                },
                'XxfCC': _0x5750b8(0xd7),
                'iYAgg': function (_0x3cb937, _0x2a5d71) {
                    return _0x3cb937(_0x2a5d71);
                }
            };
        function _0x1fb8f0(_0x5794a8) {
            const _0x327989 = _0x5750b8;
            return _0x5c00b8[_0x327989(0xe7)](_0x5794a8, _0x105e90) ? _0x5794a8 : new _0x105e90(function (_0x46c2a8) {
                const _0x557fdf = _0x327989;
                _0x5c00b8[_0x557fdf(0x108)](_0x46c2a8, _0x5794a8);
            });
        }
        return new (_0x105e90 || (_0x105e90 = Promise))(function (_0x2b175e, _0x3bb437) {
            const _0x2787e4 = _0x5750b8, _0x3f2b78 = {
                    'MEZgN': function (_0x58a336, _0x318752) {
                        const _0x1a6943 = _0x4648;
                        return _0x5c00b8[_0x1a6943(0x108)](_0x58a336, _0x318752);
                    },
                    'qdTAy': _0x5c00b8[_0x2787e4(0x105)]
                };
            function _0x3f40f6(_0x2b027c) {
                const _0x2f1bc3 = _0x2787e4;
                try {
                    _0x5c00b8[_0x2f1bc3(0xa8)](_0x5c779b, _0x4687a7[_0x2f1bc3(0xed)](_0x2b027c));
                } catch (_0x352909) {
                    _0x5c00b8[_0x2f1bc3(0xd3)](_0x3bb437, _0x352909);
                }
            }
            function _0x16586f(_0x4bc9b2) {
                const _0x576e18 = _0x2787e4;
                try {
                    _0x3f2b78[_0x576e18(0xe3)](_0x5c779b, _0x4687a7[_0x3f2b78[_0x576e18(0xd0)]](_0x4bc9b2));
                } catch (_0x2576cd) {
                    _0x3f2b78[_0x576e18(0xe3)](_0x3bb437, _0x2576cd);
                }
            }
            function _0x5c779b(_0x5c4a35) {
                const _0x575f08 = _0x2787e4;
                _0x5c4a35[_0x575f08(0x101)] ? _0x5c00b8[_0x575f08(0x108)](_0x2b175e, _0x5c4a35[_0x575f08(0xb2)]) : _0x5c00b8[_0x575f08(0xa3)](_0x1fb8f0, _0x5c4a35[_0x575f08(0xb2)])[_0x575f08(0xf9)](_0x3f40f6, _0x16586f);
            }
            _0x5c00b8[_0x2787e4(0xb4)](_0x5c779b, (_0x4687a7 = _0x4687a7[_0x2787e4(0xc8)](_0x2087e6, _0x4e6467 || []))[_0x2787e4(0xed)]());
        });
    }, __importDefault = this && this[_0x434bb5(0xfe) + _0x434bb5(0xf6)] || function (_0x39d9ca) {
        const _0x45317d = _0x434bb5;
        return _0x39d9ca && _0x39d9ca[_0x45317d(0xec)] ? _0x39d9ca : { 'default': _0x39d9ca };
    };
const _0x2e2192 = {};
_0x2e2192[_0x434bb5(0xb2)] = !![], Object[_0x434bb5(0xaa) + _0x434bb5(0x107)](exports, _0x434bb5(0xec), _0x2e2192);
const logger_1 = require(_0x434bb5(0xf7) + _0x434bb5(0xf1)), FindOrCreateTicketService_1 = __importDefault(require(_0x434bb5(0xce) + _0x434bb5(0xcc) + _0x434bb5(0xd8) + _0x434bb5(0x10e) + _0x434bb5(0xe0))), VerifyContact_1 = __importDefault(require(_0x434bb5(0xf2) + _0x434bb5(0xbf) + _0x434bb5(0xfb))), VerifyMediaMessage_1 = __importDefault(require(_0x434bb5(0xf2) + _0x434bb5(0xac) + _0x434bb5(0xfc))), VerifyMessage_1 = __importDefault(require(_0x434bb5(0xf2) + _0x434bb5(0x100) + _0x434bb5(0xa5))), GetTicketWbotById_1 = __importDefault(require(_0x434bb5(0xbc) + _0x434bb5(0xc3) + _0x434bb5(0xd1) + 'd')), Message_1 = __importDefault(require(_0x434bb5(0xc4) + _0x434bb5(0xdb))), Ticket_1 = __importDefault(require(_0x434bb5(0xc4) + _0x434bb5(0xb8))), socketEmit_1 = __importDefault(require(_0x434bb5(0xbc) + _0x434bb5(0xa1) + _0x434bb5(0xbb))), moment_timezone_1 = __importDefault(require(_0x434bb5(0xbd) + _0x434bb5(0xb7))), delay = _0x36b3a9 => new Promise(_0x7f455e => setTimeout(_0x7f455e, _0x36b3a9)), SyncOldMessagesByUserWbot = (_0x29f885, _0x5d6ff1, _0x2e0403, _0x53c576) => __awaiter(void (0x1f92 + 0x19af * 0x1 + -0x3941), void (-0xa65 * 0x3 + -0xe1b + 0x2d4a), void (0x123f + 0xa2c + -0x1c6b), function* () {
        const _0x5b0135 = _0x434bb5, _0x200c06 = {
                'SdzYC': function (_0x162ce0, _0x2fd081) {
                    return _0x162ce0 + _0x2fd081;
                },
                'ltcRD': _0x5b0135(0xde) + _0x5b0135(0xe1) + '\x20',
                'OZxoQ': _0x5b0135(0x10f),
                'kLQnJ': _0x5b0135(0xae) + _0x5b0135(0xea),
                'qXzhF': _0x5b0135(0x104),
                'JboLw': _0x5b0135(0xa6),
                'aLRog': _0x5b0135(0xa4),
                'fsESr': _0x5b0135(0xc1),
                'BMBgU': _0x5b0135(0xf5),
                'ssnYy': _0x5b0135(0xb3) + _0x5b0135(0xb6),
                'GPDFZ': _0x5b0135(0xb9) + _0x5b0135(0xe6),
                'hwoTb': _0x5b0135(0xe4) + 'e',
                'fivcA': function (_0x4de833, _0x1a2073) {
                    return _0x4de833 + _0x1a2073;
                },
                'IGJdn': function (_0x1af62f, _0x35d971) {
                    return _0x1af62f(_0x35d971);
                },
                'lbLlD': _0x5b0135(0xdd) + ':\x20'
            };
        try {
            const _0x545737 = yield (0x2c7 + -0x1 * -0x1d9b + -0xa * 0x33d, GetTicketWbotById_1[_0x5b0135(0xa0)])(_0x29f885), _0x4ae75e = yield _0x545737[_0x5b0135(0xc0) + _0x5b0135(0xbe)](_0x53c576), _0x3d71be = yield _0x4ae75e[_0x5b0135(0xfd)](), _0x26f6db = {};
            _0x26f6db[_0x5b0135(0x9f)] = _0x2e0403;
            let _0x17fdaa = yield _0x3d71be[_0x5b0135(0xd5) + _0x5b0135(0xa7)](_0x26f6db);
            logger_1[_0x5b0135(0xff)][_0x5b0135(0xc6)](_0x200c06[_0x5b0135(0xd9)](_0x200c06[_0x5b0135(0xe8)], _0x53c576)), _0x17fdaa = _0x17fdaa[_0x5b0135(0xd2)](), console[_0x5b0135(0xdc)](_0x17fdaa);
            for (const _0x4f9f4f of _0x17fdaa) {
                const _0x58efac = yield _0x3d71be[_0x5b0135(0xc0)](), _0x16c603 = yield (0x194f + 0x1815 * -0x1 + -0x13a, VerifyContact_1[_0x5b0135(0xa0)])(_0x58efac, _0x5d6ff1), _0x6433f5 = {};
                _0x6433f5[_0x5b0135(0x104)] = _0x16c603, _0x6433f5[_0x5b0135(0xb1)] = _0x29f885, _0x6433f5[_0x5b0135(0x106) + _0x5b0135(0xaf)] = _0x3d71be[_0x5b0135(0x10a) + 't'], _0x6433f5[_0x5b0135(0xa4)] = _0x5d6ff1, _0x6433f5[_0x5b0135(0xef)] = !![], _0x6433f5[_0x5b0135(0xf0)] = _0x200c06[_0x5b0135(0x110)];
                const _0x4b3e12 = yield (0x1 * 0x2515 + 0x1f1 * 0x13 + -0x3 * 0x18a8, FindOrCreateTicketService_1[_0x5b0135(0xa0)])(_0x6433f5), _0x42205f = {};
                _0x42205f[_0x5b0135(0xdf)] = _0x4f9f4f['id']['id'], _0x42205f[_0x5b0135(0xa4)] = _0x5d6ff1;
                const _0x5c40bc = {};
                _0x5c40bc[_0x5b0135(0xb5)] = _0x42205f;
                const _0x1cdee7 = yield Message_1[_0x5b0135(0xa0)][_0x5b0135(0xc5)](_0x5c40bc);
                _0x1cdee7 && logger_1[_0x5b0135(0xff)][_0x5b0135(0xc6)](_0x200c06[_0x5b0135(0xd9)](_0x4f9f4f['id']['id'], _0x200c06[_0x5b0135(0xa9)]));
                if (!_0x1cdee7) {
                    _0x4f9f4f[_0x5b0135(0xeb)] ? yield (-0x1 * 0x1f84 + 0xe * -0xa3 + -0x8a * -0x4b, VerifyMediaMessage_1[_0x5b0135(0xa0)])(_0x4f9f4f, _0x4b3e12, _0x16c603) : yield (-0xfec * -0x1 + 0x1147 * 0x2 + 0xb6 * -0x47, VerifyMessage_1[_0x5b0135(0xa0)])(_0x4f9f4f, _0x4b3e12, _0x16c603);
                    const _0x515db7 = {};
                    _0x515db7[_0x5b0135(0xdf)] = _0x4f9f4f['id']['id'];
                    const _0x3d9640 = yield Message_1[_0x5b0135(0xa0)][_0x5b0135(0xc5)]({
                        'where': _0x515db7,
                        'include': [
                            _0x200c06[_0x5b0135(0xda)],
                            {
                                'model': Ticket_1[_0x5b0135(0xa0)],
                                'as': _0x200c06[_0x5b0135(0x109)],
                                'attributes': [
                                    'id',
                                    _0x200c06[_0x5b0135(0xc2)],
                                    _0x200c06[_0x5b0135(0xf8)]
                                ]
                            },
                            {
                                'model': Message_1[_0x5b0135(0xa0)],
                                'as': _0x200c06[_0x5b0135(0xe5)],
                                'include': [_0x200c06[_0x5b0135(0xda)]]
                            }
                        ]
                    });
                    if (_0x3d9640) {
                        const _0x18116b = moment_timezone_1[_0x5b0135(0xa0)][_0x5b0135(0xad)](_0x4f9f4f[_0x5b0135(0xcd)])['tz'](_0x200c06[_0x5b0135(0x10d)]), _0x366baf = _0x18116b[_0x5b0135(0x103)](_0x200c06[_0x5b0135(0xee)]), _0x364d7a = {};
                        _0x364d7a[_0x5b0135(0xa2)] = 0x2, _0x364d7a[_0x5b0135(0xf3)] = _0x366baf, yield _0x3d9640[_0x5b0135(0x10b)](_0x364d7a);
                        const {ticket: _0x625768} = _0x3d9640, _0x1d8790 = {};
                        _0x1d8790[_0x5b0135(0xa4)] = _0x625768[_0x5b0135(0xa4)], _0x1d8790[_0x5b0135(0xb0)] = _0x200c06[_0x5b0135(0xfa)], _0x1d8790[_0x5b0135(0xd4)] = _0x3d9640, (0x6 * 0x14e + 0x912 + -0x10e6, socketEmit_1[_0x5b0135(0xa0)])(_0x1d8790);
                    }
                    logger_1[_0x5b0135(0xff)][_0x5b0135(0xc6)](_0x200c06[_0x5b0135(0xc9)](_0x200c06[_0x5b0135(0xe8)], _0x4f9f4f['id']['id']));
                }
                yield _0x200c06[_0x5b0135(0x10c)](delay, -0x1ec6 + 0xb2 * 0x29 + 0x11e4);
            }
        } catch (_0x10dbb4) {
            logger_1[_0x5b0135(0xff)][_0x5b0135(0xcb)](_0x200c06[_0x5b0135(0xf4)], _0x10dbb4);
        }
    });
exports[_0x434bb5(0xa0)] = SyncOldMessagesByUserWbot;