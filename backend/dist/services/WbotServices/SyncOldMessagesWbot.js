'use strict';
const _0x5c0410 = _0x23c2;
(function (_0x4a7315, _0x4c3e61) {
    const _0x541763 = _0x23c2, _0xf8287d = _0x4a7315();
    while (!![]) {
        try {
            const _0x3079f4 = parseInt(_0x541763(0x18c)) / (-0x1e2 * -0x2 + 0xf * 0x19b + -0x1bd8) * (-parseInt(_0x541763(0x180)) / (-0x1bf3 + 0x1445 * 0x1 + -0x3d8 * -0x2)) + -parseInt(_0x541763(0x197)) / (-0x26 * -0x97 + 0x1979 * -0x1 + -0x6 * -0x83) * (-parseInt(_0x541763(0x19c)) / (0x189d + -0x1 * -0x22d4 + 0x567 * -0xb)) + -parseInt(_0x541763(0x1bd)) / (-0x1 * -0x89f + 0x69 * -0x3a + -0xf30 * -0x1) + -parseInt(_0x541763(0x1bf)) / (-0xfba + 0xc69 + -0x2d * -0x13) + parseInt(_0x541763(0x185)) / (-0x874 * -0x3 + -0x1c40 + -0x1 * -0x2eb) + -parseInt(_0x541763(0x1e0)) / (-0x50d * -0x1 + -0x2477 + 0x5 * 0x64a) * (parseInt(_0x541763(0x1cd)) / (-0x8d3 * 0x4 + -0x1 * -0x5ca + -0x1d8b * -0x1)) + parseInt(_0x541763(0x1c7)) / (-0xad * -0x16 + 0x240b + 0x3 * -0x10f5);
            if (_0x3079f4 === _0x4c3e61)
                break;
            else
                _0xf8287d['push'](_0xf8287d['shift']());
        } catch (_0x2c6235) {
            _0xf8287d['push'](_0xf8287d['shift']());
        }
    }
}(_0xe08f, -0x5 * -0x7fd6 + -0x2e25 * 0x7 + 0x2db * 0x52));
function _0x23c2(_0x32191e, _0x2f3f65) {
    const _0x5f2b13 = _0xe08f();
    return _0x23c2 = function (_0x4f04e1, _0x5d3542) {
        _0x4f04e1 = _0x4f04e1 - (-0x295 + 0xd7 + -0x1 * -0x33b);
        let _0x31cb41 = _0x5f2b13[_0x4f04e1];
        return _0x31cb41;
    }, _0x23c2(_0x32191e, _0x2f3f65);
}
var __awaiter = this && this[_0x5c0410(0x183)] || function (_0x48bde7, _0x9dcd89, _0x110ffc, _0x1a1e82) {
        const _0x301216 = _0x5c0410, _0x1f6f3b = {
                'lBNzO': function (_0x1e3ed3, _0x9fa0bb) {
                    return _0x1e3ed3(_0x9fa0bb);
                },
                'HZAOG': function (_0x4d75e4, _0x17eb61) {
                    return _0x4d75e4 instanceof _0x17eb61;
                },
                'FcgvN': function (_0x2af7c7, _0x4d4983) {
                    return _0x2af7c7(_0x4d4983);
                },
                'Tinjw': _0x301216(0x1f6),
                'oicSE': function (_0x3fa5b0, _0x29c489) {
                    return _0x3fa5b0(_0x29c489);
                },
                'AZCRt': function (_0x267c53, _0x248bf6) {
                    return _0x267c53(_0x248bf6);
                },
                'lFwEV': function (_0x428bc4, _0x1193a4) {
                    return _0x428bc4(_0x1193a4);
                }
            };
        function _0x17bedd(_0x539c87) {
            const _0x53d304 = _0x301216;
            return _0x1f6f3b[_0x53d304(0x1d9)](_0x539c87, _0x110ffc) ? _0x539c87 : new _0x110ffc(function (_0xe0d6d1) {
                const _0x8310d7 = _0x53d304;
                _0x1f6f3b[_0x8310d7(0x194)](_0xe0d6d1, _0x539c87);
            });
        }
        return new (_0x110ffc || (_0x110ffc = Promise))(function (_0xb577c3, _0x22f8e8) {
            const _0x319842 = _0x301216;
            function _0xb55b06(_0x4d1b9e) {
                const _0x5a71b1 = _0x23c2;
                try {
                    _0x1f6f3b[_0x5a71b1(0x194)](_0x9a2183, _0x1a1e82[_0x5a71b1(0x1aa)](_0x4d1b9e));
                } catch (_0x2e5b1a) {
                    _0x1f6f3b[_0x5a71b1(0x1da)](_0x22f8e8, _0x2e5b1a);
                }
            }
            function _0x3c1ac1(_0x49be26) {
                const _0x3110b6 = _0x23c2;
                try {
                    _0x1f6f3b[_0x3110b6(0x1da)](_0x9a2183, _0x1a1e82[_0x1f6f3b[_0x3110b6(0x1b0)]](_0x49be26));
                } catch (_0x4b85b6) {
                    _0x1f6f3b[_0x3110b6(0x1da)](_0x22f8e8, _0x4b85b6);
                }
            }
            function _0x9a2183(_0x1e04d6) {
                const _0x2b2f6a = _0x23c2;
                _0x1e04d6[_0x2b2f6a(0x18e)] ? _0x1f6f3b[_0x2b2f6a(0x19b)](_0xb577c3, _0x1e04d6[_0x2b2f6a(0x1af)]) : _0x1f6f3b[_0x2b2f6a(0x1ea)](_0x17bedd, _0x1e04d6[_0x2b2f6a(0x1af)])[_0x2b2f6a(0x1f3)](_0xb55b06, _0x3c1ac1);
            }
            _0x1f6f3b[_0x319842(0x1e5)](_0x9a2183, (_0x1a1e82 = _0x1a1e82[_0x319842(0x1a1)](_0x48bde7, _0x9dcd89 || []))[_0x319842(0x1aa)]());
        });
    }, __importDefault = this && this[_0x5c0410(0x1db) + _0x5c0410(0x1e3)] || function (_0x58a214) {
        const _0x29abc6 = _0x5c0410;
        return _0x58a214 && _0x58a214[_0x29abc6(0x1bb)] ? _0x58a214 : { 'default': _0x58a214 };
    };
const _0x21b83d = {};
function _0xe08f() {
    const _0x2da32b = [
        'whatsappId',
        'Sync\x20messa',
        'age',
        'oicSE',
        '562260LIOfKB',
        'logger',
        'Emit',
        'reverse',
        '\x20HH:mm:ss',
        'apply',
        'iTAfA',
        'fetchMessa',
        '../../mode',
        'limit',
        'groupConta',
        'ezone',
        'UZoPP',
        'essages\x20er',
        'next',
        'ack',
        'yyfrQ',
        'ror:\x20',
        'channel',
        'value',
        'Tinjw',
        'apiConfig',
        'where',
        'timestamp',
        'Sync\x20old\x20m',
        './helpers/',
        '../../help',
        'vvDvi',
        'DD-MM-YYYY',
        'isGroup',
        'woAci',
        '__esModule',
        'ages',
        '269590fVqxks',
        'unix',
        '1136964MqQtYa',
        'defineProp',
        'ers/socket',
        'ketWbotByI',
        'syncTime',
        'quotedMsg',
        'tenantId',
        'XzUkI',
        '1379550dmBrOF',
        'VerifyCont',
        'ers/GetTic',
        'type',
        'essages\x20fr',
        'erty',
        '9xmHXQD',
        'isSync',
        'lVoqo',
        'unreadCoun',
        'getContact',
        's/logger',
        'whatsapp',
        'unreadMess',
        'moment-tim',
        'ls/Message',
        'BxzdC',
        'ndOrCreate',
        'HZAOG',
        'FcgvN',
        '__importDe',
        'update',
        'info',
        'messageId',
        'getChats',
        '186664nsSlhf',
        'aMessage',
        'huQPR',
        'fault',
        'ZkQzj',
        'lFwEV',
        'cyWCi',
        'eJFHq',
        'error',
        'xists',
        'AZCRt',
        'ervices/Fi',
        'findOne',
        'hasMedia',
        'America/Sa',
        'VerifyMess',
        'payload',
        '\x20already\x20e',
        'oKlkU',
        'then',
        'Xmlit',
        'act',
        'throw',
        '../../util',
        'TicketServ',
        'VQqFH',
        '2jfWiIj',
        'chat:ack',
        '../TicketS',
        '__awaiter',
        'ges',
        '1664551SXoeNP',
        'om\x20channel',
        'ice',
        'ge\x20device:',
        'Ahtyk',
        'chat:updat',
        'wPOKo',
        '108687qWnptK',
        'VerifyMedi',
        'done',
        'kQboi',
        'o_Paulo',
        'ls/Ticket',
        'ticket',
        'contact',
        'lBNzO',
        'format',
        'default',
        '3QCxpLx'
    ];
    _0xe08f = function () {
        return _0x2da32b;
    };
    return _0xe08f();
}
_0x21b83d[_0x5c0410(0x1af)] = !![], Object[_0x5c0410(0x1c0) + _0x5c0410(0x1cc)](exports, _0x5c0410(0x1bb), _0x21b83d);
const logger_1 = require(_0x5c0410(0x17d) + _0x5c0410(0x1d2)), FindOrCreateTicketService_1 = __importDefault(require(_0x5c0410(0x182) + _0x5c0410(0x1eb) + _0x5c0410(0x1d8) + _0x5c0410(0x17e) + _0x5c0410(0x187))), VerifyContact_1 = __importDefault(require(_0x5c0410(0x1b5) + _0x5c0410(0x1c8) + _0x5c0410(0x1f5))), VerifyMediaMessage_1 = __importDefault(require(_0x5c0410(0x1b5) + _0x5c0410(0x18d) + _0x5c0410(0x1e1))), VerifyMessage_1 = __importDefault(require(_0x5c0410(0x1b5) + _0x5c0410(0x1ef) + _0x5c0410(0x19a))), GetTicketWbotById_1 = __importDefault(require(_0x5c0410(0x1b6) + _0x5c0410(0x1c9) + _0x5c0410(0x1c2) + 'd')), Message_1 = __importDefault(require(_0x5c0410(0x1a4) + _0x5c0410(0x1d6))), Ticket_1 = __importDefault(require(_0x5c0410(0x1a4) + _0x5c0410(0x191))), socketEmit_1 = __importDefault(require(_0x5c0410(0x1b6) + _0x5c0410(0x1c1) + _0x5c0410(0x19e))), moment_timezone_1 = __importDefault(require(_0x5c0410(0x1d5) + _0x5c0410(0x1a7))), delay = _0x3d9865 => new Promise(_0x15acaa => setTimeout(_0x15acaa, _0x3d9865)), SyncOldMessagesWbot = (_0x378eba, _0x5af47f, _0xfe4c6f) => __awaiter(void (0x1506 + -0x1 * 0x1159 + -0x3ad), void (-0x1843 + -0x8 * 0xf3 + 0x1fdb), void (0x1ff1 + -0xd9d + -0x1254), function* () {
        const _0x29c645 = _0x5c0410, _0x55fe79 = {
                'woAci': _0x29c645(0x1b4) + _0x29c645(0x1cb) + _0x29c645(0x186) + ':\x20',
                'UZoPP': _0x29c645(0x1d3),
                'vvDvi': function (_0x33f646, _0x58e053) {
                    return _0x33f646 + _0x58e053;
                },
                'eJFHq': _0x29c645(0x1f1) + _0x29c645(0x1e9),
                'Ahtyk': _0x29c645(0x193),
                'cyWCi': _0x29c645(0x192),
                'oKlkU': _0x29c645(0x1c5),
                'ZkQzj': _0x29c645(0x1b1),
                'XzUkI': _0x29c645(0x1c4),
                'lVoqo': _0x29c645(0x181),
                'kQboi': function (_0x534aa1, _0x2d04c5) {
                    return _0x534aa1 + _0x2d04c5;
                },
                'yyfrQ': _0x29c645(0x199) + _0x29c645(0x188) + '\x20',
                'VQqFH': function (_0x53887d, _0x5b95a6) {
                    return _0x53887d(_0x5b95a6);
                },
                'wPOKo': function (_0x9c00b0, _0x2f5a1c) {
                    return _0x9c00b0 + _0x2f5a1c;
                },
                'Xmlit': _0x29c645(0x1ee) + _0x29c645(0x190),
                'huQPR': _0x29c645(0x1b8) + _0x29c645(0x1a0),
                'iTAfA': _0x29c645(0x18a) + 'e',
                'BxzdC': _0x29c645(0x1b4) + _0x29c645(0x1a9) + _0x29c645(0x1ad)
            };
        try {
            const _0x5d70c3 = yield (0xbbb + -0x2 * 0x2e + -0xb5f, GetTicketWbotById_1[_0x29c645(0x196)])(_0x378eba), _0x26d546 = yield _0x5d70c3[_0x29c645(0x1df)]();
            logger_1[_0x29c645(0x19d)][_0x29c645(0x1dd)](_0x55fe79[_0x29c645(0x1ba)], _0x378eba);
            for (const _0x5203ed of _0x26d546) {
                if (_0x5203ed[_0x29c645(0x1b9)]) {
                    const _0xa00ea9 = {};
                    _0xa00ea9[_0x29c645(0x1a5)] = _0xfe4c6f;
                    let _0x1fbe5b = yield _0x5203ed[_0x29c645(0x1a3) + _0x29c645(0x184)](_0xa00ea9);
                    const _0x41df58 = yield _0x5203ed[_0x29c645(0x1d1)](), _0x53a990 = yield (-0x77c * -0x4 + -0x2 * 0x6bb + 0xde * -0x13, VerifyContact_1[_0x29c645(0x196)])(_0x41df58, _0x5af47f), _0x2816df = {};
                    _0x2816df[_0x29c645(0x193)] = _0x53a990, _0x2816df[_0x29c645(0x198)] = _0x378eba, _0x2816df[_0x29c645(0x1d4) + _0x29c645(0x1bc)] = _0x5203ed[_0x29c645(0x1d0) + 't'], _0x2816df[_0x29c645(0x1c5)] = _0x5af47f, _0x2816df[_0x29c645(0x1a6) + 'ct'] = _0x53a990, _0x2816df[_0x29c645(0x1ce)] = !![], _0x2816df[_0x29c645(0x1ae)] = _0x55fe79[_0x29c645(0x1a8)];
                    const _0x29e89f = yield (0x1 * 0x5d8 + 0x5ad * -0x1 + -0x2b, FindOrCreateTicketService_1[_0x29c645(0x196)])(_0x2816df), _0x41b498 = {};
                    _0x41b498[_0x29c645(0x1b9)] = !![], _0x29e89f[_0x29c645(0x1dc)](_0x41b498), _0x1fbe5b = _0x1fbe5b[_0x29c645(0x19f)]();
                    for (const _0x17c97a of _0x1fbe5b) {
                        const _0x50ade9 = {};
                        _0x50ade9[_0x29c645(0x1de)] = _0x17c97a['id']['id'], _0x50ade9[_0x29c645(0x1c5)] = _0x5af47f;
                        const _0x4762c1 = {};
                        _0x4762c1[_0x29c645(0x1b2)] = _0x50ade9;
                        const _0x46a939 = yield Message_1[_0x29c645(0x196)][_0x29c645(0x1ec)](_0x4762c1);
                        _0x46a939 && logger_1[_0x29c645(0x19d)][_0x29c645(0x1dd)](_0x55fe79[_0x29c645(0x1b7)](_0x17c97a['id']['id'], _0x55fe79[_0x29c645(0x1e7)]));
                        if (!_0x46a939) {
                            _0x17c97a[_0x29c645(0x1ed)] ? yield (-0x1ce6 + 0x1 * 0x1e16 + -0x130 * 0x1, VerifyMediaMessage_1[_0x29c645(0x196)])(_0x17c97a, _0x29e89f, _0x53a990) : yield (-0x577 * -0x1 + 0x166b + 0xa6 * -0x2b, VerifyMessage_1[_0x29c645(0x196)])(_0x17c97a, _0x29e89f, _0x53a990);
                            const _0x258807 = {};
                            _0x258807[_0x29c645(0x1de)] = _0x17c97a['id']['id'];
                            const _0x93862 = yield Message_1[_0x29c645(0x196)][_0x29c645(0x1ec)]({
                                'where': _0x258807,
                                'include': [
                                    _0x55fe79[_0x29c645(0x189)],
                                    {
                                        'model': Ticket_1[_0x29c645(0x196)],
                                        'as': _0x55fe79[_0x29c645(0x1e6)],
                                        'attributes': [
                                            'id',
                                            _0x55fe79[_0x29c645(0x1f2)],
                                            _0x55fe79[_0x29c645(0x1e4)]
                                        ]
                                    },
                                    {
                                        'model': Message_1[_0x29c645(0x196)],
                                        'as': _0x55fe79[_0x29c645(0x1c6)],
                                        'include': [_0x55fe79[_0x29c645(0x189)]]
                                    }
                                ]
                            });
                            if (_0x93862) {
                                const _0x552741 = {};
                                _0x552741[_0x29c645(0x1ab)] = 0x2, yield _0x93862[_0x29c645(0x1dc)](_0x552741);
                                const {ticket: _0x3b23db} = _0x93862, _0x37567d = {};
                                _0x37567d[_0x29c645(0x1c5)] = _0x3b23db[_0x29c645(0x1c5)], _0x37567d[_0x29c645(0x1ca)] = _0x55fe79[_0x29c645(0x1cf)], _0x37567d[_0x29c645(0x1f0)] = _0x93862, (-0x25 * 0xfb + -0x10e8 * -0x1 + 0x135f, socketEmit_1[_0x29c645(0x196)])(_0x37567d);
                            }
                            logger_1[_0x29c645(0x19d)][_0x29c645(0x1dd)](_0x55fe79[_0x29c645(0x18f)](_0x55fe79[_0x29c645(0x1ac)], _0x17c97a['id']['id']));
                        }
                        yield _0x55fe79[_0x29c645(0x17f)](delay, -0x174 * 0x16 + 0x2f6 + 0x24d2);
                    }
                } else {
                    if (!_0x5203ed[_0x29c645(0x1b9)]) {
                        const _0x3dd14e = {};
                        _0x3dd14e[_0x29c645(0x1a5)] = _0xfe4c6f;
                        let _0x4f2bc8 = yield _0x5203ed[_0x29c645(0x1a3) + _0x29c645(0x184)](_0x3dd14e);
                        const _0x43b785 = yield _0x5203ed[_0x29c645(0x1d1)](), _0x4f3e61 = yield (0x18ca + 0x1e8d + 0x1 * -0x3757, VerifyContact_1[_0x29c645(0x196)])(_0x43b785, _0x5af47f), _0x1a1418 = {};
                        _0x1a1418[_0x29c645(0x193)] = _0x4f3e61, _0x1a1418[_0x29c645(0x198)] = _0x378eba, _0x1a1418[_0x29c645(0x1d4) + _0x29c645(0x1bc)] = _0x5203ed[_0x29c645(0x1d0) + 't'], _0x1a1418[_0x29c645(0x1c5)] = _0x5af47f, _0x1a1418[_0x29c645(0x1ce)] = !![], _0x1a1418[_0x29c645(0x1ae)] = _0x55fe79[_0x29c645(0x1a8)];
                        const _0x4cb977 = yield (-0x6e8 + -0x1 * 0x1d7 + 0x8bf * 0x1, FindOrCreateTicketService_1[_0x29c645(0x196)])(_0x1a1418);
                        _0x4f2bc8 = _0x4f2bc8[_0x29c645(0x19f)]();
                        for (const _0x1a651d of _0x4f2bc8) {
                            const _0x39d944 = {};
                            _0x39d944[_0x29c645(0x1de)] = _0x1a651d['id']['id'], _0x39d944[_0x29c645(0x1c5)] = _0x5af47f;
                            const _0x21bd16 = {};
                            _0x21bd16[_0x29c645(0x1b2)] = _0x39d944;
                            const _0x329c8f = yield Message_1[_0x29c645(0x196)][_0x29c645(0x1ec)](_0x21bd16);
                            _0x329c8f && logger_1[_0x29c645(0x19d)][_0x29c645(0x1dd)](_0x55fe79[_0x29c645(0x18b)](_0x1a651d['id']['id'], _0x55fe79[_0x29c645(0x1e7)]));
                            if (!_0x329c8f) {
                                _0x1a651d[_0x29c645(0x1ed)] ? yield (-0x1 * -0x1c73 + -0x9a9 + 0x82 * -0x25, VerifyMediaMessage_1[_0x29c645(0x196)])(_0x1a651d, _0x4cb977, _0x4f3e61) : yield (0x1 * 0xe6b + 0x653 * -0x5 + -0x2de * -0x6, VerifyMessage_1[_0x29c645(0x196)])(_0x1a651d, _0x4cb977, _0x4f3e61);
                                const _0x51c045 = {};
                                _0x51c045[_0x29c645(0x1de)] = _0x1a651d['id']['id'];
                                const _0x3af7a9 = yield Message_1[_0x29c645(0x196)][_0x29c645(0x1ec)]({
                                    'where': _0x51c045,
                                    'include': [
                                        _0x55fe79[_0x29c645(0x189)],
                                        {
                                            'model': Ticket_1[_0x29c645(0x196)],
                                            'as': _0x55fe79[_0x29c645(0x1e6)],
                                            'attributes': [
                                                'id',
                                                _0x55fe79[_0x29c645(0x1f2)],
                                                _0x55fe79[_0x29c645(0x1e4)]
                                            ]
                                        },
                                        {
                                            'model': Message_1[_0x29c645(0x196)],
                                            'as': _0x55fe79[_0x29c645(0x1c6)],
                                            'include': [_0x55fe79[_0x29c645(0x189)]]
                                        }
                                    ]
                                });
                                if (_0x3af7a9) {
                                    const _0x58ac3b = {};
                                    _0x58ac3b[_0x29c645(0x1ab)] = 0x2, yield _0x3af7a9[_0x29c645(0x1dc)](_0x58ac3b);
                                    const _0x4cb739 = moment_timezone_1[_0x29c645(0x196)][_0x29c645(0x1be)](_0x1a651d[_0x29c645(0x1b3)])['tz'](_0x55fe79[_0x29c645(0x1f4)]), _0x3243b9 = _0x4cb739[_0x29c645(0x195)](_0x55fe79[_0x29c645(0x1e2)]), _0x889b77 = {};
                                    _0x889b77[_0x29c645(0x1ab)] = 0x2, _0x889b77[_0x29c645(0x1c3)] = _0x3243b9, yield _0x3af7a9[_0x29c645(0x1dc)](_0x889b77);
                                    const {ticket: _0x313d02} = _0x3af7a9, _0x28a8b0 = {};
                                    _0x28a8b0[_0x29c645(0x1c5)] = _0x313d02[_0x29c645(0x1c5)], _0x28a8b0[_0x29c645(0x1ca)] = _0x55fe79[_0x29c645(0x1a2)], _0x28a8b0[_0x29c645(0x1f0)] = _0x3af7a9, (0x19bd + -0x1163 + -0x85a, socketEmit_1[_0x29c645(0x196)])(_0x28a8b0);
                                }
                                logger_1[_0x29c645(0x19d)][_0x29c645(0x1dd)](_0x55fe79[_0x29c645(0x1b7)](_0x55fe79[_0x29c645(0x1ac)], _0x1a651d['id']['id']));
                            }
                            yield _0x55fe79[_0x29c645(0x17f)](delay, 0x7 * -0x3c8 + -0x1516 + 0x375e);
                        }
                    }
                }
            }
        } catch (_0x4eedda) {
            logger_1[_0x29c645(0x19d)][_0x29c645(0x1e8)](_0x55fe79[_0x29c645(0x1d7)], _0x4eedda);
        }
    });
exports[_0x5c0410(0x196)] = SyncOldMessagesWbot;