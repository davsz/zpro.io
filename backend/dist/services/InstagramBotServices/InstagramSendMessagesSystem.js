'use strict';
const _0x294123 = _0x2693;
(function (_0xa57fd6, _0x58232c) {
    const _0x216601 = _0x2693, _0x111c2e = _0xa57fd6();
    while (!![]) {
        try {
            const _0x808de0 = parseInt(_0x216601(0x1b8)) / (-0x2 * -0xf3d + -0x251b + 0x6a2) + parseInt(_0x216601(0x1a7)) / (0x838 * -0x4 + 0x991 * -0x1 + -0x1 * -0x2a73) + parseInt(_0x216601(0x14f)) / (-0x137d + 0x1 * -0x6f3 + -0x8d1 * -0x3) + parseInt(_0x216601(0x18b)) / (-0x1 * -0x227f + -0x16 * -0x46 + 0x1 * -0x287f) + parseInt(_0x216601(0x18f)) / (-0x1f65 + 0x3 * 0xaa5 + 0x85 * -0x1) * (parseInt(_0x216601(0x198)) / (0x103 * 0x2 + -0x1 * -0x226a + -0x246a)) + -parseInt(_0x216601(0x179)) / (-0x1 * 0x1827 + -0x133 + 0x1 * 0x1961) + parseInt(_0x216601(0x15a)) / (-0x7 * -0x47b + -0x1972 + -0x5e3) * (-parseInt(_0x216601(0x183)) / (0x1 * 0x629 + -0x1b98 * -0x1 + -0x21b8 * 0x1));
            if (_0x808de0 === _0x58232c)
                break;
            else
                _0x111c2e['push'](_0x111c2e['shift']());
        } catch (_0x5bb73e) {
            _0x111c2e['push'](_0x111c2e['shift']());
        }
    }
}(_0xf4aa, 0x52eb1 + -0x6c0 * 0x8f + 0xadee7));
function _0xf4aa() {
    const _0x526588 = [
        'includes',
        'broadcastV',
        '../../mode',
        'sAsRead',
        'EaoLa',
        'apply',
        'where',
        'BACKEND_UR',
        'HTvkJ',
        'ath',
        'lte',
        '../../util',
        '../../help',
        '7158648hJjrxo',
        'Error\x20send',
        'sleepRando',
        'mpeg',
        'jpeg',
        'JMVXi',
        'nRScJ',
        'qXJIe',
        'eVRgM',
        'sharp',
        '35564517MBHHvs',
        'SsZHu',
        'ers/SetTic',
        ')::\x20',
        'closed',
        'mOwPA',
        'ThEzQ',
        '/public/',
        '1358172nGjNGv',
        'sendMessag',
        'JXmPA',
        'ls/Message',
        '5rvAvDq',
        'createdAt',
        'ciUIL',
        'sequelize',
        'e\x20media',
        'setFfmpegP',
        'item_id',
        'loVbJ',
        'chat:ack',
        '7442346lAhlcq',
        'mp4',
        'public',
        '__importDe',
        'erty',
        'Error\x20mess',
        'dataValues',
        'fault',
        'ers/socket',
        'readFile',
        'Cqria',
        'nant:\x20',
        'njKHx',
        'value',
        'EriIV',
        '2275220HwrFRy',
        'e\x20text',
        'file',
        'assign',
        'default',
        'logger',
        '@ffmpeg-in',
        'staller/ff',
        'next',
        '__awaiter',
        'toFormat',
        'instagram',
        'zduvn',
        'fs/promise',
        'tenantId',
        'hoto',
        'throw',
        '1605206aFsTGd',
        'image',
        'then',
        '\x20|\x20Ticket:',
        'ketMessage',
        'info',
        'ASC',
        'text',
        'UnNiZ',
        'done',
        '\x20message\x20(',
        'XSVhH',
        'id:\x20',
        'mediaUrl',
        'broadcastT',
        'contact',
        'mediaName',
        'ideo',
        'toBuffer',
        'update',
        'split',
        'ptt',
        'body',
        'instagramP',
        'end',
        'reWDg',
        'join',
        'defineProp',
        'age\x20is\x20(te',
        'oice',
        'DbuWb',
        'broadcastP',
        'eVAHd',
        'zoeqZ',
        'error',
        'video',
        '.mp4',
        'wSLBI',
        'KaJPA',
        'Emit',
        'pTUfx',
        'PJDTd',
        'gtWQc',
        'aBrpP',
        'ls/Ticket',
        'muYTE',
        'quotedMsg',
        'audio',
        'NyUVm',
        '4369437jNiYIf',
        'env',
        'mediaType',
        'peg',
        'directThre',
        's/sleepRan',
        'ticket',
        'ext',
        'pending',
        'path',
        'saveToFile',
        '8hmwXQt',
        'crwpx',
        'bQBem',
        'findAll',
        'cuooE',
        'fluent-ffm',
        'chat',
        'sended',
        'tpmPf',
        'jFHIc',
        'domTime',
        's/logger',
        'entity',
        'timestamp',
        'GLDjz',
        'zWAgy',
        '__esModule',
        'mTime'
    ];
    _0xf4aa = function () {
        return _0x526588;
    };
    return _0xf4aa();
}
var __awaiter = this && this[_0x294123(0x1b0)] || function (_0x234850, _0x18181d, _0x3c203c, _0x261f2c) {
        const _0x116d20 = _0x294123, _0x59fb2b = {
                'qXJIe': function (_0x1c6636, _0x39103b) {
                    return _0x1c6636(_0x39103b);
                },
                'nRScJ': function (_0x34ac5e, _0x5fc15c) {
                    return _0x34ac5e instanceof _0x5fc15c;
                },
                'njKHx': function (_0x4b9b57, _0x4a52b7) {
                    return _0x4b9b57(_0x4a52b7);
                },
                'crwpx': function (_0x1b2442, _0x3ba2c8) {
                    return _0x1b2442(_0x3ba2c8);
                },
                'UnNiZ': function (_0x42a019, _0x2211ef) {
                    return _0x42a019(_0x2211ef);
                },
                'wSLBI': _0x116d20(0x1b7),
                'eVRgM': function (_0x1cec6f, _0x2e9e6f) {
                    return _0x1cec6f(_0x2e9e6f);
                },
                'cuooE': function (_0x3af87d, _0x49606f) {
                    return _0x3af87d(_0x49606f);
                }
            };
        function _0x316d0f(_0x31d566) {
            const _0x24f27f = _0x116d20;
            return _0x59fb2b[_0x24f27f(0x17f)](_0x31d566, _0x3c203c) ? _0x31d566 : new _0x3c203c(function (_0x4eded5) {
                const _0xcb3b30 = _0x24f27f;
                _0x59fb2b[_0xcb3b30(0x180)](_0x4eded5, _0x31d566);
            });
        }
        return new (_0x3c203c || (_0x3c203c = Promise))(function (_0x5a20ea, _0x4ac4e1) {
            const _0x3237db = _0x116d20, _0x2e9e02 = {
                    'loVbJ': function (_0xf93ea4, _0x7f8781) {
                        const _0x55a57e = _0x2693;
                        return _0x59fb2b[_0x55a57e(0x1a4)](_0xf93ea4, _0x7f8781);
                    },
                    'EriIV': _0x59fb2b[_0x3237db(0x143)],
                    'Cqria': function (_0x417852, _0x5036a0) {
                        const _0x28170f = _0x3237db;
                        return _0x59fb2b[_0x28170f(0x181)](_0x417852, _0x5036a0);
                    }
                };
            function _0x437ba4(_0x555f46) {
                const _0xacbfef = _0x3237db;
                try {
                    _0x59fb2b[_0xacbfef(0x1a4)](_0xac2e99, _0x261f2c[_0xacbfef(0x1af)](_0x555f46));
                } catch (_0x36d678) {
                    _0x59fb2b[_0xacbfef(0x15b)](_0x4ac4e1, _0x36d678);
                }
            }
            function _0x1a7c1f(_0x34763b) {
                const _0x14f876 = _0x3237db;
                try {
                    _0x2e9e02[_0x14f876(0x196)](_0xac2e99, _0x261f2c[_0x2e9e02[_0x14f876(0x1a6)]](_0x34763b));
                } catch (_0x1691e9) {
                    _0x2e9e02[_0x14f876(0x1a2)](_0x4ac4e1, _0x1691e9);
                }
            }
            function _0xac2e99(_0x497e37) {
                const _0x345d49 = _0x3237db;
                _0x497e37[_0x345d49(0x1c1)] ? _0x59fb2b[_0x345d49(0x1a4)](_0x5a20ea, _0x497e37[_0x345d49(0x1a5)]) : _0x59fb2b[_0x345d49(0x1c0)](_0x316d0f, _0x497e37[_0x345d49(0x1a5)])[_0x345d49(0x1ba)](_0x437ba4, _0x1a7c1f);
            }
            _0x59fb2b[_0x3237db(0x15e)](_0xac2e99, (_0x261f2c = _0x261f2c[_0x3237db(0x171)](_0x234850, _0x18181d || []))[_0x3237db(0x1af)]());
        });
    }, __importDefault = this && this[_0x294123(0x19b) + _0x294123(0x19f)] || function (_0xfcd885) {
        const _0x4621c3 = _0x294123;
        return _0xfcd885 && _0xfcd885[_0x4621c3(0x16a)] ? _0xfcd885 : { 'default': _0xfcd885 };
    };
const _0x2a7ab2 = {};
_0x2a7ab2[_0x294123(0x1a5)] = !![], Object[_0x294123(0x139) + _0x294123(0x19c)](exports, _0x294123(0x16a), _0x2a7ab2);
const promises_1 = require(_0x294123(0x1b4) + 's'), path_1 = require(_0x294123(0x158)), sequelize_1 = require(_0x294123(0x192)), sharp_1 = __importDefault(require(_0x294123(0x182))), SetTicketMessagesAsRead_1 = __importDefault(require(_0x294123(0x178) + _0x294123(0x185) + _0x294123(0x1bc) + _0x294123(0x16f))), socketEmit_1 = __importDefault(require(_0x294123(0x178) + _0x294123(0x1a0) + _0x294123(0x145))), Message_1 = __importDefault(require(_0x294123(0x16e) + _0x294123(0x18e))), Ticket_1 = __importDefault(require(_0x294123(0x16e) + _0x294123(0x14a))), logger_1 = require(_0x294123(0x177) + _0x294123(0x165)), sleepRandomTime_1 = require(_0x294123(0x177) + _0x294123(0x154) + _0x294123(0x164)), fluent_ffmpeg_1 = __importDefault(require(_0x294123(0x15f) + _0x294123(0x152))), ffmpeg_1 = require(_0x294123(0x1ad) + _0x294123(0x1ae) + _0x294123(0x17c)), SendMessagesSystemWbot = (_0x1f3d5a, _0x54b2d8) => __awaiter(void (0x170a * 0x1 + 0x1c52 + 0x13 * -0x2b4), void (0x24b + -0x120a + 0x8b * 0x1d), void (-0x11 * 0x143 + 0x8f1 + -0xc82 * -0x1), function* () {
        const _0x50d1a8 = _0x294123, _0x5d26e2 = {
                'gtWQc': _0x50d1a8(0x199),
                'aBrpP': _0x50d1a8(0x140),
                'GLDjz': _0x50d1a8(0x136),
                'tpmPf': _0x50d1a8(0x157),
                'PJDTd': _0x50d1a8(0x1c7),
                'NyUVm': _0x50d1a8(0x155),
                'zWAgy': _0x50d1a8(0x187),
                'mOwPA': _0x50d1a8(0x1b2),
                'KaJPA': _0x50d1a8(0x14c),
                'EaoLa': _0x50d1a8(0x190),
                'DbuWb': _0x50d1a8(0x1be),
                'ThEzQ': _0x50d1a8(0x160),
                'jFHIc': _0x50d1a8(0x1bf),
                'muYTE': _0x50d1a8(0x19a),
                'JXmPA': function (_0x2e7da1, _0x6696a1) {
                    return _0x2e7da1 === _0x6696a1;
                },
                'JMVXi': _0x50d1a8(0x14d),
                'ciUIL': _0x50d1a8(0x133),
                'zduvn': function (_0x578ab5, _0x414c3) {
                    return _0x578ab5 === _0x414c3;
                },
                'eVAHd': _0x50d1a8(0x1b9),
                'bQBem': _0x50d1a8(0x141),
                'pTUfx': _0x50d1a8(0x18c) + _0x50d1a8(0x193),
                'XSVhH': _0x50d1a8(0x18c) + _0x50d1a8(0x1a8),
                'reWDg': _0x50d1a8(0x161),
                'SsZHu': _0x50d1a8(0x197),
                'HTvkJ': function (_0x52aafa, _0x48ddcb) {
                    return _0x52aafa(_0x48ddcb);
                },
                'zoeqZ': function (_0x350e65, _0x2250bb) {
                    return _0x350e65(_0x2250bb);
                }
            }, _0x5b77bf = { [sequelize_1['Op']['is']]: null }, _0xa28025 = {
                'fromMe': !![],
                'messageId': _0x5b77bf,
                'status': _0x5d26e2[_0x50d1a8(0x162)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x50d1a8(0x176)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0x5e526c = yield Message_1[_0x50d1a8(0x1ab)][_0x50d1a8(0x15d)]({
                'where': _0xa28025,
                'include': [
                    _0x5d26e2[_0x50d1a8(0x147)],
                    {
                        'model': Ticket_1[_0x50d1a8(0x1ab)],
                        'as': _0x5d26e2[_0x50d1a8(0x14e)],
                        'where': {
                            'tenantId': _0x54b2d8,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x5d26e2[_0x50d1a8(0x169)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x5d26e2[_0x50d1a8(0x188)],
                            'whatsappId': _0x1f3d5a['id']
                        },
                        'include': [_0x5d26e2[_0x50d1a8(0x147)]]
                    },
                    {
                        'model': Message_1[_0x50d1a8(0x1ab)],
                        'as': _0x5d26e2[_0x50d1a8(0x144)],
                        'include': [_0x5d26e2[_0x50d1a8(0x147)]]
                    }
                ],
                'order': [[
                        _0x5d26e2[_0x50d1a8(0x170)],
                        _0x5d26e2[_0x50d1a8(0x13c)]
                    ]]
            });
        let _0x4fa9f3;
        for (const _0x37c36a of _0x5e526c) {
            const _0x52f71a = _0x37c36a, {ticket: _0x1560b3} = _0x52f71a, _0x538a85 = _0x1560b3[_0x50d1a8(0x1c7)][_0x50d1a8(0x135) + 'K'], _0x1885e0 = yield _0x1f3d5a[_0x50d1a8(0x166)][_0x50d1a8(0x153) + 'ad']([_0x538a85]);
            try {
                if (![
                        _0x5d26e2[_0x50d1a8(0x189)],
                        _0x5d26e2[_0x50d1a8(0x163)]
                    ][_0x50d1a8(0x16c)](_0x52f71a[_0x50d1a8(0x151)]) && _0x52f71a[_0x50d1a8(0x1c8)]) {
                    const _0x2e2b8c = (-0x2c2 + -0x4 * -0x885 + 0xd3 * -0x26, path_1[_0x50d1a8(0x138)])(__dirname, '..', '..', '..', _0x5d26e2[_0x50d1a8(0x14b)]), _0x400ec8 = (-0x374 + -0x1d8 * 0x8 + 0x1234, path_1[_0x50d1a8(0x138)])(_0x2e2b8c, _0x52f71a[_0x50d1a8(0x1c8)]), _0x3e3a8e = yield (0x1d * -0x3b + -0xbbd + 0x2 * 0x936, promises_1[_0x50d1a8(0x1a1)])(_0x400ec8);
                    if (_0x5d26e2[_0x50d1a8(0x18d)](_0x52f71a[_0x50d1a8(0x151)], _0x5d26e2[_0x50d1a8(0x17e)]) || _0x5d26e2[_0x50d1a8(0x18d)](_0x52f71a[_0x50d1a8(0x151)], _0x5d26e2[_0x50d1a8(0x191)])) {
                        const _0xb0740e = _0x52f71a[_0x50d1a8(0x1c8)][_0x50d1a8(0x132)]('.'), _0x5c9f6d = (-0x14 * 0xb5 + 0x25ae + -0x178a, path_1[_0x50d1a8(0x138)])(_0x2e2b8c, _0xb0740e[0x2b5 + -0x20e7 * 0x1 + 0x305 * 0xa] + _0x50d1a8(0x142));
                        yield new Promise((_0x3e967c, _0x54960f) => {
                            const _0x1d8f17 = _0x50d1a8;
                            fluent_ffmpeg_1[_0x1d8f17(0x1ab)][_0x1d8f17(0x194) + _0x1d8f17(0x175)](ffmpeg_1[_0x1d8f17(0x158)]), (-0x104e + 0x1 * -0xfd9 + 0x2027, fluent_ffmpeg_1[_0x1d8f17(0x1ab)])(_0x400ec8)[_0x1d8f17(0x1b1)](_0x5d26e2[_0x1d8f17(0x148)])['on'](_0x5d26e2[_0x1d8f17(0x149)], _0x3a5f2f => _0x54960f(_0x3a5f2f))['on'](_0x5d26e2[_0x1d8f17(0x168)], () => _0x3e967c(!![]))[_0x1d8f17(0x159)](_0x5c9f6d);
                        });
                        const _0x5ba367 = yield (0x265a + 0x1798 + -0x3df2, promises_1[_0x50d1a8(0x1a1)])(_0x5c9f6d), _0x14ffee = {};
                        _0x14ffee[_0x50d1a8(0x1a9)] = _0x5ba367, _0x4fa9f3 = yield _0x1885e0[_0x50d1a8(0x16d) + _0x50d1a8(0x13b)](_0x14ffee);
                    }
                    if (_0x5d26e2[_0x50d1a8(0x1b3)](_0x52f71a[_0x50d1a8(0x151)], _0x5d26e2[_0x50d1a8(0x13e)])) {
                        const _0x836883 = yield (-0x1 * 0x204f + 0x2032 + 0x1d * 0x1, sharp_1[_0x50d1a8(0x1ab)])(_0x3e3a8e)[_0x50d1a8(0x17d)]()[_0x50d1a8(0x1ca)](), _0x58646c = {};
                        _0x58646c[_0x50d1a8(0x1a9)] = _0x836883, _0x4fa9f3 = yield _0x1885e0[_0x50d1a8(0x13d) + _0x50d1a8(0x1b6)](_0x58646c);
                    }
                    if (_0x5d26e2[_0x50d1a8(0x18d)](_0x52f71a[_0x50d1a8(0x151)], _0x5d26e2[_0x50d1a8(0x15c)])) {
                        const _0x125a12 = {};
                        _0x125a12[_0x50d1a8(0x141)] = _0x3e3a8e, _0x4fa9f3 = yield _0x1885e0[_0x50d1a8(0x16d) + _0x50d1a8(0x1c9)](_0x125a12);
                    } else {
                        const _0x5a642b = process[_0x50d1a8(0x150)][_0x50d1a8(0x173) + 'L'] + _0x50d1a8(0x18a) + _0x52f71a[_0x50d1a8(0x1c8)];
                        _0x4fa9f3 = yield _0x1885e0[_0x50d1a8(0x1c6) + _0x50d1a8(0x156)](_0x5a642b);
                    }
                    logger_1[_0x50d1a8(0x1ac)][_0x50d1a8(0x1bd)](_0x5d26e2[_0x50d1a8(0x146)]);
                }
                [
                    _0x5d26e2[_0x50d1a8(0x189)],
                    _0x5d26e2[_0x50d1a8(0x163)]
                ][_0x50d1a8(0x16c)](_0x52f71a[_0x50d1a8(0x151)]) && !_0x52f71a[_0x50d1a8(0x1c8)] && (_0x4fa9f3 = yield _0x1885e0[_0x50d1a8(0x1c6) + _0x50d1a8(0x156)](_0x52f71a[_0x50d1a8(0x134)]), logger_1[_0x50d1a8(0x1ac)][_0x50d1a8(0x1bd)](_0x5d26e2[_0x50d1a8(0x1c3)]));
                const _0x14421f = Object[_0x50d1a8(0x1aa)](Object[_0x50d1a8(0x1aa)](Object[_0x50d1a8(0x1aa)]({}, _0x52f71a), _0x4fa9f3), {
                        'id': _0x52f71a['id'],
                        'timestamp': _0x52f71a[_0x50d1a8(0x167)],
                        'messageId': _0x4fa9f3[_0x50d1a8(0x195)],
                        'status': _0x5d26e2[_0x50d1a8(0x137)],
                        'ack': 0x2
                    }), _0x3180ef = {};
                _0x3180ef['id'] = _0x52f71a['id'];
                const _0x1c99da = {};
                _0x1c99da[_0x50d1a8(0x172)] = _0x3180ef, yield Message_1[_0x50d1a8(0x1ab)][_0x50d1a8(0x131)](Object[_0x50d1a8(0x1aa)]({}, _0x14421f), _0x1c99da), (0x16ed + 0x45 * 0xa + -0x199f, socketEmit_1[_0x50d1a8(0x1ab)])({
                    'tenantId': _0x1560b3[_0x50d1a8(0x1b5)],
                    'type': _0x5d26e2[_0x50d1a8(0x184)],
                    'payload': Object[_0x50d1a8(0x1aa)](Object[_0x50d1a8(0x1aa)]({}, _0x52f71a[_0x50d1a8(0x19e)]), {
                        'mediaUrl': _0x52f71a[_0x50d1a8(0x1c5)],
                        'id': _0x52f71a['id'],
                        'timestamp': _0x52f71a[_0x50d1a8(0x167)],
                        'messageId': _0x4fa9f3[_0x50d1a8(0x195)],
                        'status': _0x5d26e2[_0x50d1a8(0x137)],
                        'ack': 0x2
                    })
                }), yield (0xf * -0x138 + 0x7d * 0xa + -0x1ea * -0x7, SetTicketMessagesAsRead_1[_0x50d1a8(0x1ab)])(_0x1560b3), yield (0x230a + 0x1 * -0xdc + 0x7 * -0x4e2, sleepRandomTime_1[_0x50d1a8(0x17b) + _0x50d1a8(0x16b)])({
                    'minMilliseconds': _0x5d26e2[_0x50d1a8(0x174)](Number, 0x1 * 0x3e + 0xee * 0x19 + -0xfac),
                    'maxMilliseconds': _0x5d26e2[_0x50d1a8(0x13f)](Number, 0x24af + 0xd99 + -0x2690)
                });
            } catch (_0x587cfb) {
                const _0x28dcf7 = _0x52f71a['id'], _0xecaf13 = _0x52f71a[_0x50d1a8(0x155)]['id'];
                logger_1[_0x50d1a8(0x1ac)][_0x50d1a8(0x140)](_0x50d1a8(0x19d) + _0x50d1a8(0x13a) + _0x50d1a8(0x1a3) + _0x54b2d8 + (_0x50d1a8(0x1bb) + '\x20') + _0xecaf13 + ')'), logger_1[_0x50d1a8(0x1ac)][_0x50d1a8(0x140)](_0x50d1a8(0x17a) + _0x50d1a8(0x1c2) + _0x50d1a8(0x1c4) + _0x28dcf7 + _0x50d1a8(0x186) + _0x587cfb);
            }
        }
    });
function _0x2693(_0x4c3dd6, _0x41502c) {
    const _0x9243a1 = _0xf4aa();
    return _0x2693 = function (_0x54e4fe, _0x3594be) {
        _0x54e4fe = _0x54e4fe - (0x1e44 + 0x2559 + -0x1b4 * 0x27);
        let _0x43a5d7 = _0x9243a1[_0x54e4fe];
        return _0x43a5d7;
    }, _0x2693(_0x4c3dd6, _0x41502c);
}
exports[_0x294123(0x1ab)] = SendMessagesSystemWbot;