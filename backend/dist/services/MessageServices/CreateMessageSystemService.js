'use strict';
const _0x534dcc = _0x4b2e;
(function (_0x24afb8, _0x195765) {
    const _0x295b9c = _0x4b2e, _0x2f7e21 = _0x24afb8();
    while (!![]) {
        try {
            const _0x353e9a = parseInt(_0x295b9c(0x191)) / (0x6d * -0x1b + -0x7 * 0x22f + -0x1ac9 * -0x1) * (-parseInt(_0x295b9c(0x258)) / (-0x101b + 0x1f51 + -0xf34)) + -parseInt(_0x295b9c(0x19b)) / (-0xf3d + -0x41 * 0x1b + -0x1 * -0x161b) * (parseInt(_0x295b9c(0x1e0)) / (-0x183e * -0x1 + 0x22f8 + -0x1d99 * 0x2)) + parseInt(_0x295b9c(0x1b6)) / (-0x71 * 0x3d + -0x6 * -0x95 + 0xbba * 0x2) * (parseInt(_0x295b9c(0x222)) / (-0x804 + 0x15d7 + 0xdcd * -0x1)) + parseInt(_0x295b9c(0x1d9)) / (-0x2376 + -0x1723 + 0x3aa0) * (-parseInt(_0x295b9c(0x201)) / (0x14ca + 0x1 * -0x1855 + -0x3 * -0x131)) + -parseInt(_0x295b9c(0x1c7)) / (0x6 * -0xbf + 0x2aa + 0x1 * 0x1d9) + parseInt(_0x295b9c(0x21c)) / (-0x1 * -0xe35 + 0x204d * -0x1 + 0x1222) + parseInt(_0x295b9c(0x1e9)) / (-0x1f0d * 0x1 + -0x779 + -0x2691 * -0x1);
            if (_0x353e9a === _0x195765)
                break;
            else
                _0x2f7e21['push'](_0x2f7e21['shift']());
        } catch (_0x55b3ec) {
            _0x2f7e21['push'](_0x2f7e21['shift']());
        }
    }
}(_0x382e, -0xc6c14 + -0x131152 + 0x290f8c));
function _0x4b2e(_0x3a279e, _0x3b88ec) {
    const _0x5490a4 = _0x382e();
    return _0x4b2e = function (_0xa7b117, _0x186f24) {
        _0xa7b117 = _0xa7b117 - (0x209 * -0x2 + -0x100d + 0x15af);
        let _0x21fb81 = _0x5490a4[_0xa7b117];
        return _0x21fb81;
    }, _0x4b2e(_0x3a279e, _0x3b88ec);
}
var __awaiter = this && this[_0x534dcc(0x1b9)] || function (_0x40dc20, _0x18a95b, _0x4ba188, _0x358953) {
        const _0x54e86b = _0x534dcc, _0x327ce0 = {
                'LHvkL': function (_0x55f56c, _0x3c8c80) {
                    return _0x55f56c(_0x3c8c80);
                },
                'PZcdu': function (_0x2d0a92, _0xf49dfd) {
                    return _0x2d0a92 instanceof _0xf49dfd;
                },
                'OFXmh': function (_0x55af91, _0x1be959) {
                    return _0x55af91(_0x1be959);
                },
                'dIkAB': _0x54e86b(0x1da)
            };
        function _0x31396a(_0x1d9d09) {
            const _0x2992fe = _0x54e86b, _0x19f476 = {
                    'eFUuS': function (_0x2ae1b9, _0x5ab79b) {
                        const _0x55837c = _0x4b2e;
                        return _0x327ce0[_0x55837c(0x1ed)](_0x2ae1b9, _0x5ab79b);
                    }
                };
            return _0x327ce0[_0x2992fe(0x21a)](_0x1d9d09, _0x4ba188) ? _0x1d9d09 : new _0x4ba188(function (_0x1ba240) {
                const _0x4d3372 = _0x2992fe;
                _0x19f476[_0x4d3372(0x216)](_0x1ba240, _0x1d9d09);
            });
        }
        return new (_0x4ba188 || (_0x4ba188 = Promise))(function (_0x34c9a5, _0x159148) {
            const _0x4d22c9 = _0x54e86b, _0x415118 = {
                    'AyGoX': function (_0x11e0d8, _0x3ceced) {
                        const _0x3d4018 = _0x4b2e;
                        return _0x327ce0[_0x3d4018(0x1e2)](_0x11e0d8, _0x3ceced);
                    },
                    'BvGXR': _0x327ce0[_0x4d22c9(0x1f9)]
                };
            function _0x2c346a(_0x18daf8) {
                const _0x426619 = _0x4d22c9;
                try {
                    _0x327ce0[_0x426619(0x1ed)](_0x1336ad, _0x358953[_0x426619(0x250)](_0x18daf8));
                } catch (_0x482569) {
                    _0x327ce0[_0x426619(0x1e2)](_0x159148, _0x482569);
                }
            }
            function _0x2fd79e(_0x239772) {
                const _0xd95679 = _0x4d22c9;
                try {
                    _0x415118[_0xd95679(0x1f5)](_0x1336ad, _0x358953[_0x415118[_0xd95679(0x22d)]](_0x239772));
                } catch (_0x3ad856) {
                    _0x415118[_0xd95679(0x1f5)](_0x159148, _0x3ad856);
                }
            }
            function _0x1336ad(_0x4b9c29) {
                const _0x56c568 = _0x4d22c9;
                _0x4b9c29[_0x56c568(0x1e1)] ? _0x327ce0[_0x56c568(0x1ed)](_0x34c9a5, _0x4b9c29[_0x56c568(0x21d)]) : _0x327ce0[_0x56c568(0x1ed)](_0x31396a, _0x4b9c29[_0x56c568(0x21d)])[_0x56c568(0x230)](_0x2c346a, _0x2fd79e);
            }
            _0x327ce0[_0x4d22c9(0x1ed)](_0x1336ad, (_0x358953 = _0x358953[_0x4d22c9(0x1f6)](_0x40dc20, _0x18a95b || []))[_0x4d22c9(0x250)]());
        });
    }, __importDefault = this && this[_0x534dcc(0x1ba) + _0x534dcc(0x1ae)] || function (_0x3957c8) {
        const _0x4779ce = _0x534dcc;
        return _0x3957c8 && _0x3957c8[_0x4779ce(0x1b3)] ? _0x3957c8 : { 'default': _0x3957c8 };
    };
const _0x2a2879 = {};
_0x2a2879[_0x534dcc(0x21d)] = !![], Object[_0x534dcc(0x1ac) + _0x534dcc(0x1b4)](exports, _0x534dcc(0x1b3), _0x2a2879);
const fs_1 = __importDefault(require('fs')), path_1 = require(_0x534dcc(0x1b0)), axios_1 = __importDefault(require(_0x534dcc(0x246))), mime_1 = __importDefault(require(_0x534dcc(0x237))), uuid_1 = require(_0x534dcc(0x190)), logger_1 = require(_0x534dcc(0x226) + _0x534dcc(0x239)), Ticket_1 = __importDefault(require(_0x534dcc(0x224) + _0x534dcc(0x19d))), Message_1 = __importDefault(require(_0x534dcc(0x224) + _0x534dcc(0x1c3))), socketEmit_1 = __importDefault(require(_0x534dcc(0x196) + _0x534dcc(0x1f0) + _0x534dcc(0x195))), Queue_1 = __importDefault(require(_0x534dcc(0x1a7) + _0x534dcc(0x248))), pupa_1 = require(_0x534dcc(0x226) + _0x534dcc(0x1d1)), downloadMedia = _0x59c3d9 => __awaiter(void (0x29c + 0x9c * -0x12 + 0x85c), void (-0x1d * -0x4d + -0x712 + 0x2f * -0x9), void (0x238d + -0x1086 + -0x1307), function* () {
        const _0x272c19 = _0x534dcc, _0x546f31 = {
                'ZKHvg': function (_0x28dd3f, _0x40d078) {
                    return _0x28dd3f(_0x40d078);
                },
                'rILLV': _0x272c19(0x19e) + _0x272c19(0x214),
                'atOqt': _0x272c19(0x1c1),
                'QIUlt': _0x272c19(0x24e),
                'piCVS': _0x272c19(0x1f2),
                'ypcbZ': _0x272c19(0x207) + 'pe',
                'XtyPT': _0x272c19(0x1a1),
                'plsgU': function (_0x36ab54, _0x3694f5) {
                    return _0x36ab54 === _0x3694f5;
                },
                'LoqHx': _0x272c19(0x21f) + _0x272c19(0x22a),
                'KBUWo': function (_0x5685e8, _0x20cfbb) {
                    return _0x5685e8 === _0x20cfbb;
                },
                'jIrSf': function (_0xd1ddb8, _0x3ab3d8) {
                    return _0xd1ddb8 === _0x3ab3d8;
                },
                'CkHMw': _0x272c19(0x1fb) + 'I'
            };
        var _0x23c1ff;
        try {
            const _0x412d81 = {};
            _0x412d81[_0x272c19(0x24a) + 'pe'] = _0x546f31[_0x272c19(0x1e7)];
            const _0xbff24f = yield axios_1[_0x272c19(0x1a2)][_0x272c19(0x22e)](_0x59c3d9[_0x272c19(0x1b2)], _0x412d81), _0x452908 = _0xbff24f[_0x272c19(0x252)][_0x546f31[_0x272c19(0x249)]], _0x4e0723 = mime_1[_0x272c19(0x1a2)], _0xe9bf43 = _0x4e0723[_0x272c19(0x1cc)](_0x452908), _0x4b848c = (0x264b + 0x247 * 0xd + -0x43e6, uuid_1['v4'])(), _0x5e7f51 = (0x1f3e + 0x8e7 + -0xef * 0x2b, path_1[_0x272c19(0x20b)])(__dirname, '..', '..', '..', _0x546f31[_0x272c19(0x1d3)]), _0x5e460f = _0x4b848c + '.' + _0xe9bf43, _0x39be89 = (0x1427 + 0x1 * -0x1343 + -0xe4, path_1[_0x272c19(0x20b)])(_0x5e7f51, _0x5e460f), _0x21ced3 = {};
            _0x21ced3[_0x272c19(0x211) + 'me'] = _0x5e460f, _0x21ced3[_0x272c19(0x1a8)] = _0x5e460f, _0x21ced3[_0x272c19(0x232)] = _0xe9bf43;
            const _0x36e213 = _0x21ced3;
            return yield new Promise((_0x31e14e, _0x3384a8) => {
                const _0x574c95 = _0x272c19;
                _0xbff24f[_0x574c95(0x215)][_0x574c95(0x1be)](fs_1[_0x574c95(0x1a2)][_0x574c95(0x1c5) + _0x574c95(0x1bb)](_0x39be89))['on'](_0x546f31[_0x574c95(0x23c)], () => __awaiter(void (-0xcf2 + 0x4cf * -0x2 + -0x8 * -0x2d2), void (0x12f * 0xd + 0x7 * 0x2f + -0x61 * 0x2c), void (-0x901 + 0x1c6c + -0x136b), function* () {
                    const _0x2c5a25 = _0x574c95;
                    _0x546f31[_0x2c5a25(0x1e5)](_0x31e14e, _0x36e213);
                }))['on'](_0x546f31[_0x574c95(0x22c)], _0x5abc86 => {
                    const _0x188aa9 = _0x574c95;
                    console[_0x188aa9(0x24e)](_0x546f31[_0x188aa9(0x19f)], _0x5abc86);
                    const _0x22e046 = {};
                    _0x22e046[_0x188aa9(0x235)] = !![], fs_1[_0x188aa9(0x1a2)][_0x188aa9(0x1ca)](_0x39be89, _0x22e046), _0x546f31[_0x188aa9(0x1e5)](_0x3384a8, new Error(_0x5abc86));
                });
            }), _0x36e213;
        } catch (_0xbaf214) {
            if (_0x546f31[_0x272c19(0x256)](_0xbaf214[_0x272c19(0x1b8)][_0x272c19(0x234)], 0x11f4 + -0x1d78 * 0x1 + -0x1a3 * -0x8)) {
                const _0x2f4455 = {};
                _0x2f4455[_0x272c19(0x1d0)] = -(0x2397 + -0x2a5 + -0x20f1), _0x2f4455[_0x272c19(0x1c2)] = _0x59c3d9[_0x272c19(0x1c2)], _0x2f4455[_0x272c19(0x254)] = '', _0x2f4455[_0x272c19(0x223)] = _0x59c3d9[_0x272c19(0x223)], _0x2f4455[_0x272c19(0x1ab) + 'y'] = _0x59c3d9[_0x272c19(0x1ab) + 'y'], _0x2f4455[_0x272c19(0x24e)] = _0xbaf214[_0x272c19(0x20d)], _0x2f4455[_0x272c19(0x1de)] = _0x59c3d9[_0x272c19(0x20f)][_0x272c19(0x1de)], _0x2f4455[_0x272c19(0x1d7)] = _0x546f31[_0x272c19(0x1c9)];
                const _0xb035d9 = _0x2f4455;
                if (_0x546f31[_0x272c19(0x1df)](_0x23c1ff = _0x546f31[_0x272c19(0x1df)](_0x59c3d9, null) || _0x546f31[_0x272c19(0x1dc)](_0x59c3d9, void (0x8 * -0x408 + 0xd * -0x1be + -0x36e6 * -0x1)) ? void (0xaf5 * 0x2 + 0xb * -0x287 + 0x1 * 0x5e3) : _0x59c3d9[_0x272c19(0x20f)], null) || _0x546f31[_0x272c19(0x256)](_0x23c1ff, void (-0x1cf8 + 0x334 * 0x2 + 0x130 * 0x13)) ? void (-0x4 * -0x6d5 + 0x1296 + 0x6 * -0x7a7) : _0x23c1ff[_0x272c19(0x218) + _0x272c19(0x1a0)]) {
                    const _0x1d68f5 = {};
                    _0x1d68f5[_0x272c19(0x192)] = _0x59c3d9[_0x272c19(0x20f)][_0x272c19(0x218) + _0x272c19(0x1a0)], _0x1d68f5[_0x272c19(0x1d7)] = _0xb035d9[_0x272c19(0x1d7)], _0x1d68f5[_0x272c19(0x1fc)] = _0xb035d9, Queue_1[_0x272c19(0x1a2)][_0x272c19(0x199)](_0x546f31[_0x272c19(0x1c0)], _0x1d68f5);
                }
                return {};
            }
            throw new Error(_0xbaf214);
        }
    });
function formatarMensagem(_0x21ee72) {
    const _0x56bf96 = _0x534dcc, _0x185737 = {};
    _0x185737[_0x56bf96(0x1b1)] = function (_0x14f611, _0x270cfb) {
        return _0x14f611 + _0x270cfb;
    }, _0x185737[_0x56bf96(0x20a)] = function (_0xa3018f, _0x4a5705) {
        return _0xa3018f > _0x4a5705;
    }, _0x185737[_0x56bf96(0x228)] = _0x56bf96(0x24c), _0x185737[_0x56bf96(0x20e)] = _0x56bf96(0x19c), _0x185737[_0x56bf96(0x1ee)] = _0x56bf96(0x24f);
    const _0x3f12f4 = _0x185737;
    let _0x80d78c = '';
    if (_0x21ee72[_0x56bf96(0x1c2)]) {
        const _0x2f12cb = _0x21ee72[_0x56bf96(0x1c2)][_0x56bf96(0x240)](/\n/g, '\x20')[_0x56bf96(0x1a3)](), _0x497c1e = _0x2f12cb[_0x56bf96(0x257)](','), _0x41534f = _0x3f12f4[_0x56bf96(0x20a)](_0x497c1e, -(-0x1057 + -0x1 * 0x2e9 + 0x3 * 0x66b)) ? _0x2f12cb[_0x56bf96(0x1db)](-0x2dc + 0x1 * -0x20b7 + 0x7 * 0x515, _0x497c1e) : _0x2f12cb;
        _0x80d78c += _0x56bf96(0x1e8) + _0x41534f + ',\x20';
    }
    const _0x251d86 = [
        _0x3f12f4[_0x56bf96(0x228)],
        _0x3f12f4[_0x56bf96(0x20e)],
        _0x3f12f4[_0x56bf96(0x1ee)]
    ];
    return _0x251d86[_0x56bf96(0x1c8)]((_0x2193ce, _0x3a9779) => {
        const _0x22d6db = _0x56bf96;
        _0x21ee72[_0x2193ce] && (_0x80d78c += _0x22d6db(0x1af) + _0x3f12f4[_0x22d6db(0x1b1)](_0x3a9779, -0x2055 + -0x2323 + 0x4379) + ':\x20' + _0x21ee72[_0x2193ce] + ',\x20');
    }), _0x80d78c[_0x56bf96(0x1c6)](',\x20') && (_0x80d78c = _0x80d78c[_0x56bf96(0x1db)](0x27 * -0xd5 + 0x1475 + 0xbfe, -(0x1 * -0x20d7 + -0x1d1c + 0x1 * 0x3df5))), _0x80d78c;
}
const CreateMessageSystemService = ({
    msg: _0x1840de,
    tenantId: _0x43b66b,
    medias: _0x2e2d18,
    ticket: _0x3e6a97,
    userId: _0x2c34ad,
    scheduleDate: _0x34ef7d,
    sendType: _0x33c675,
    status: _0x5178e6,
    idFront: _0x2dd13b,
    reaction: _0xd46d51,
    isSticker: _0x1b317e,
    templateName: _0x47e12a,
    templateLanguage: _0x5d8864,
    button1: _0x2c9798,
    button2: _0x3e3515,
    button3: _0x44d341,
    header: _0x1bf272,
    footer: _0x23a4a7,
    button_text: _0x2b9895,
    sections: _0x2c38db,
    sectionTitle: _0x29118a
}) => __awaiter(void (0xb90 + 0xb7f + -0x170f), void (-0xe09 * 0x1 + 0x1 * -0x9d + 0xea6), void (-0x1e79 + 0x59f * -0x3 + 0x2 * 0x17ab), function* () {
    const _0x16f2f5 = _0x534dcc, _0x5e8f44 = {
            'GYyLv': _0x16f2f5(0x1f8),
            'oaHEm': _0x16f2f5(0x205),
            'AwSCh': _0x16f2f5(0x1f4),
            'qAKTI': _0x16f2f5(0x204) + _0x16f2f5(0x213) + _0x16f2f5(0x1d4),
            'ncbit': _0x16f2f5(0x1a4) + 'e',
            'asxEY': function (_0x14c066, _0x2bd51e) {
                return _0x14c066 === _0x2bd51e;
            },
            'VMIwa': _0x16f2f5(0x247),
            'lmZJf': function (_0x2b0805, _0x470503) {
                return _0x2b0805 === _0x470503;
            },
            'iGNPh': _0x16f2f5(0x244),
            'NjPMp': function (_0x44df52, _0xf4623b) {
                return _0x44df52 === _0xf4623b;
            },
            'ZJQEn': function (_0x170144, _0x3bd7a7) {
                return _0x170144 === _0x3bd7a7;
            },
            'HRNBz': function (_0x2462ed, _0x24404d) {
                return _0x2462ed === _0x24404d;
            },
            'VryMh': function (_0x5195a1, _0x1991cb) {
                return _0x5195a1 === _0x1991cb;
            },
            'iouSa': function (_0x20c355, _0xe579a0) {
                return _0x20c355 === _0xe579a0;
            },
            'TFumI': function (_0x56b91f, _0x300936) {
                return _0x56b91f === _0x300936;
            },
            'fylrU': function (_0x37634e, _0x13c590) {
                return _0x37634e === _0x13c590;
            },
            'bxQdc': function (_0x3e213d, _0x4309c0) {
                return _0x3e213d === _0x4309c0;
            },
            'nIwJf': function (_0xd6633e, _0x57053c) {
                return _0xd6633e === _0x57053c;
            },
            'ymMam': function (_0x3c0541, _0x3b25f4) {
                return _0x3c0541 === _0x3b25f4;
            },
            'dxaOx': function (_0x12f6b9, _0x3af596) {
                return _0x12f6b9 === _0x3af596;
            },
            'mGqXH': function (_0x5a262f, _0x37d0fb) {
                return _0x5a262f === _0x37d0fb;
            },
            'DKMZv': function (_0x3d73df, _0x10423e) {
                return _0x3d73df === _0x10423e;
            },
            'ahacz': function (_0x149b49, _0x4e0e16) {
                return _0x149b49 === _0x4e0e16;
            },
            'nWHkL': function (_0x5daaba, _0x3f127e) {
                return _0x5daaba(_0x3f127e);
            },
            'bZFdz': function (_0x558ea1, _0x37dbb7) {
                return _0x558ea1 === _0x37dbb7;
            },
            'VFFVa': _0x16f2f5(0x210),
            'OPmsk': _0x16f2f5(0x220),
            'GOrHM': _0x16f2f5(0x255),
            'NKCgs': _0x16f2f5(0x219),
            'bdAda': function (_0xb0ac3c, _0x4f4c23) {
                return _0xb0ac3c <= _0x4f4c23;
            },
            'ZuszD': function (_0x3303d4, _0x4445ff) {
                return _0x3303d4 && _0x4445ff;
            },
            'JlnBf': _0x16f2f5(0x1fa) + _0x16f2f5(0x1f1) + _0x16f2f5(0x1cd)
        };
    var _0x322ccd, _0x29c656, _0x4f3ff6, _0x324d19, _0x513708, _0x3a030b, _0x4f8584;
    const _0x486159 = {
        'ticketId': _0x3e6a97['id'],
        'body': _0x1840de[_0x16f2f5(0x1c2)],
        'contactId': _0x3e6a97[_0x16f2f5(0x1d6)],
        'fromMe': _0x5e8f44[_0x16f2f5(0x227)](_0x33c675, _0x5e8f44[_0x16f2f5(0x229)]) ? !![] : _0x5e8f44[_0x16f2f5(0x227)](_0x1840de, null) || _0x5e8f44[_0x16f2f5(0x1d8)](_0x1840de, void (-0xd60 + -0xc * 0x239 + 0x280c)) ? void (-0x168a + 0x1 * -0x1121 + -0x1 * -0x27ab) : _0x1840de[_0x16f2f5(0x253)],
        'read': !![],
        'mediaType': _0x5e8f44[_0x16f2f5(0x198)],
        'mediaUrl': undefined,
        'timestamp': new Date()[_0x16f2f5(0x1ad)](),
        'quotedMsgId': _0x5e8f44[_0x16f2f5(0x227)](_0x322ccd = _0x5e8f44[_0x16f2f5(0x227)](_0x1840de, null) || _0x5e8f44[_0x16f2f5(0x251)](_0x1840de, void (-0xeab * -0x2 + 0x15c3 * -0x1 + 0x793 * -0x1)) ? void (-0x1 * -0x1a1e + 0x1a7 + 0x1 * -0x1bc5) : _0x1840de[_0x16f2f5(0x1f4)], null) || _0x5e8f44[_0x16f2f5(0x251)](_0x322ccd, void (-0x1a91 + 0x1 * 0x2666 + -0x1 * 0xbd5)) ? void (-0x944 + -0x1 * -0x313 + 0x631 * 0x1) : _0x322ccd['id'],
        'userId': _0x2c34ad,
        'scheduleDate': _0x34ef7d,
        'sendType': _0x33c675,
        'status': _0x5178e6,
        'tenantId': _0x43b66b,
        'idFront': _0x2dd13b,
        'reaction': _0xd46d51,
        'isSticker': _0x1b317e,
        'templateName': _0x47e12a,
        'templateLanguage': _0x5d8864,
        'button1': _0x2c9798,
        'button2': _0x3e3515,
        'button3': _0x44d341,
        'header': _0x1bf272,
        'footer': _0x23a4a7,
        'button_text': _0x2b9895,
        'sections': _0x2c38db,
        'sectionTitle': _0x29118a
    };
    try {
        _0x486159[_0x16f2f5(0x1c2)] = (0x1 * -0x1143 + -0x277 * -0xd + -0xec8, pupa_1[_0x16f2f5(0x1ec)])(_0x1840de[_0x16f2f5(0x1c2)] || '', {
            'protocol': (_0x5e8f44[_0x16f2f5(0x23d)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x227)](_0x3e6a97, void (-0x1942 + 0x25 * 0xdb + -0x665)) ? void (-0xd53 + -0x1a94 + 0x27e7) : _0x3e6a97[_0x16f2f5(0x1aa)]) || '',
            'name': (_0x5e8f44[_0x16f2f5(0x227)](_0x29c656 = _0x5e8f44[_0x16f2f5(0x1e3)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x1dd)](_0x3e6a97, void (-0x2499 * -0x1 + 0x10ba + -0x3553)) ? void (0x1b8 + -0x26 * 0x52 + 0xa74 * 0x1) : _0x3e6a97[_0x16f2f5(0x205)], null) || _0x5e8f44[_0x16f2f5(0x193)](_0x29c656, void (-0x19ed * 0x1 + 0xcaf + 0xd3e)) ? void (-0xf71 + 0xdf3 + -0x17e * -0x1) : _0x29c656[_0x16f2f5(0x22f)]) || '',
            'email': (_0x5e8f44[_0x16f2f5(0x209)](_0x4f3ff6 = _0x5e8f44[_0x16f2f5(0x1f7)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x23d)](_0x3e6a97, void (0x54e + -0x1228 + -0xe * -0xeb)) ? void (-0x3d3 * 0x7 + -0x1d * 0xb + 0x1c04) : _0x3e6a97[_0x16f2f5(0x205)], null) || _0x5e8f44[_0x16f2f5(0x1d8)](_0x4f3ff6, void (-0xaec + 0x2 * -0xde1 + 0x26ae)) ? void (0x4a + 0x12db * -0x1 + -0x31 * -0x61) : _0x4f3ff6[_0x16f2f5(0x1a9)]) || '',
            'phoneNumber': (_0x5e8f44[_0x16f2f5(0x193)](_0x324d19 = _0x5e8f44[_0x16f2f5(0x221)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x193)](_0x3e6a97, void (0x8 * -0x27f + -0x1903 * 0x1 + -0x5 * -0x8ff)) ? void (0x3 * 0xd03 + -0x685 * 0x4 + 0x1f * -0x6b) : _0x3e6a97[_0x16f2f5(0x205)], null) || _0x5e8f44[_0x16f2f5(0x19a)](_0x324d19, void (-0x239a + 0x1ae1 * -0x1 + 0x23 * 0x1c9)) ? void (0x1efc + -0xb65 * 0x2 + -0x2 * 0x419) : _0x324d19[_0x16f2f5(0x223)]) || '',
            'kanban': (_0x5e8f44[_0x16f2f5(0x23f)](_0x513708 = _0x5e8f44[_0x16f2f5(0x19a)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x23b)](_0x3e6a97, void (0x568 * 0x1 + -0x90e + 0x3a6)) ? void (-0x218 * 0x11 + -0x1955 + -0x1 * -0x3ced) : _0x3e6a97[_0x16f2f5(0x205)], null) || _0x5e8f44[_0x16f2f5(0x23f)](_0x513708, void (-0x16e9 + 0x4 * -0x4aa + 0x2991)) ? void (-0xc74 * -0x1 + -0x10d5 + 0x461) : _0x513708[_0x16f2f5(0x1d2)]) || '',
            'user': (_0x5e8f44[_0x16f2f5(0x193)](_0x3a030b = _0x5e8f44[_0x16f2f5(0x251)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x1ce)](_0x3e6a97, void (0x25f7 + 0x3 * 0x951 + -0x41ea)) ? void (-0x328 + 0xe6 + 0x242) : _0x3e6a97[_0x16f2f5(0x1a6)], null) || _0x5e8f44[_0x16f2f5(0x209)](_0x3a030b, void (-0x107b + 0x1 * 0x1416 + -0xd * 0x47)) ? void (0xc6d * -0x1 + -0x34 * 0x62 + -0xac7 * -0x3) : _0x3a030b[_0x16f2f5(0x22f)]) || '',
            'userEmail': (_0x5e8f44[_0x16f2f5(0x193)](_0x4f8584 = _0x5e8f44[_0x16f2f5(0x23d)](_0x3e6a97, null) || _0x5e8f44[_0x16f2f5(0x1dd)](_0x3e6a97, void (-0x20a2 + 0x25 * -0xe + 0x22a8)) ? void (-0xf32 + 0xfe * 0x14 + -0x4a6) : _0x3e6a97[_0x16f2f5(0x1a6)], null) || _0x5e8f44[_0x16f2f5(0x1bf)](_0x4f8584, void (-0xcd0 + -0x1568 + 0x2238)) ? void (0x3 * 0x63d + -0xf55 + -0x362 * 0x1) : _0x4f8584[_0x16f2f5(0x1a9)]) || ''
        });
        if (_0x5e8f44[_0x16f2f5(0x1b7)](_0x33c675, _0x5e8f44[_0x16f2f5(0x229)]) && _0x1840de[_0x16f2f5(0x1b2)]) {
            _0x2e2d18 = [];
            const _0x5f4c16 = yield _0x5e8f44[_0x16f2f5(0x243)](downloadMedia, _0x1840de);
            _0x2e2d18[_0x16f2f5(0x225)](_0x5f4c16);
        }
        _0x5e8f44[_0x16f2f5(0x23d)](_0x33c675, _0x5e8f44[_0x16f2f5(0x229)]) && !_0x1840de[_0x16f2f5(0x1b2)] && _0x1840de[_0x16f2f5(0x1cf)] && (_0x2e2d18 = [], _0x2e2d18[_0x16f2f5(0x225)](_0x1840de[_0x16f2f5(0x1cf)]));
        if (_0x2e2d18)
            yield Promise[_0x16f2f5(0x21e)](_0x2e2d18[_0x16f2f5(0x1ff)](_0x6b899 => __awaiter(void (-0xea2 + -0xded + 0x1c8f), void (-0x26 * -0x9a + -0x6e1 + -0xffb), void (0xb77 + 0x197 * 0x10 + 0x24e7 * -0x1), function* () {
                const _0x4fda98 = _0x16f2f5;
                try {
                    if (!_0x6b899[_0x4fda98(0x1a8)]) {
                        const _0xb224c6 = _0x6b899[_0x4fda98(0x24d)][_0x4fda98(0x1fe)]('/')[-0x17c9 + 0x22e7 * -0x1 + -0x5 * -0xbbd][_0x4fda98(0x1fe)](';')[-0xc9a + -0x7a2 + 0x143c];
                        _0x6b899[_0x4fda98(0x1a8)] = new Date()[_0x4fda98(0x1ad)]() + '.' + _0xb224c6;
                    }
                } catch (_0x3f7a83) {
                    logger_1[_0x4fda98(0x1d5)][_0x4fda98(0x24e)](_0x3f7a83);
                }
                const _0x554fa9 = Object[_0x4fda98(0x238)](Object[_0x4fda98(0x238)]({}, _0x486159), {
                        'body': _0x6b899[_0x4fda98(0x211) + 'me'],
                        'mediaUrl': _0x6b899[_0x4fda98(0x1a8)],
                        'mediaType': _0x6b899[_0x4fda98(0x232)] || _0x6b899[_0x4fda98(0x24d)][_0x4fda98(0x233)](-0x70 + 0x1b1 * -0x14 + 0x2244, _0x6b899[_0x4fda98(0x24d)][_0x4fda98(0x257)]('/'))
                    }), _0x53072d = yield Message_1[_0x4fda98(0x1a2)][_0x4fda98(0x1a5)](_0x554fa9), _0x24df8a = {};
                _0x24df8a[_0x4fda98(0x1ea)] = _0x43b66b;
                const _0x39ee47 = {};
                _0x39ee47[_0x4fda98(0x1c4)] = Ticket_1[_0x4fda98(0x1a2)], _0x39ee47['as'] = _0x5e8f44[_0x4fda98(0x24b)], _0x39ee47[_0x4fda98(0x22b)] = _0x24df8a, _0x39ee47[_0x4fda98(0x206)] = [_0x5e8f44[_0x4fda98(0x231)]];
                const _0x2d0361 = yield Message_1[_0x4fda98(0x1a2)][_0x4fda98(0x200)](_0x53072d['id'], {
                    'include': [
                        _0x39ee47,
                        {
                            'model': Message_1[_0x4fda98(0x1a2)],
                            'as': _0x5e8f44[_0x4fda98(0x1f3)],
                            'include': [_0x5e8f44[_0x4fda98(0x231)]]
                        }
                    ]
                });
                if (!_0x2d0361)
                    throw new Error(_0x5e8f44[_0x4fda98(0x197)]);
                yield _0x3e6a97[_0x4fda98(0x1e4)]({
                    'lastMessage': _0x2d0361[_0x4fda98(0x1c2)],
                    'lastMessageAt': new Date()[_0x4fda98(0x1ad)]()
                });
                const _0x3ed6db = {};
                _0x3ed6db[_0x4fda98(0x1ea)] = _0x43b66b, _0x3ed6db[_0x4fda98(0x1d7)] = _0x5e8f44[_0x4fda98(0x1fd)], _0x3ed6db[_0x4fda98(0x1fc)] = _0x2d0361, (-0xfdc + 0x1c8b + 0xcaf * -0x1, socketEmit_1[_0x4fda98(0x1a2)])(_0x3ed6db);
            })));
        else {
            const _0x181a00 = {};
            _0x181a00[_0x16f2f5(0x232)] = _0x5e8f44[_0x16f2f5(0x198)];
            const _0x4bffaf = yield Message_1[_0x16f2f5(0x1a2)][_0x16f2f5(0x1a5)](Object[_0x16f2f5(0x238)](Object[_0x16f2f5(0x238)]({}, _0x486159), _0x181a00)), _0x15f939 = {};
            _0x15f939[_0x16f2f5(0x1ea)] = _0x43b66b;
            const _0x2a9dd6 = {};
            _0x2a9dd6[_0x16f2f5(0x1c4)] = Ticket_1[_0x16f2f5(0x1a2)], _0x2a9dd6['as'] = _0x5e8f44[_0x16f2f5(0x24b)], _0x2a9dd6[_0x16f2f5(0x22b)] = _0x15f939, _0x2a9dd6[_0x16f2f5(0x206)] = [_0x5e8f44[_0x16f2f5(0x231)]];
            const _0x13434a = yield Message_1[_0x16f2f5(0x1a2)][_0x16f2f5(0x200)](_0x4bffaf['id'], {
                'include': [
                    _0x2a9dd6,
                    {
                        'model': Message_1[_0x16f2f5(0x1a2)],
                        'as': _0x5e8f44[_0x16f2f5(0x1f3)],
                        'include': [_0x5e8f44[_0x16f2f5(0x231)]]
                    }
                ]
            });
            if (!_0x13434a)
                throw new Error(_0x5e8f44[_0x16f2f5(0x197)]);
            yield _0x3e6a97[_0x16f2f5(0x1e4)]({
                'lastMessage': _0x13434a[_0x16f2f5(0x1c2)],
                'lastMessageAt': new Date()[_0x16f2f5(0x1ad)](),
                'answered': !![]
            });
            if (_0x5e8f44[_0x16f2f5(0x23a)](_0x33c675, _0x5e8f44[_0x16f2f5(0x20c)])) {
                const _0x2ce7dc = {};
                _0x2ce7dc[_0x16f2f5(0x1d0)] = 0x2, _0x2ce7dc[_0x16f2f5(0x232)] = _0x5e8f44[_0x16f2f5(0x20c)], yield _0x13434a[_0x16f2f5(0x1e4)](_0x2ce7dc);
            }
            if (_0x5e8f44[_0x16f2f5(0x193)](_0x33c675, _0x5e8f44[_0x16f2f5(0x1bc)])) {
                const _0x3efea8 = {};
                _0x3efea8[_0x16f2f5(0x232)] = _0x5e8f44[_0x16f2f5(0x1bc)], yield _0x13434a[_0x16f2f5(0x1e4)](_0x3efea8);
            }
            _0x5e8f44[_0x16f2f5(0x1f7)](_0x33c675, _0x5e8f44[_0x16f2f5(0x1ef)]) && (yield _0x13434a[_0x16f2f5(0x1e4)]({
                'body': _0x5e8f44[_0x16f2f5(0x243)](formatarMensagem, _0x486159),
                'mediaType': _0x5e8f44[_0x16f2f5(0x1ef)]
            }));
            if (_0x5e8f44[_0x16f2f5(0x227)](_0x33c675, _0x5e8f44[_0x16f2f5(0x242)])) {
                const _0x50e680 = [], _0xb0c266 = [];
                for (let _0x334af4 = -0x1a25 + -0xa84 + 0x24aa; _0x5e8f44[_0x16f2f5(0x21b)](_0x334af4, 0x26b6 + 0x22c + -0x28d8); _0x334af4++) {
                    const _0x42576f = _0x486159[_0x16f2f5(0x236) + _0x334af4], _0x31cd11 = _0x486159[_0x16f2f5(0x241) + _0x16f2f5(0x203) + _0x334af4];
                    if (_0x5e8f44[_0x16f2f5(0x208)](_0x42576f, _0x31cd11)) {
                        const _0x4c19ff = {};
                        _0x4c19ff['id'] = _0x16f2f5(0x212) + _0x334af4, _0x4c19ff[_0x16f2f5(0x1e6)] = _0x42576f, _0x4c19ff[_0x16f2f5(0x23e) + 'n'] = _0x31cd11, _0xb0c266[_0x16f2f5(0x225)](_0x4c19ff);
                    }
                }
                const _0x4a3256 = {};
                _0x4a3256[_0x16f2f5(0x1e6)] = _0x486159[_0x16f2f5(0x1eb) + 'le'] || '', _0x4a3256[_0x16f2f5(0x202)] = _0xb0c266, _0x50e680[_0x16f2f5(0x225)](_0x4a3256);
                const _0x4a75d2 = {};
                _0x4a75d2[_0x16f2f5(0x1bd)] = _0x486159[_0x16f2f5(0x1bd)], _0x4a75d2[_0x16f2f5(0x1c2)] = _0x486159[_0x16f2f5(0x1c2)], _0x4a75d2[_0x16f2f5(0x194)] = _0x486159[_0x16f2f5(0x194)], _0x4a75d2[_0x16f2f5(0x1cb) + 't'] = _0x486159[_0x16f2f5(0x1cb) + 't'], _0x4a75d2[_0x16f2f5(0x245)] = _0x50e680;
                const _0xc31240 = _0x4a75d2, _0x99ccc1 = JSON[_0x16f2f5(0x1b5)](_0xc31240), _0x341613 = {};
                _0x341613[_0x16f2f5(0x1c2)] = _0x99ccc1, _0x341613[_0x16f2f5(0x232)] = _0x5e8f44[_0x16f2f5(0x242)], yield _0x13434a[_0x16f2f5(0x1e4)](_0x341613);
            }
            const _0x5ecf93 = {};
            _0x5ecf93[_0x16f2f5(0x1ea)] = _0x43b66b, _0x5ecf93[_0x16f2f5(0x1d7)] = _0x5e8f44[_0x16f2f5(0x1fd)], _0x5ecf93[_0x16f2f5(0x1fc)] = _0x13434a, (-0xb4 + -0x48e * 0x6 + 0x1c08, socketEmit_1[_0x16f2f5(0x1a2)])(_0x5ecf93);
        }
    } catch (_0x11f447) {
        logger_1[_0x16f2f5(0x1d5)][_0x16f2f5(0x24e)](_0x5e8f44[_0x16f2f5(0x217)], _0x11f447);
    }
});
function _0x382e() {
    const _0x469ed9 = [
        'uuid',
        '5vVfnWM',
        'url',
        'iouSa',
        'footer',
        'Emit',
        '../../help',
        'qAKTI',
        'iGNPh',
        'add',
        'nIwJf',
        '1681683fNkFMw',
        'button2',
        'ls/Ticket',
        'ERROR\x20DONW',
        'rILLV',
        'Status',
        'public',
        'default',
        'trim',
        'chat:creat',
        'create',
        'user',
        '../../libs',
        'filename',
        'email',
        'protocol',
        'externalKe',
        'defineProp',
        'getTime',
        'fault',
        'Btn',
        'path',
        'OIzIW',
        'mediaUrl',
        '__esModule',
        'erty',
        'stringify',
        '4432445ZxWKEl',
        'ahacz',
        'response',
        '__awaiter',
        '__importDe',
        'eStream',
        'OPmsk',
        'header',
        'pipe',
        'DKMZv',
        'CkHMw',
        'finish',
        'body',
        'ls/Message',
        'model',
        'createWrit',
        'endsWith',
        '4614174PaqCEc',
        'forEach',
        'LoqHx',
        'rmdirSync',
        'button_tex',
        'extension',
        'ervice',
        'mGqXH',
        'media',
        'ack',
        's/pupa',
        'kanban',
        'XtyPT',
        '_SYSTEM',
        'logger',
        'contactId',
        'type',
        'lmZJf',
        '7461286lcFNhc',
        'throw',
        'slice',
        'jIrSf',
        'VryMh',
        'authToken',
        'KBUWo',
        '8QQEoSj',
        'done',
        'OFXmh',
        'HRNBz',
        'update',
        'ZKHvg',
        'title',
        'piCVS',
        'Body:\x20',
        '18164212VOGvRY',
        'tenantId',
        'sectionTit',
        'pupa',
        'LHvkL',
        'xmNGy',
        'GOrHM',
        'ers/socket',
        'ageSystemS',
        'stream',
        'AwSCh',
        'quotedMsg',
        'AyGoX',
        'apply',
        'fylrU',
        'ticket',
        'dIkAB',
        'CreateMess',
        'WebHooksAP',
        'payload',
        'ncbit',
        'split',
        'map',
        'findByPk',
        '8KQocgI',
        'rows',
        'tion',
        'ERR_CREATI',
        'contact',
        'include',
        'content-ty',
        'ZuszD',
        'TFumI',
        'xlcbo',
        'join',
        'VFFVa',
        'message',
        'fRdSt',
        'apiConfig',
        'notes',
        'originalna',
        'row',
        'NG_MESSAGE',
        'LOAD',
        'data',
        'eFUuS',
        'JlnBf',
        'urlMessage',
        'list',
        'PZcdu',
        'bdAda',
        '11238680RFJeDP',
        'value',
        'all',
        'hookMessag',
        'templates',
        'bxQdc',
        '6KiySxB',
        'number',
        '../../mode',
        'push',
        '../../util',
        'asxEY',
        'wxPmV',
        'VMIwa',
        'eStatus',
        'where',
        'QIUlt',
        'BvGXR',
        'get',
        'name',
        'then',
        'oaHEm',
        'mediaType',
        'substr',
        'status',
        'recursive',
        'rowTitle',
        'mime',
        'assign',
        's/logger',
        'bZFdz',
        'dxaOx',
        'atOqt',
        'ZJQEn',
        'descriptio',
        'ymMam',
        'replace',
        'rowDescrip',
        'NKCgs',
        'nWHkL',
        'chat',
        'sections',
        'axios',
        'API',
        '/Queue',
        'ypcbZ',
        'responseTy',
        'GYyLv',
        'button1',
        'mimetype',
        'error',
        'button3',
        'next',
        'NjPMp',
        'headers',
        'fromMe',
        'messageId',
        'button',
        'plsgU',
        'indexOf',
        '133882pNHxcz'
    ];
    _0x382e = function () {
        return _0x469ed9;
    };
    return _0x382e();
}
exports[_0x534dcc(0x1a2)] = CreateMessageSystemService;