'use strict';
const _0x291c58 = _0x5673;
function _0x5df4() {
    const _0x5c050c = [
        'contact',
        'quotedMsg',
        '1065804oJBXHi',
        'apply',
        'defineProp',
        'length',
        'findAndCou',
        'jSeQw',
        'ticketId',
        'throw',
        'where',
        'default',
        '536VwedOf',
        'nkyfj',
        'TfiJy',
        'ERR_NO_TIC',
        'order',
        '19999YUexst',
        'rucfg',
        'tenantId',
        'ntAll',
        '330185uaboDD',
        'DESC',
        '../../mode',
        'whatsappId',
        '29513ffxmuN',
        'OffLine',
        'mkbDn',
        'mFkHN',
        'yiHDK',
        'required',
        'model',
        '18IqFRtr',
        'then',
        'takcw',
        'queueId',
        'ervices/Sh',
        'next',
        'rbgQg',
        'include',
        'dYvJr',
        'fault',
        'value',
        '__esModule',
        'reverse',
        'dtMTf',
        '../../erro',
        'qvYRR',
        '../TicketS',
        'createdAt',
        'ls/Ticket',
        'Nprbm',
        'erty',
        'rvice',
        'VGzQP',
        'GAITt',
        '117408kPdfQx',
        'TZRQZ',
        'iAbrA',
        'KET_FOUND',
        '39FGLLja',
        'contactId',
        'ls/Message',
        'Bxgvh',
        '494104HMhjlR',
        '4120qOLvjf',
        'pldEf',
        'LIfHD',
        'rs/AppErro',
        'done',
        '4129965Nmnqaz',
        '__awaiter',
        'owTicketSe',
        '__importDe'
    ];
    _0x5df4 = function () {
        return _0x5c050c;
    };
    return _0x5df4();
}
(function (_0x299294, _0x5819ea) {
    const _0x1240df = _0x5673, _0x29b247 = _0x299294();
    while (!![]) {
        try {
            const _0x2339c3 = -parseInt(_0x1240df(0x123)) / (0x8fa + 0x472 * 0x1 + -0x2af * 0x5) + -parseInt(_0x1240df(0x12f)) / (-0x2015 * 0x1 + 0xd28 + 0x12ef) + parseInt(_0x1240df(0x11f)) / (-0x1a07 * 0x1 + 0x5e0 + 0x142a) * (parseInt(_0x1240df(0x11b)) / (-0x9 * -0x139 + -0x1d9 + -0x924)) + -parseInt(_0x1240df(0x142)) / (-0x2c * 0xb + -0x1b6f + 0xc * 0x272) * (parseInt(_0x1240df(0x14d)) / (-0x647 * -0x6 + 0xb0b + -0x30af * 0x1)) + parseInt(_0x1240df(0x13e)) / (-0x10ce + -0xb * -0x375 + 0x1532 * -0x1) * (-parseInt(_0x1240df(0x139)) / (-0x125c + 0x197d + -0x719)) + parseInt(_0x1240df(0x129)) / (-0x2f * 0x1 + -0x4 * -0x1a7 + 0x4 * -0x199) + -parseInt(_0x1240df(0x124)) / (0x89 * 0x27 + -0xf1 * -0x1 + -0x2 * 0xae3) * (-parseInt(_0x1240df(0x146)) / (-0x1 * 0x32 + 0x23d5 + -0x2398));
            if (_0x2339c3 === _0x5819ea)
                break;
            else
                _0x29b247['push'](_0x29b247['shift']());
        } catch (_0x3fe451) {
            _0x29b247['push'](_0x29b247['shift']());
        }
    }
}(_0x5df4, -0x92101 + 0x7ba9c * 0x1 + 0x97a0e));
var __awaiter = this && this[_0x291c58(0x12a)] || function (_0xfa765e, _0x2ca502, _0x3143b6, _0x1bb324) {
        const _0x366140 = _0x291c58, _0x31fb1a = {
                'takcw': function (_0x105c13, _0x35693a) {
                    return _0x105c13(_0x35693a);
                },
                'rbgQg': function (_0x21ef54, _0x3c8347) {
                    return _0x21ef54 instanceof _0x3c8347;
                },
                'jSeQw': function (_0x5ccf17, _0x331253) {
                    return _0x5ccf17(_0x331253);
                },
                'nkyfj': _0x366140(0x136),
                'iAbrA': function (_0x2fc2d4, _0x135b5d) {
                    return _0x2fc2d4(_0x135b5d);
                },
                'yiHDK': function (_0x54a5c3, _0x246c17) {
                    return _0x54a5c3(_0x246c17);
                }
            };
        function _0x5aef9e(_0x102c93) {
            const _0xff601f = _0x366140;
            return _0x31fb1a[_0xff601f(0x109)](_0x102c93, _0x3143b6) ? _0x102c93 : new _0x3143b6(function (_0x4dca5a) {
                const _0x4aba42 = _0xff601f;
                _0x31fb1a[_0x4aba42(0x14f)](_0x4dca5a, _0x102c93);
            });
        }
        return new (_0x3143b6 || (_0x3143b6 = Promise))(function (_0x38f3e4, _0x7be00) {
            const _0x55ef0f = _0x366140, _0x197867 = {
                    'dtMTf': function (_0x43405f, _0x5661d5) {
                        const _0x551018 = _0x5673;
                        return _0x31fb1a[_0x551018(0x134)](_0x43405f, _0x5661d5);
                    },
                    'Nprbm': _0x31fb1a[_0x55ef0f(0x13a)],
                    'qvYRR': function (_0x35480a, _0x26c9a6) {
                        const _0x4dc377 = _0x55ef0f;
                        return _0x31fb1a[_0x4dc377(0x14f)](_0x35480a, _0x26c9a6);
                    },
                    'mFkHN': function (_0x2bc170, _0x51746d) {
                        const _0x24e2e5 = _0x55ef0f;
                        return _0x31fb1a[_0x24e2e5(0x11d)](_0x2bc170, _0x51746d);
                    }
                };
            function _0x2bc819(_0x2c0dae) {
                const _0x442adc = _0x55ef0f;
                try {
                    _0x197867[_0x442adc(0x110)](_0x2baba3, _0x1bb324[_0x442adc(0x108)](_0x2c0dae));
                } catch (_0x32e7ef) {
                    _0x197867[_0x442adc(0x110)](_0x7be00, _0x32e7ef);
                }
            }
            function _0x44d9f9(_0x512fb2) {
                const _0x354d98 = _0x55ef0f;
                try {
                    _0x197867[_0x354d98(0x110)](_0x2baba3, _0x1bb324[_0x197867[_0x354d98(0x116)]](_0x512fb2));
                } catch (_0x563f9c) {
                    _0x197867[_0x354d98(0x110)](_0x7be00, _0x563f9c);
                }
            }
            function _0x2baba3(_0x3017d4) {
                const _0x104e78 = _0x55ef0f;
                _0x3017d4[_0x104e78(0x128)] ? _0x197867[_0x104e78(0x112)](_0x38f3e4, _0x3017d4[_0x104e78(0x10d)]) : _0x197867[_0x104e78(0x149)](_0x5aef9e, _0x3017d4[_0x104e78(0x10d)])[_0x104e78(0x14e)](_0x2bc819, _0x44d9f9);
            }
            _0x31fb1a[_0x55ef0f(0x14a)](_0x2baba3, (_0x1bb324 = _0x1bb324[_0x55ef0f(0x130)](_0xfa765e, _0x2ca502 || []))[_0x55ef0f(0x108)]());
        });
    }, __importDefault = this && this[_0x291c58(0x12c) + _0x291c58(0x10c)] || function (_0x4f843e) {
        const _0x91f7e7 = _0x291c58;
        return _0x4f843e && _0x4f843e[_0x91f7e7(0x10e)] ? _0x4f843e : { 'default': _0x4f843e };
    };
const _0x112752 = {};
function _0x5673(_0x365ed6, _0x4b8443) {
    const _0x161c2c = _0x5df4();
    return _0x5673 = function (_0x2e1d01, _0x5d5109) {
        _0x2e1d01 = _0x2e1d01 - (0x170f * -0x1 + 0x1 * -0x25a6 + 0x3dbb);
        let _0x148686 = _0x161c2c[_0x2e1d01];
        return _0x148686;
    }, _0x5673(_0x365ed6, _0x4b8443);
}
_0x112752[_0x291c58(0x10d)] = !![], Object[_0x291c58(0x131) + _0x291c58(0x117)](exports, _0x291c58(0x10e), _0x112752);
const AppError_1 = __importDefault(require(_0x291c58(0x111) + _0x291c58(0x127) + 'r')), Message_1 = __importDefault(require(_0x291c58(0x144) + _0x291c58(0x121))), MessageOffLine_1 = __importDefault(require(_0x291c58(0x144) + _0x291c58(0x121) + _0x291c58(0x147))), Ticket_1 = __importDefault(require(_0x291c58(0x144) + _0x291c58(0x115))), ShowTicketService_1 = __importDefault(require(_0x291c58(0x113) + _0x291c58(0x107) + _0x291c58(0x12b) + _0x291c58(0x118))), ListMessagesService = ({
        pageNumber: pageNumber = '1',
        ticketId: _0x2cf1f4,
        tenantId: _0x241c2c
    }) => __awaiter(void (0x16b5 + 0x19d * 0x13 + -0x355c), void (0x42 * -0x1b + -0xf9f + 0x7b * 0x2f), void (0x368 * 0x7 + -0x1573 + -0x265), function* () {
        const _0x4c8f34 = _0x291c58, _0x3d71ab = {};
        _0x3d71ab[_0x4c8f34(0x119)] = _0x4c8f34(0x13c) + _0x4c8f34(0x11e), _0x3d71ab[_0x4c8f34(0x125)] = function (_0x1d790a, _0x587919) {
            return _0x1d790a * _0x587919;
        }, _0x3d71ab[_0x4c8f34(0x13f)] = function (_0x476480, _0x2ca450) {
            return _0x476480 - _0x2ca450;
        }, _0x3d71ab[_0x4c8f34(0x11a)] = _0x4c8f34(0x12d), _0x3d71ab[_0x4c8f34(0x11c)] = _0x4c8f34(0x12e), _0x3d71ab[_0x4c8f34(0x148)] = _0x4c8f34(0x114), _0x3d71ab[_0x4c8f34(0x13b)] = _0x4c8f34(0x143), _0x3d71ab[_0x4c8f34(0x126)] = function (_0x2fd7fc, _0x4317d6) {
            return _0x2fd7fc === _0x4317d6;
        }, _0x3d71ab[_0x4c8f34(0x122)] = function (_0x332fca, _0x1bda68) {
            return _0x332fca > _0x1bda68;
        }, _0x3d71ab[_0x4c8f34(0x10b)] = function (_0x16a301, _0x5e83a2) {
            return _0x16a301 + _0x5e83a2;
        };
        const _0x23640a = _0x3d71ab, _0x4896f2 = {};
        _0x4896f2['id'] = _0x2cf1f4, _0x4896f2[_0x4c8f34(0x140)] = _0x241c2c;
        const _0xa9ced6 = yield (-0x139f + -0x2207 + 0x35a6, ShowTicketService_1[_0x4c8f34(0x138)])(_0x4896f2);
        if (!_0xa9ced6)
            throw new AppError_1[(_0x4c8f34(0x138))](_0x23640a[_0x4c8f34(0x119)], 0x6b * 0x4a + 0x1 * 0xd57 + -0xe3b * 0x3);
        const _0x3e5dad = 0x1ae7 + -0x1340 + -0x789, _0x4ceb07 = _0x23640a[_0x4c8f34(0x125)](_0x3e5dad, _0x23640a[_0x4c8f34(0x13f)](+pageNumber, 0x25ea + -0xd56 + -0x1b * 0xe9)), _0x4d60ee = {};
        _0x4d60ee[_0x4c8f34(0x106)] = _0xa9ced6[_0x4c8f34(0x106)], _0x4d60ee[_0x4c8f34(0x120)] = _0xa9ced6[_0x4c8f34(0x120)], _0x4d60ee[_0x4c8f34(0x145)] = _0xa9ced6[_0x4c8f34(0x145)];
        const _0x58975e = {};
        _0x58975e[_0x4c8f34(0x14c)] = Ticket_1[_0x4c8f34(0x138)], _0x58975e[_0x4c8f34(0x137)] = _0x4d60ee, _0x58975e[_0x4c8f34(0x14b)] = !![];
        const {
            count: _0x58ec73,
            rows: _0x5810bb
        } = yield Message_1[_0x4c8f34(0x138)][_0x4c8f34(0x133) + _0x4c8f34(0x141)]({
            'limit': _0x3e5dad,
            'include': [
                _0x23640a[_0x4c8f34(0x11a)],
                {
                    'model': Message_1[_0x4c8f34(0x138)],
                    'as': _0x23640a[_0x4c8f34(0x11c)],
                    'include': [_0x23640a[_0x4c8f34(0x11a)]]
                },
                _0x58975e
            ],
            'offset': _0x4ceb07,
            'order': [[
                    _0x23640a[_0x4c8f34(0x148)],
                    _0x23640a[_0x4c8f34(0x13b)]
                ]]
        });
        let _0x4eb6c5 = [];
        if (_0x23640a[_0x4c8f34(0x126)](+pageNumber, -0xbc * 0x4 + 0x1 * -0x11a1 + -0x2 * -0xa49)) {
            const _0x40c221 = {};
            _0x40c221[_0x4c8f34(0x135)] = _0x2cf1f4;
            const _0x465b68 = {};
            _0x465b68[_0x4c8f34(0x137)] = _0x40c221, _0x465b68[_0x4c8f34(0x10a)] = [
                _0x23640a[_0x4c8f34(0x11a)],
                {
                    'model': Message_1[_0x4c8f34(0x138)],
                    'as': _0x23640a[_0x4c8f34(0x11c)],
                    'include': [_0x23640a[_0x4c8f34(0x11a)]]
                }
            ], _0x465b68[_0x4c8f34(0x13d)] = [[
                    _0x23640a[_0x4c8f34(0x148)],
                    _0x23640a[_0x4c8f34(0x13b)]
                ]];
            const {rows: _0x4662bd} = yield MessageOffLine_1[_0x4c8f34(0x138)][_0x4c8f34(0x133) + _0x4c8f34(0x141)](_0x465b68);
            _0x4eb6c5 = _0x4662bd;
        }
        const _0x3c5448 = _0x23640a[_0x4c8f34(0x122)](_0x58ec73, _0x23640a[_0x4c8f34(0x10b)](_0x4ceb07, _0x5810bb[_0x4c8f34(0x132)]));
        return {
            'messages': _0x5810bb[_0x4c8f34(0x10f)](),
            'messagesOffLine': _0x4eb6c5,
            'ticket': _0xa9ced6,
            'count': _0x58ec73,
            'hasMore': _0x3c5448
        };
    });
exports[_0x291c58(0x138)] = ListMessagesService;